<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="de" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Mit Docker vom Linuxserver zur eigenen Cloud: Alles auf einen Blick</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="manifest" href="../site.webmanifest">
<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav UT"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Zum Hauptinhalt springen</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="UT-logo" alt="Universität Tübingen" src="../assets/images/UT-logo.svg"><span class="badge text-bg-info">
          <abbr title="Diese Lektion befindet sich in der Beta-Phase, was bedeutet, dass sie bereit für den Unterricht durch Dozenten außerhalb des ursprünglichen Autorenteams ist.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#polishing-beta-stage" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">Diese Lektion befindet sich in der Beta-Phase, was bedeutet, dass sie bereit für den Unterricht durch Dozenten außerhalb des ursprünglichen Autorenteams ist.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Thema umschalten (automatisch)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Dozentenansicht <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Lernansicht</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav UT" aria-label="Hauptnavigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Navigation umschalten">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menü</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Universität Tübingen" src="../assets/images/UT-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Mit Docker vom Linuxserver zur eigenen Cloud
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Suche auf der All-In-One-Seite" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Mit Docker vom Linuxserver zur eigenen Cloud
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Hauptpunkte</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Dozentennotizen</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Alle Bilder extrahieren</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Mehr <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Suche auf der All-In-One-Seite"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Suche auf der All-In-One-Seite">Suche auf der All-In-One-Seite</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Mit Docker vom Linuxserver zur eigenen Cloud
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress UT">
    <div class="progress-bar UT" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lernfortschritt" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="Menü schließen" alt="Menü schließen" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Ausblenden " data-episodes="Episoden ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Dozentenansicht
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Lernansicht</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODEN
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Zusammenfassung und Zeitplan</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01_vorbesprechung.html">1. Vorbesprechung</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02_betriebssystem-und-linuxgrundlagen.html">2. Betriebssystem und Linuxgrundlagen</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-remote-access.html">3. Remote Access: das SSH-Protokoll.rmd</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-sicherheit-1-benutzer-dateien.html">4. Sicherheit 1: Benutzer und Dateirechte</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-sicherheit-2-firewall-file2ban.html">5. Sicherheit 2: Firewall und Fail2Ban</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-docker-basics.html">6. Grundlegendes zu Docker</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-docker-compose.html">7. Docker compose</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-webserver-docker-compose.html">8. Webserver mit Docker Compose</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-proxy-docker-compose.html">9. 09_proxy-docker-compose</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-nextcloud-aio.html">10. Nextcloud mit Docker installieren</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="11-nextcloud-aio-konfiuguration.html">11. Nextcloud AIO: Konfiguration</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="12-joplin.html">12. Knowledge-und Notizmanagement mit Joplin</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="13-mehr-docker.html">13. Mehr Docker</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESSOURCEN
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Hauptpunkte</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Dozentennotizen</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Alle Bilder extrahieren</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">Alles auf einer Seite sehen</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01_vorbesprechung"><p>Content from <a href="01_vorbesprechung.html">Vorbesprechung</a></p>
<hr>
<p>Zuletzt aktualisiert am 2025-10-21 |

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/episodes/01_vorbesprechung.Rmd" class="external-link">Diese Seite bearbeiten <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Geschätzte Zeit: <i aria-hidden="true" data-feather="clock"></i> 12 Minuten</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Alle Lösungen anzeigen " data-collapse="Alle Lösungen ausblenden "> Alle Lösungen anzeigen <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Übersicht</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Fragen</h3>
<ul>
<li>Was ist Datenmanagement?</li>
<li>Was ist digitale Selbstbestimmtheit?</li>
<li>Warum ist eine selbst gehostete Datenmanagementlösung gut?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Ziele</h3>
<ul>
<li>Thematische Einleitung</li>
<li>Vorstellung der Ziele und Inhalte des Kurses</li>
<li>Voraussetzungen, die Sie mitbringen sollten</li>
<li>Informationen zum Ablauf des Kurses</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="thematische-einleitung">Thematische Einleitung<a class="anchor" aria-label="anchor" href="#thematische-einleitung"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="datenmanagement-im-wissenschaftlichen-kontext">Datenmanagement im wissenschaftlichen Kontext<a class="anchor" aria-label="anchor" href="#datenmanagement-im-wissenschaftlichen-kontext"></a>
</h3>
<p>Der Begriff des Forschungsdatenmanagements (FDM) umschreibt den
Umgang mit Forschungsdaten (z.B. Messdaten, Bilder, Artikel,
Interviewdaten u.v.m.) innerhalb von Forschungsprojekten. Dabei beginnt
FDM bei der Planung von Projekten, legt Standards für das Erstellen,
Analysieren und Publizieren fest und sorgt durch strukturierte
Archivierung für eine nachhaltige Speicherung und die Möglichkeit der
Nachnutzung der Forschungsdaten.</p>
<p>Mehr zum Thema FDM finden Sie z.B. <a href="https://uni-tuebingen.de/de/240762" class="external-link">hier</a>, <a href="https://forschungsdaten.info/" class="external-link">hier</a> oder im Kurs <a href="https://dr-eberle-zentrum.github.io/FDM-basics/" class="external-link">FDM
Basics</a></p>
<p>Um während der aktiven Forschungsarbeit seine Daten strukturiert und
zugänglich speichern zu können und mit anderen Projektteilnehmenden
kollaborieren zu können, sind online Dateispeicherung und online
Dateibearbeitung essentiell.</p>
<p>Häufig werden hierfür die Angebote großer Tech-Konzerne aus dem
Ausland genutzt. Es gibt aber auch die Möglichkeit solche Lösungen
selbst zu betreiben. Dadurch ist der Datenschutz gewährleistet, da keine
Daten außerhalb der EU gespeichert werden. Außerdem ist man unabhängig
von den vermeintlich günstigen Angeboten der Tech-Konzerne.</p>
<p>Die Probleme, die eine solche Abhängigkeit auch im privaten Alltag
herbeiführen, erfahren Sie in der folgenden Aufgabe.</p>
<div id="aufgabe-1-mark-und-sein-sohn" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="aufgabe-1-mark-und-sein-sohn" class="callout-inner">
<h3 class="callout-title">Aufgabe 1: Mark und sein Sohn</h3>
<div class="callout-content">
<ul>
<li><p>Lesen Sie den folgenden Artikel: <a href="https://www.spiegel.de/netzwelt/netzpolitik/google-vater-fotografiert-genitalbereich-von-krankem-kleinkind-und-der-aerger-beginnt-a-b0703d5e-7109-4271-bfa7-af07b551e105" class="external-link">SPIEGEL:
Autoupload in die Google-Cloud</a></p></li>
<li><p>Welche grundlegenden Probleme führten zu Marks
Situation?</p></li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>In diesem Fall ist einiges schief gelaufen. Wir werden darüber in der
ersten Präsenzsitzung diskutieren.</p>
<p>Auf jeden Fall hat Mark jedoch seine informationelle Selbstbestimmung
aufgegeben.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="informationelle-selbstbestimmtheit">Informationelle Selbstbestimmtheit<a class="anchor" aria-label="anchor" href="#informationelle-selbstbestimmtheit"></a>
</h3>
<p>Unter dem Begriff <em>informationelle Selbstbestimmtheit</em> wird
verstanden, dass Personen selbst über ihre Daten bestimmen können. Das
<a href="https://www.bverfg.de/e/rs19831215_1bvr020983.html" class="external-link">Bundesverfassungsgericht</a>
hat dazu bereits 1983 geurteilt:</p>
<blockquote>
<p>“Das Grundrecht gewährleistet insoweit die Befugnis des Einzelnen,
grundsätzlich selbst über die Preisgabe und Verwendung seiner
persönlichen Daten zu bestimmen.”</p>
</blockquote>
<p><strong>Aber wie können wir selbst über die Preisgabe unserer Daten
bestimmen?</strong></p>
</div>
<div class="section level3">
<h3 id="digitale-mündigkeit">Digitale Mündigkeit<a class="anchor" aria-label="anchor" href="#digitale-m%C3%BCndigkeit"></a>
</h3>
<p>Um selbst über seine Daten zu bestimmen, sollte man die Daten und
deren Zustandenkommen verstehen. D.h. angewendete Technik sollte
verstanden und hinterfragt werden. Stimmt etwas nicht, sollte Kritik
geübt werden oder ggf. nach Alternativen gesucht werden. Fragen Sie sich
beim Einsatz digitaler Tools immer:</p>
<ul>
<li><p>Welche Daten gibt es?</p></li>
<li><p>Wann entstehen welche Daten?</p></li>
<li><p>Wer hat Zugriff auf diese Daten?</p></li>
<li><p>Welche Daten möchte ich wem preis geben und welche behalte ich
für mich?</p></li>
</ul>
<div id="wie-digital-mündig-sind-sie" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="wie-digital-mündig-sind-sie" class="callout-inner">
<h3 class="callout-title">Wie digital mündig sind Sie?</h3>
<div class="callout-content">
<p>Lesen Sie den folgenden Artikel von <a href="https://digitalcourage.de/digitale-selbstverteidigung/digitale-muendigkeit" class="external-link">Digitalcourage</a></p>
<p>Welche der im Artikel genannten Punkte setzen Sie bereits um? In
welchen Bereichen können Sie noch “mündiger” werden?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Nutzen Sie ein kostenloses E-Mailpostfach? Speichern Sie Daten in
verdächtig günstigen Onlinespeichern? Wie abhängig sind Sie von Big Tech
(Apple, Google, Amazon, Microsoft)?</p>
</div>
</div>
</div>
</div>
<p>Mehr zum Thema digitale Mündigkeit findet sich auch bei Simon 2024 <a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<div id="digitale-selbstbestimmtheit" class="callout testimonial">
<div class="callout-square">
<i class="callout-icon" data-feather="heart"></i>
</div>
<span class="callout-header">Referenz</span>
<div id="digitale-selbstbestimmtheit" class="callout-inner">
<h3 class="callout-title">Digitale Selbstbestimmtheit</h3>
<div class="callout-content">
<p>Zu einem selbstbestimmten Leben gehört auch eine digitale
Selbstbestimmtheit.</p>
<p>Deshalb:</p>
<ul>
<li><p>eingesetzte Technik verstehen</p></li>
<li><p>Open-Source statt Closed Source</p></li>
<li><p>Community statt Großkonzern</p></li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="noch-mehr-zu-digitaler-selbstbestimmtheit-und-selbstverteidigung">Noch mehr zu digitaler Selbstbestimmtheit und
Selbstverteidigung<a class="anchor" aria-label="anchor" href="#noch-mehr-zu-digitaler-selbstbestimmtheit-und-selbstverteidigung"></a>
</h3>
<p>Noch mehr Informationen zum Thema finden Sie bei Interesse unter
anderem bei den folgenden Quellen:</p>
<ul>
<li><p><a href="https://github.com/Dr-Eberle-Zentrum/Digitale-Selbstverteidigung" class="external-link">Seminar
zur digitalen Selbstverteidigung</a></p></li>
<li><p>E. Snowden, Permanent Record - Meine Geschichte, (Berlin
2019)</p></li>
<li><p>J. Caspar, Wir Datensklaven - Wege aus der digitalen Ausbeutung,
(Berlin 2023)</p></li>
<li><p><a href="https://www.digitalcourage.org" class="external-link">Digitalcourage</a></p></li>
<li><p><a href="https://www.netzpolitik.org" class="external-link">Netzpolitik</a></p></li>
<li><p><a href="https://www.ccc.de" class="external-link">ChaosComputerClub</a> und <a href="https://media.ccc.de/" class="external-link">Streams des CCC</a></p></li>
</ul>
</div>
</section><section><h2 class="section-heading" id="ziele-und-inhalte-des-kurses">Ziele und Inhalte des Kurses<a class="anchor" aria-label="anchor" href="#ziele-und-inhalte-des-kurses"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="allgemeine-ziele">Allgemeine Ziele<a class="anchor" aria-label="anchor" href="#allgemeine-ziele"></a>
</h3>
<ul>
<li><p>Einstieg die Linux-(Server)-Welt</p></li>
<li><p>Weniger Angst vor Technik (und Fehlern)</p></li>
<li><p>Einstieg in die Systemadministration</p></li>
<li><p>Einrichten einer selbst betriebenen Webanwendung zur
Dateiverwaltung (“Cloud”) mittels Docker</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="inhaltliche-schwerpunkte">Inhaltliche Schwerpunkte<a class="anchor" aria-label="anchor" href="#inhaltliche-schwerpunkte"></a>
</h3>
<ul>
<li><strong>Betriebssystem: Installation und grundlegende
Verwaltung:</strong></li>
</ul>
<p>Wir beginnen ganz am Anfang mit der Installation und dem Kennenlernen
des Linux-Betriebssystems. Wir nutzen dazu das Betriebssystem <a href="https://ubuntu.com/server" class="external-link">Ubuntu</a> in der Servervariante,
welches wiederum auf dem Debian-Betriebssystem aufbaut.</p>
<ul>
<li><strong>Sicherheit: Backup, Firewall, Fern-Zugriff:</strong></li>
</ul>
<p>Vor der Installation der eigentlichen Cloud-Software muss der Server
eingerichtet werden. Dazu zählen z.B. Funktionen zum Fernzugriff (SSH),
verschiedene Techniken zum Absichern des Servers (Firewall, Benutzer und
Zugriffsrechte) aber auch das Thema Backup.</p>
<figure><img src="../fig/01_rsync_firewall_ssh.png" alt="Drei Screenshot von Kommandozeilen. Der erste zeigt einen Befehl zum herstellen einer SSH-Verbindung, der zweite den rsync-Befehl zum erstellen von Backups und der dritte den Befehl zur erlauben von SSH-Verbindungen in der Firewall." class="figure mx-auto d-block"><div class="figcaption">Wir werden die meiste Zeit mit der Kommandozeile
arbeiten (hier am Beispiel von SSH (Fernzugriff), Rsync
(Dateisynchronisation) und ufw (Firewall)</div>
</figure><ul>
<li><strong>Docker und Webserver</strong></li>
</ul>
<p>Im zweiten Teil des Kurses liegt der Fokus auf Webservern, mit
welchen Webanwendungen verfügbar gemacht werden und Docker, mit welchem
Software unabhängig vom Betriebssystem installiert und konfiguriert
werden kann. Als Webserver werden wir mit Apache2 und NGINX arbeiten und
lernen, wie wir TLS-Zertifiakte zur Sicherung der Webanwendung
erhalten.</p>
<ul>
<li><strong>Nextcloud und mehr Services</strong></li>
</ul>
<p>Im dritten Teil des Kurses werden die zuvor erlernten Grundlagen
angewendet, um mit Docker die Kollaborationsplattform Nextcloud und
andere spannende Webanwendungen zu installieren und zu
konfigurieren.</p>
</div>
</section><section><h2 class="section-heading" id="voraussetzungen">Voraussetzungen<a class="anchor" aria-label="anchor" href="#voraussetzungen"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="allgemeine-voraussetzungen">Allgemeine Voraussetzungen<a class="anchor" aria-label="anchor" href="#allgemeine-voraussetzungen"></a>
</h3>
<ul>
<li><p>Sie sollten sicher mit Ihrem PC (Windows oder Linux) oder Ihrem
Mac umgehen können</p></li>
<li><p>Sie sollten keine Angst vor Technik und der Kommandozeile
haben</p></li>
<li><p>Sie benötigen ein Notebook oder Tablett mit Tastatur (keine
Touch-Geräte).</p></li>
<li><p>Zugriff mit Ihrem Gerät auf das Eduroam- und das VPN-Netzwerk der
Universität Tübingen</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="technische-voraussetzungen">Technische Voraussetzungen<a class="anchor" aria-label="anchor" href="#technische-voraussetzungen"></a>
</h3>
<p>Allen Teilnehmenden wird ein virtueller Server im Rechenzentrum der
Universität zur Verfügung gestellt. Sie benötigen keinen eigenen Server.
Sollten Sie die im Kurs erlangten Kenntnisse später auf eigener Hardware
umsetzen wollen, eignen sich Einplatinen-Computer (System-on-Chip, kurz
SoC) wie ein Raspberry Pi 5.</p>
</div>
</section><section><h2 class="section-heading" id="organisatorisches">Organisatorisches<a class="anchor" aria-label="anchor" href="#organisatorisches"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="wöchentlicher-ablauf">Wöchentlicher Ablauf:<a class="anchor" aria-label="anchor" href="#w%C3%B6chentlicher-ablauf"></a>
</h3>
<p>Die Wochen laufen i.d.R. wie folgt ab:</p>
<ol style="list-style-type: decimal">
<li>Sie arbeiten das Selbstlernmaterial auf <a href="https://dr-eberle-zentrum.github.io/docker-linuxserver-cloud/" class="external-link">Github</a>
durch</li>
</ol>
<!-- macht wegen KI keinen Sinn mehr

2. Sie absolvieren auf [ILIAS][ilias] den Test zum Selbstlernmaterial
--><ol start="2" style="list-style-type: decimal">
<li><p>Sie setzen die Arbeitsschritte selbstständig auf Ihrem Server um.
Dazu können Sie (online oder in Präsenz) zum Übungstermin
kommen.</p></li>
<li><p>Sie kommen am Ende jeder Studieneinheit (3x pro Semester) zu
einem Gespräch Vertiefungsgespräch</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="leistungsnachweis">Leistungsnachweis<a class="anchor" aria-label="anchor" href="#leistungsnachweis"></a>
</h3>
<ul>
<li><p>Bei erbrachter Leistung erhalten Sie für diesen Kurs 3
ECTS-Punkte</p></li>
<li><p>Der Kurs ist anrechenbar für das Zertifikat <em><a href="https://uni-tuebingen.de/de/180835" class="external-link">Data Literacy</a></em> im
Wahlbereich praktische Anwendungen</p></li>
<li>
<p>Die erforderlichen Leistungen sind:</p>
<ul>
<li><p>wöchentliche Bearbeitung der Lernmaterialien</p></li>
<li><p>selbstständige Konfiguration eines Cloud-Servers</p></li>
<li><p>3 Vertiefungsgespräche im Semester</p></li>
<li><p>Verfassen eines Abschlussberichts (ca. 3-4 Seiten)</p></li>
</ul>
</li>
<li><p>Der Workload beträgt entsprechend 3 ECTS ca. 90 Stunden im
Semester. Davon entfallen ca. 21 Stunden auf die Übungen, 9 Stunden auf
den Abschlussbericht und 60 Stunden auf die Vor- und Nachbereitung der
Sitzungen inkl. den Vertiefungsgesprächen. D.h. pro Woche müssen Sie
während der Vorlesungszeit durchschnittlich ca. 4,3 Stunden Arbeitszeit
zusätzlich zu den Übungssitzungen einplanen.</p></li>
</ul>
<p><strong>Mehr Informationen folgen in der ersten
Präsenzsitzung.</strong></p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Hauptpunkte</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Die eigene Cloud schützt die Privatsphäre und reduziert die
Abhängigkeit von großen Monopolisten</li>
<li>Der Kurs begleitet Sie vom Linux Betriebssystem über die
Grundkonfiguration des Servers bis hin zur Installation und
Konfiguration des eigenen Cloudservers im Docker Container</li>
<li>Sie müssen jede Woche Selbstlernmaterial durcharbeiten, auf ILIAS
einen Test durchführen und die praktischen Aufgaben absolvieren</li>
<li>Am Ende des Kurses müssen Sie noch einen Abschlussbericht
verfassen</li>
<li>Für den Kurs erhalten Sie 3 ECTS-Punkte</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section><div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>L. Simon, Digitale Mündigkeit - Wie wir mit einer neuen
Haltung die Welt retten können, (Bielefeld 2024)<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div></section><section id="aio-02_betriebssystem-und-linuxgrundlagen"><p>Content from <a href="02_betriebssystem-und-linuxgrundlagen.html">Betriebssystem und Linuxgrundlagen</a></p>
<hr>
<p>Zuletzt aktualisiert am 2025-10-21 |

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/episodes/02_betriebssystem-und-linuxgrundlagen.Rmd" class="external-link">Diese Seite bearbeiten <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Geschätzte Zeit: <i aria-hidden="true" data-feather="clock"></i> 12 Minuten</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Alle Lösungen anzeigen " data-collapse="Alle Lösungen ausblenden "> Alle Lösungen anzeigen <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Übersicht</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Fragen</h3>
<ul>
<li><p>Wie wähle ich die richtige Hard- und Software aus?</p></li>
<li><p>Wie installiere ich ein Linux-Betriebssystems?</p></li>
<li><p>Wie bediene ich ein Linux-Betriebssystem?</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Ziele</h3>
<ul>
<li>Begriffsklärung</li>
<li>Betriebssystem installieren</li>
<li>Grundlagen mit der Linux-Kommandozeile</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="die-hard--und-software">Die Hard- und Software<a class="anchor" aria-label="anchor" href="#die-hard--und-software"></a>
</h1>
<div class="section level2">
<h2 id="hardware">Hardware<a class="anchor" aria-label="anchor" href="#hardware"></a>
</h2>
<p>Zu Beginn der meisten IT-Projekte steht die Frage, wo diese Projekte
umgesetzt werden sollen. Dabei gibt es heutzutage unterschiedliche
Möglichkeiten. Abgesehen von Tests auf lokalen Endgeräten wie PC oder
Notebook, werden für viele Projekte spezialisierte Geräte genutzt. Vor
allem für Firmen, Rechenzentren und andere Hochleistungsszenarien werden
Computer mit <strong>spezialisierter Hardware</strong> (Prozessoren,
Festplatten, Arbeitsspeicher oder RAID-Controller) eingesetzt, die für
diese anspruchsvollen Aufgaben geeignet ist und häufig nicht mit
Endanwender-Hardware vergleichbar ist.</p>
<p>Neben eigener Hardware besteht heute auch die Möglichkeit, seine
Projekte auf fremder Hardware umzusetzen. Diese fremde Hardware befindet
sich in einem <strong>entfernten Rechenzentrum (“der Cloud”)</strong>
und ist über das Internet erreich- und steuerbar. Häufig wird die
Hardware dabei virtualisiert, d.h. dass z.B. die Leistung eines echten
Prozessors mithilfe von Software für mehrere virtuelle Computer zur
Verfügung gestellt wird.</p>
<p>Für dezentrale Projekte können sogenannte <strong>Embedded
Devices</strong> genutzt werden. Hierbei handelt es sich häufig um
Spezialanfertigungen für genau einen Einsatzzweck, z.B. als Kassensystem
oder Waage im Supermarkt oder als Informationsdisplay im öffentlichen
Raum. Für diese Geräte werden auch spezielle Betriebssysteme und
Software eingesetzt.</p>
<p>Für kleinere Projekte wie Heimanwender können normale PCs genutzt
werden. Passender für Projekte mit wenig Leistungsanspruch (und im
Heimanwenderbereich ist das i.d.R. der Fall) sind Mini-PCs, bei denen
sämtliche oder die meisten Bauteile (Prozessor, Arbeitsspeicher,
Datenspeicher und externe Schnittstellen wie Netzwerk und USB) auf einer
Platine verbaut sind. Diese sogenannten <strong>Systems-on-a-Chip
(SoC)</strong> haben den Vorteil, dass sie besonders energiesparsam
sind, wenig Platz benötigen, keinen oder kaum Lärm verursachen und im
Vergleich mit herkömmlichen PCs oder gar professionellen Servern
deutlich günstiger sind.</p>
</div>
<div class="section level2">
<h2 id="server-vs--client">Server vs. Client<a class="anchor" aria-label="anchor" href="#server-vs--client"></a>
</h2>
<p>Bezogen auf ihre Funktion innerhalb eines Computernetzwerks werden
Geräte unterschiedlich bezeichnet:</p>
<ol style="list-style-type: decimal">
<li>Client</li>
</ol>
<p>Klassisches Endgerät wie PC, Notebook oder Smartphone. Hat keine
zentralen Aufgaben. Ist ein Client-Gerät ausgefallen, ist das Netzwerk
nicht betroffen.</p>
<ol start="2" style="list-style-type: decimal">
<li>Server</li>
</ol>
<p>Übernimmt als Kommunikationsknotenpunkt zentrale Aufgaben im
Netzwerk. Je nach Leistungsbedarf werden spezialisierte
Hochleistungshardware, normale PCs oder SoCs genutzt. Fällt ein Server
aus, fehlt damit i.d.R. eine zentrale Funktion im Netzwerk. Je nachdem
welche Aufgaben der Server hat, kann dies zum vollständigen versagen des
Netzwerks führen oder nur zum Ausfall eines Dienstes (z.B. einer
Website).</p>
</div>
<div class="section level2">
<h2 id="software">Software<a class="anchor" aria-label="anchor" href="#software"></a>
</h2>
<p>Unter Software kann all das verstanden werden, was nicht angefasst
werden kann. Also sämtlicher Programmcode, der auf einem Computer
installiert ist. Dazu gehört sowohl das Betriebssystem, die
Boot-Umgebung (welche das Betriebssystem lädt) aber auch alle anderen
Programme wie Treiber, eine Firewall, ein Office-Programm oder ein
Webserver-Programm.</p>
<p>Möchte man ein bestimmtes IT-Projekt umsetzen und hat die Hardware
besorgt, gilt es auch die richtige Software auszuwählen. Hierbei ist zu
beachten, dass Hard- und Software miteinander kompatibel sein müssen.
Z.B. unterstützt nicht jedes Betriebssystem jede Art von Prozessor
(siehe auch diesen <a href="https://de.wikipedia.org/wiki/Prozessorarchitektur" class="external-link">Wikipedia-Artikel</a>).</p>
<p>Abhängig von den Programmen, die man nutzen möchte, kann das passende
Betriebssystem gewählt werden. Für viele Serveranwendungen, wie die in
diesem Kurs genutzte Software <a href="https://nextcloud.com" class="external-link">Nextcloud</a>, werden Linux-Betriebssysteme
empfohlen. In vielen Fällen werden für die Funktion des Hauptprogramms
weitere Programme benötigt. Das sind häufig ein <a href="https://de.wikipedia.org/wiki/Datenbank#Komponenten_eines_Datenbanksystems" class="external-link">Datenbankmanagementsystem</a>
wie Mysql oder MariaDB, die Skriptsprache PHP, und ein Webserver wie <a href="https://httpd.apache.org/" class="external-link">Apache2</a>. In dieser Kombination
spricht man auch von einem LAMP-Stack (<strong>L</strong>inux,
<strong>A</strong>pache, <strong>M</strong>ysql/<strong>M</strong>ariaDB
und <strong>P</strong>HP).</p>
<p>Die genauen Anforderungen an die Hard- und Software sind häufig den
Handbüchern der Programme zu entnehmen. Allerdings hängt die richtige
Wahl auch von der Intensivität der Nutzung, persönlichen Vorlieben oder
Vorgaben innerhalb einer Organisation ab.</p>
<div id="system-requirements" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="system-requirements" class="callout-inner">
<h3 class="callout-title">System requirements</h3>
<div class="callout-content">
<p>Szenario: Sie wollen für eine kleine Forschungsgruppe (ca. 10
Personen) eine Datenmanagement-Lösung betreiben und als Serversoftware
<a href="https://nextcloud.com" class="external-link">Nextcloud</a> installieren.</p>
<p>Welche Hardware wählen Sie dafür? Schauen Sie sich dafür die <a href="https://docs.nextcloud.com/server/latest/admin_manual/installation/system_requirements.html" class="external-link">System
requirements</a> von Nextcloud an und wählen Sie aus einer der folgenden
Hardware-Optionen:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://www.raspberrypi.com/products/raspberry-pi-4-model-b/" class="external-link">Raspberry
Pi 4</a> mit 8GB RAM für ca. 100€ und einer externen <a href="https://www.idealo.de/preisvergleich/OffersOfProduct/204400140_-mysafe-advance-3-5-usb-3-0-2tb-i-tec.html" class="external-link">2
TB USB-HDD-Festplatte</a></p></li>
<li><p><a href="https://www.raspberrypi.com/products/raspberry-pi-5/" class="external-link">Raspberry Pi
5</a> mit 8GB RAM für ca. 110€ und einer <a href="https://geizhals.de/crucial-p310-ssd-2tb-ct2000p310ssd2-a3234426.html?hloc=at&amp;hloc=de" class="external-link">2
TB SSD-Festplatte</a></p></li>
<li><p><a href="https://www.hardkernel.com/shop/odroid-h4-ultra/" class="external-link">Odroid
H4 Ultra</a> mit einer <a href="https://geizhals.de/crucial-p310-ssd-2tb-ct2000p310ssd2-a3234426.html?hloc=at&amp;hloc=de" class="external-link">2
TB SSD-Festplatte</a></p></li>
<li><p>Einen Tower Server <a href="https://www.thomas-krenn.com/de/produkte/rack-server/1he-server/intel-single-cpu/1he-intel-single-cpu-ri1104-smxeh-server" class="external-link">Intel
RI1104-SMXEH Serie</a></p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Die genauen Hardwareanforderungen sind (v.a. am Anfang des Projekts
und ohne Vorkenntnisse) schwer abzuschätzen. Geeignete Lösungen können
aber die Nummern 2. und 3. sein. Die Nummer 4 wäre überdimensioniert und
mit der Nummer 1. kommt das System an seine Grenzen. Auch der Raspberry
Pi 5 ist für 10 Personen vermutlich zu schwach. Das hängt aber stark von
der Art und der Intensivität der Nutzung ab.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="installation-des-betriebssystems">Installation des Betriebssystems<a class="anchor" aria-label="anchor" href="#installation-des-betriebssystems"></a>
</h3>
<p>Um ein Betriebssystem neu zu installieren, muss beim Starten des
PCs/Servers (egal ob virtualisiert oder als physisches Gerät) ein
bootbares Medium mit den Installationsdateien angeschlossen und beim
Startvorgang ausgewählt werden.</p>
<p>In diesem Kurs wird mit virtuellen Servern gearbeitet, die mit der
Virtualisierungsplattform <a href="https://proxmox.com/en/" class="external-link">Proxmox</a>
betrieben werden. Beim Start Ihres Servers ist bereits ein
Installationsmedium eingebunden und als Startmedium hinterlegt.</p>
<p>Loggen Sie sich in der <a href="https://pool.dh-center.uni-tuebingen.de/" class="external-link">Proxmox-Webconsole</a>
ein und wählen Sie Ihren Server im rechten Menü aus. Gehen Sie nun im
vertikalen Menü der virtuellen Maschine in den Bereich <em>Console</em>
und klicken Sie im Konsolen-Fenster auf <em>starten</em>. Die virtuelle
Maschine startet und der Ubuntu-Installationsassistent leitet durch die
Installation des Servers.</p>
<div class="section level4">
<h4 id="installationsassistent">Installationsassistent<a class="anchor" aria-label="anchor" href="#installationsassistent"></a>
</h4>
<p>Die meisten Schritte sind selbsterklärend und können für den Einsatz
in diesem Kurs auf dem Standardwert belassen werden. Vorsicht ist aber
bei der Wahl des richtigen Tatstaturlayouts walten zu lassen. Nutzen Sie
am besten die Möglichkeit der Tastaturerkennung.</p>
<figure><img src="../fig/02_Ubuntu_Installation_03.png" alt="Die Abbildung zeigt den Ubuntu-Installationsassistenten: Festlegung des Tastaturlayouts" class="figure mx-auto d-block"><div class="figcaption">Installationsassistent: Festlegung des
Tastaturlayouts</div>
</figure><p>Bei der Erstellung des ersten Benutzerprofils ist auf folgendes zu
achten:</p>
<ul>
<li><p><strong>Name:</strong> Der Name des Benutzers sollte der
natürliche Name der Person sein, die das System verwenden wird.</p></li>
<li><p><strong>Servername (Hostname):</strong> Der Servername, auch
Hostname genannt, ist der eindeutige Name des Servers im Netzwerk. Er
sollte nur aus Kleinbuchstaben bestehen und keine Leerzeichen enthalten.
Der Hostname dient zur Identifikation des Servers und sollte sinnvoll
gewählt werden, um Verwechslungen zu vermeiden.</p></li>
<li><p><strong>Benutzername:</strong> Der Benutzername sollte ebenfalls
nur aus Kleinbuchstaben bestehen und keine Leerzeichen enthalten. Dies
stellt sicher, dass der Benutzername in allen Systemkomponenten korrekt
erkannt und verarbeitet wird.</p></li>
<li><p><strong>Passwort:</strong> Im Produktivbetrieb sollte das
Passwort mindestens 20 Zeichen lang sein. Ein starkes Passwort erhöht
die Sicherheit des Systems und schützt vor unbefugtem Zugriff. Es wird
empfohlen, eine Kombination aus Groß- und Kleinbuchstaben, Zahlen und
Sonderzeichen zu verwenden.</p></li>
</ul>
<figure><img src="../fig/02_Ubuntu_Installation_07.png" alt="Die Abbildung zeigt den Ubuntu-Installationsassistenten: Erstellung der Anmeldeinformationen" class="figure mx-auto d-block"><div class="figcaption">Installationsassistent: Profil erstellen</div>
</figure><p>Wählen Sie außerdem die Option, den SSH-Server (Secure Shell) zu
installieren. Der SSH-Server ermöglicht einen sicheren Fernzugriff zu
Ihrem Server, um ihn zu Administrieren. Mehr dazu folgt in den nächsten
Sitzungen.</p>
<figure><img src="../fig/02_Ubuntu_Installation_08.png" alt="Die Abbildung zeigt den Ubuntu-Installationsassistenten: Installation des SSH-Servers" class="figure mx-auto d-block"><div class="figcaption">Installationsassistent: SSH-Server
installieren</div>
</figure><p>Achten Sie darauf, dass Sie keine Snap-Pakete installieren.
Snap-Pakete sind speziell verpackte Programme von Ubuntu, die einfach zu
installieren sind und in einer isolierten Umgebung ausgeführt werden.
Allerdings bieten Snap-Pakete aufgrund ihrer isolierten Umgebung nicht
immer die beste Leistung und sind weniger flexibel als traditionelle
Paketverwaltungsmethoden wie apt. Für eine Serverumgebung, in der
Leistung und Flexibilität wichtig sind, ist es daher empfehlenswert, auf
Snap-Pakete zu verzichten.</p>
<figure><img src="../fig/02_Ubuntu_Installation_09.png" alt="Die Abbildung zeigt den Ubuntu-Installationsassistenten: Auswahl von snap-Paketen" class="figure mx-auto d-block"><div class="figcaption">Installationsassistent: Keine snap-Pakete
auswählen</div>
</figure><p>Nachdem die Installation abgeschlossen ist, starten Sie den Server
neu, um sicherzustellen, dass alle Änderungen übernommen wurden.
Anschließend können Sie sich mit den während der Installation erstellten
Anmeldeinformationen anmelden.</p>
<figure><img src="../fig/02_Ubuntu_Installation_10.png" alt="Die Abbildung zeigt den Ubuntu-Installationsassistenten: Abschluss der Installation und Neustart" class="figure mx-auto d-block"><div class="figcaption">Installationsassistent: Neustart nach Abschluss
der Installation</div>
</figure>
</div>
</div>
<div class="section level3">
<h3 id="linux-grundlagen">Linux Grundlagen<a class="anchor" aria-label="anchor" href="#linux-grundlagen"></a>
</h3>
<div class="section level4">
<h4 id="dateisystem">Dateisystem<a class="anchor" aria-label="anchor" href="#dateisystem"></a>
</h4>
<p>Das Linux-Dateisystem ist für alle Linux-Distributionen weitestgehend
einheitlich. Die oberste Hierarchie-Ebene ist dabei immer das
Verzeichnis <code>/</code> (Slash). Dieses ist vergleichbar mit der
obersten Hierarchieebene unter Windows, welche in der Regel dem
“C:”-Laufwerk entspricht.</p>
<p>Weitere wichtige Verzeichnisse sind:</p>
<ul>
<li>die Benutzerverzeichnisse unter
<code>/home/&lt;username&gt;/</code>, z.B.
<code>/home/linus/</code>
</li>
</ul>
<p>Hier liegen die Dateien, Dokumente und Konfigurationen der User.
Schreib- und Leserechte haben nur die jeweiligen User und Personen mit
administrativen Rechten. Die Verzeichnisse sind mit dem
Benutzerverzeichnis unter Windows (in der Regel unter
<code>C:\Users\&lt;username&gt;\</code> zu finden) vergleichbar.</p>
<ul>
<li>Die Systemverzeichnisse (z.B. <code>/etc/</code>,
<code>/var/</code>, <code>/mnt/</code>, <code>/lib/</code>,
<code>/bin/</code>, <code>/sys/</code>)</li>
</ul>
<p>Diese Verzeichnisse beinhalten Systemdaten, z.B. Programme,
Programmbibliotheken, temporäre Dateien, Log-Dateien oder systemweite
Konfigurationen. Deshalb haben in diesen Verzeichnissen i.d.R. nur
Personen mit administrativen Rechten Schreibrechte.</p>
<p>Im Vergleich mit dem Dateisystem von Windows fällt auf, dass es unter
Linux nur einen Verzeichnisbaum für alle Dateien, Festplatten und
Laufwerke gibt. Auch zusätzliche Festplatten oder externe Datenträger
werden in Linux-Systemen zunächst durch eine Gerätedatei im Verzeichnis
<code>/dev/</code> identifiziert und können dann über sogenannte
Einhängepunkte oder Mountpoints an einer beliebigen Stelle des
Verzeichnisbaumes verfügbar gemacht werden (“eingehängt” oder
“gemountet” werden). Unter Windows haben zusätzliche Datenträger und
Laufwerke stets ihre eigene unabhängige Verzeichnishierarchie, was die
Verwaltung von Festplatten weniger flexibel macht.</p>
<figure><img src="../fig/02_Filesystem.png" alt="Die Abbildung zeigt nebeneinander drei Verzeichnisbäume. Je einen für die Betriebssystem Linux, Mac und Windows. Dabei wird insbesondere die unterschiedliche Art der Einhängung von zusätzlichen Datenträgern wie Festplatten oder USB-Sticks hervorgehoben." class="figure mx-auto d-block"><div class="figcaption">Vergleich der Dateisysteme von Linux, Mac und
Windows (Quelle: <a href="https://itoss.org/faq/filesystem-hierarchy-standard/" class="external-link uri">https://itoss.org/faq/filesystem-hierarchy-standard/</a>)</div>
</figure><ul>
<li>Systemweite Konfigurationen in <code>/etc/</code>
</li>
</ul>
<p>Das Verzeichnis <code>/etc/</code> enthält zahlreiche
Konfigurationsdateien für die systemweite Verwaltung von Programmen.
Viele Programme haben hier eigene Unterordner (z.B.
<code>/etc/apache2</code> für die Konfiguration des Apache-Webservers).
Möchte man die Konfiguration eines Programms systemweit ändern, ist das
<code>/etc/</code> Verzeichnis i.d.R. ein guter Startpunkt.
Schreibrechte haben hier nur Personen mit administrativen Rechten.</p>
<ul>
<li>
<p>Programmverzeichnnisse: <code>/bin/</code>, <code>/sbin/</code>,
<code>/usr/bin/</code> <code>/usr/sbin/</code></p>
<ul>
<li><p><code>/bin/</code>: Essentielle Systemprogramme (Start, Restore,
Basisprogramm des Betriebssystems)</p></li>
<li><p><code>/usr/bin/</code>: ergänzende Systemprogramme</p></li>
<li><p><code>/sbin/</code> und <code>/usr/sbin/</code>: Systemprogramme
für die Systemadministration, die i.d.R. nur von Personen mit
administrativen Rechten nutzbar sind</p></li>
</ul>
</li>
<li><p>Dynamische Programmdateien: <code>/var/</code></p></li>
</ul>
<p>Das Betriebssystem und darauf installierte Software erzeugt ständig
neue Dateien, z.B. werden in Log-Dateien Systemereignisse protokolliert.
Solche dynamischen Inhalte werden i.d.R. im
<code>/var/</code>-Verzeichnis gespeichert (v.a. im Unterverzeichnis
<code>/var/log</code>).</p>
<ul>
<li>Einhängepunkte <code>/mnt/</code> und <code>/media/</code>
</li>
</ul>
<p>Externe Laufwerke und Wechselmedien werden standardmäßig in den
Verzeichnisse <code>/mnt/</code> und <code>/media/</code> eingebunden.
Dies ist allerdings keine zwingende Vorgabe und häufig gibt es gute
Gründe eine Festplatte an einer anderen Stelle des Verzeichnisbaumes
einzuhängen, z.B. im Home-Verzeichnis eines Users.</p>
<ul>
<li>Temporäre Dateien: <code>/tmp/</code>
</li>
</ul>
<p>Das Verzeichnis <code>/tmp/</code> dient der Speicherung von
temporären Dateien. Viele Anwendungen und Systemprozesse nutzen es, um
ihre Arbeit auszuführen. Die Dateien in <code>/tmp/</code> werden in der
Regel automatisch gelöscht, wenn der Rechner neu gestartet wird oder
wenn sie nicht mehr benötigt werden.</p>
<ul>
<li>Prozesse und Hardware: <code>/proc/</code> und
<code>/sys/</code>
</li>
</ul>
<p>Das Verzeichnis <code>/proc/</code> enthält Informationen über
laufende Prozesse und Systemhardware. Viele Systemtools lesen
Informationen aus <code>/proc/</code>, um die Systemleistung zu
überwachen. Das Verzeichnis <code>/sys/</code> enthält Informationen
über Systemhardware und Gerätetreiber. Systemtools und Anwendungen
nutzen <code>/sys/</code>, um Informationen über die Systemhardware zu
erhalten und die Hardware-Konfiguration zu ändern. Mit dem Befehl
<code>cat /proc/cpuinfo</code> erhält man z.B. Informationen zum
verbauten Prozessor oder mit <code>cat /sys/power/state</code>
Informationen zu den unterstützten Standby- und Power-Modi des
Systems.</p>
<ul>
<li>Weitere Quellen</li>
</ul>
<p>Mehr zur Verzeichnisstruktur von Linux findet sich z.B. bei <a href="https://wiki.ubuntuusers.de/Verzeichnisstruktur/" class="external-link">Ubuntuusers</a>
oder bei der Tuxacademy im Handbuch zur <a href="https://www.tuxcademy.org/product/lxes/" class="external-link">Linux-Essentials-Zertifizierung</a>
auf den Seiten 146-154.</p>
</div>
<div class="section level4">
<h4 id="softwareverwaltung">Softwareverwaltung<a class="anchor" aria-label="anchor" href="#softwareverwaltung"></a>
</h4>
<p>Programme (oder auch Pakete, Packages, Software oder Apps) werden in
Linux i.d.R. durch eine zentrale Paketverwaltung ähnlich einem App-Store
auf dem Smartphone installiert. Da auch Android auf dem Linux-Kernel
aufbaut, sind die Prozesse zur Softwareverwaltung in Ubuntu vergleichbar
mit den Prozessen, die im Hintergrund ablaufen, wenn man auf dem
Smartphone eine App installiert oder aktualisiert.</p>
<p><strong>- Paketquellen</strong></p>
<p>Zur Installation verfügbare Software wird unter Linux in
Paketrepositorien (oder auch Paketkatalog oder Paketquelle) aufgelistet
und verfügbar gemacht. Ein Repositorium wird i.d.R. vom Hersteller des
Betriebssystems zur Verfügung gestellt und ähnelt in der Funktion dem
Google-Play-Store auf einem Android-Smartphone.</p>
<p>Die in den Repositorien des OS-Herstellers beinhaltete Software ist
kompatibel mit dem Betriebssystem und, je nach konkretem “Unterkatalog”,
auch getestet. Allerdings handelt es sich nicht immer um die neueste
Version eines Programms. Denn neue Versionen werden aufgrund der Tests
und Abhängigkeiten zu anderer Software erst zeitverzögert in die
Kataloge aufgenommen.</p>
<p>Mehr Informationen zur Funktionalität der Paketquellen findet sich
bei <a href="https://wiki.ubuntuusers.de/Paketquellen/" class="external-link">Ubuntuusers</a>.</p>
<p>Bevor Software Software installiert werden kann, muss das
Betriebssystem die aktuelle Version des Katalogs herunterladen. Dies
erfolgt auf der Kommandozeile mit dem Befehl
<code>sudo apt-get update</code> oder <code>sudo apt update</code>.
Möchte man anschließend ein Programm installieren, muss der Name des
entsprechenden Pakets bekannt sein. Die Installation erfolgt mit
<code>sudo apt-get install &lt;Paketname&gt;</code>.</p>
<p>Der Vorteil der zentralen Paketverwaltung ist, dass in den
Repositorien stets festgehalten ist, welche Version eines Programms die
aktuelle ist. Durch den Abgleich der Versionen aller installierter
Programme mit dem Repositorium kann die Paketverwaltung schnell
ermitteln, für welche Programme es Aktualisierungen gibt. Um diese zu
installieren, muss der Befehl <code>sudo apt-get upgrade</code>
ausgeführt werden.</p>
<p><strong>- Fremdquellen</strong></p>
<p>Ist in den Paketquellen des OS-Herstellers nicht die nötige Software
enthalten, können auch Fremdquellen zum System hinzugefügt werden.
Hierbei handelt es sich um Paketkataloge, die nicht vom OS-Hersteller
(oder der Community) überprüft wurden. Deshalb besteht hier stets die
Gefahr, dass die enthaltende Software das System beschädigt oder es sich
um Schadsoftware handelt. Es gibt jedoch immer wieder Fälle, bei welchen
solche Fremdquellen nötig sind. Wie diese dem System hinzugefügt werden
können, ist z.B. <a href="https://linuxize.com/post/how-to-add-apt-repository-in-ubuntu/" class="external-link">hier</a>
geschildert.</p>
<p><strong>- Weitere Befehle wichtige Befehle für die
Paketverwaltung</strong></p>
<ul>
<li><p><code>sudo apt-get autoremove</code>: entfernt Abhängigkeiten von
Programmen, die selbst nicht mehr installiert sind. Dadurch wird das
System aufgeräumt.</p></li>
<li><p><code>sudo apt list --upgradeable</code>: zeigt installierte
Programme an, für welche Aktualisierungen verfügbar sind</p></li>
<li><p><code>sudo apt-get remove &lt;Paketname&gt;</code>: entfernt ein
Paket, nicht jedoch dessen Konfigurationsdateien</p></li>
<li><p><code>sudo apt-get purge &lt;Paketname&gt;</code>: entfernt ein
Paket inkl. dessen Konfigurationsdateien</p></li>
</ul>
<p><strong>- Stolpersteine bei der Paketverwaltung</strong></p>
<ul>
<li><p>Abhängigkeitsprobleme: v.a. bei der manuellen Installation von
Paketen oder der Nutzung von Fremdquellen besteht die Möglichkeit, dass
ein Programm ein anderes Programm als Abhängigkeit benötigt. Diese
Abhängigkeit ist aber nicht in den Paketquellen enthalten. Dadurch kommt
es zu einem nicht automatisch auflösbaren Abhängigkeitsproblem. Mögliche
Maßnahmen sind die manuelle Installation der Abhängigkeiten (die aber
weitere Abhängigkeiten haben können) oder der Downgrade auf eine
kompatible Version.</p></li>
<li><p>Paketname: häufig sind die Paketnamen für ein Programm nicht
eindeutig. Um den genauen Namen für die Installation zu finden, können
die Programmkataloge durchsucht werden:
<code>sudo apt-cache search &lt;Suchbegriff&gt;</code>. Alternativ kann
natürlich auch im Internet nach dem genauen Namen eines Pakets gesucht
werden.</p></li>
</ul>
<div id="webserver" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="webserver" class="callout-inner">
<h3 class="callout-title">Webserver</h3>
<div class="callout-content">
<p>Sie möchten auf Ihrem Linux-Server eine Website betreiben. Dazu
wollen Sie den Webserver <em>Apache</em> installieren. Wie gehen Sie
vor?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Der erste Schritt bei der Softwareverwaltung sollte immer die
Aktualisierung der Paketquellen sein:
<code>sudo apt-get update</code>.</p>
<p>Anschließend wird das System auf den aktuellen Stand gebracht:
<code>sudo apt-get upgrade</code>.</p>
<p>Nun müssen Sie herausfinden, wie das Paket, das den Apache-Webserver
für Ubuntu liefert, heißt. Das können Sie mit einer Internetrecherche
oder dem Befehl <code>sudo apt-cache search apache</code> tun.</p>
<p>Wenn Sie wissen, wie das Paket lautet, können Sie dieses mit dem
Befehl <code>sudo apt-get install &lt;Paketname&gt;</code>
installieren.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="kommandozeile">Kommandozeile<a class="anchor" aria-label="anchor" href="#kommandozeile"></a>
</h4>
<ul>
<li>
<p>Grundlegende Bedienung:</p>
<ul>
<li><p><em>ENTER-Taste</em> nach Eingabe eines Befehls wird dieser mit
der ENTER-Taste ausgeführt</p></li>
<li><p><em>Pfeiltasten</em> hoch/runter: durch bisherige Befehle
blättern und diese wieder aufrufen</p></li>
<li><p><em>Tab-Taste:</em> Autovervollständigung von Pfaden und
Befehlen. Erste Buchstaben eines Pfades tippen, dann TAB-Taste für die
Autovervollständigung oder anzeigen von Optionen.</p></li>
<li><p><em>STRG + C</em>: bricht den laufenden Befehl ab</p></li>
<li><p>Kopieren: mit dem Cursor Text auswählen, dann <em>STRG + Umschalt
+ C</em></p></li>
<li><p>Einfügen: <em>STRG + Umschalt + V</em></p></li>
<li><p>Cursor-Position: mit Pfeiltasten ändern, geht nicht per
Mausklick</p></li>
</ul>
</li>
<li>
<p>Mit der Kommandozeile im Dateisystem navigieren:</p>
<ul>
<li><p>Verzeichnis wechseln: <code>cd &lt;Pfadangabe&gt;</code>, z.B.
<code>cd /home/david/Dokumente</code></p></li>
<li><p>in das eigene Home-Verzeichnis wechseln: <code>cd</code></p></li>
<li><p>Eine Ordnerebene nach oben gehen: <code>cd ..</code></p></li>
<li><p>Zwei Ordnerebenen nach oben gehen: <code>cd ../..</code></p></li>
<li><p>Aktuelle Position im Dateisystem anzeigen:
<code>pwd</code></p></li>
<li><p>Verzeichnisinhalt anzeigen lassen: <code>ls</code> oder mit mehr
Informationen <code>ls -l</code></p></li>
</ul>
</li>
<li>
<p>Dateioperationen:</p>
<ul>
<li><p>Datei erstellen:
<code>touch &lt;Dateipfad&gt;/&lt;Dateiname&gt;</code></p></li>
<li><p>Verzeichnis anlegen:
<code>mkdir &lt;Dateipfad&gt;/&lt;Neuer-Ordner&gt;</code></p></li>
<li><p>Inhalt einer Textdatei ausgeben:
<code>cat &lt;Dateiname&gt;</code></p></li>
<li><p>Oberste oder letzte 10 Zeilen einer Datei anzeigen lassen:
<code>head &lt;Dateiname&gt;</code> oder
<code>tail &lt;Dateiname&gt;</code></p></li>
<li>
<p>Datei kopieren/verschieben/löschen:</p>
<ul>
<li><p>Copy:
<code>cp &lt;Quelldatei&gt; &lt;Zieldatei&gt;</code></p></li>
<li><p>Move:
<code>mv &lt;Quelldatei&gt; &lt;Zeildatei&gt;</code></p></li>
<li><p>remove: <code>rm &lt;Dateiname&gt;</code> oder remove recursive:
<code>rm -r &lt;Verzeichnispfad&gt;</code></p></li>
</ul>
</li>
</ul>
</li>
<li><p>Textdateien bearbeiten: Nano-Editor:</p></li>
</ul>
<p>Es gibt viele Texteditoren für Linux. Weit verbreitet sind z.B.
<strong>nano</strong> und <strong>vim</strong>, wobei nano der
einsteigerfreundlichere Editor ist. Deshalb arbeiten wir im Kurs mit dem
nano-Editor. Wer dennoch mit dem Vim-Editor arbeiten möchte, kann sich
z.B. <a href="https://www.youtube.com/playlist?list=PLT98CRl2KxKHy4A5N70jMRYAROzzC2a6x" class="external-link">dieses
Tutorial</a> anschauen</p>
<ul>
<li><p>Datei im Nano-Editor öffnen:
<code>nano &lt;Dateipfad&gt;/&lt;Dateiname&gt;</code></p></li>
<li><p>Die Navigation erfolgt ohne Maus, nur mit den
Pfeiltasten!</p></li>
<li><p>Datei schließen und speichern: <em>STRG + X</em>, dann
<em>J</em>, dann <em>ENTER</em></p></li>
<li><p>Schließen ohne zu speichern: <em>STRG + X</em>, dann
<em>N</em></p></li>
<li><p>Komplette Zeile löschen: <em>STRG + K</em></p></li>
<li><p>Kopieren und einfügen erfolgt wie auf dem Terminal</p></li>
<li><p>Text suchen: <em>STRG + W</em>, dann Suchbegriff eingeben oder
für weitere Treffer direkt mit <em>ENTER</em> bestätigen</p></li>
<li><p>Zu bestimmter Zeile springen: <em>STRG + /</em>, dann
Zeilennummer eingeben</p></li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Hauptpunkte</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Die Wahl der richtigen Hard- und Software erfolgt ganz am Anfang und
muss auf den Einsatzzweck abgestimmt sein und untereinander komptibel
sein.</li>
<li>In diesem Kurs wird auf einem virtuellen Server mit
Linux-Betriebssystem die Cloud-Software <a href="https://nextcloud.com" class="external-link">Nextcloud</a> als Docker-Container
installiert.</li>
<li>Das Dateisystem unter Linux hat nur einen Verzeichnisbaum, unter
welchem alle Festplatten eingebunden sind</li>
<li>Software wird unter Linux in einer zentralen Paketverwaltung
organisiert</li>
<li>Linux-Server-Systeme werden mit der Kommandozeile verwaltet</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div>
</div>
</div></section><section id="aio-03-remote-access"><p>Content from <a href="03-remote-access.html">Remote Access: das SSH-Protokoll.rmd</a></p>
<hr>
<p>Zuletzt aktualisiert am 2025-10-21 |

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/episodes/03-remote-access.Rmd" class="external-link">Diese Seite bearbeiten <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Geschätzte Zeit: <i aria-hidden="true" data-feather="clock"></i> 90 Minuten</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Alle Lösungen anzeigen " data-collapse="Alle Lösungen ausblenden "> Alle Lösungen anzeigen <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Übersicht</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Fragen</h3>
<ul>
<li><p>Wie kann ein Computer (ggf. aus der Ferne) verwaltet werden, auch
wenn er keinen Bildschirm hat?</p></li>
<li><p>Wie kann eine SSH-Verbindung sicher über unsichere Netzwerke
hergestellt werden?</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Ziele</h3>
<ul>
<li><p>Grundlagen des SSH-Protokolls verstehen</p></li>
<li><p>SSH-Server sicher konfigurieren</p></li>
<li><p>Sichere SSH-Verbindungen mit Schlüssel-Authentifikation
aufbauen</p></li>
<li><p>den Raspberry Pi im Headless-Setup aus der Ferne steuern</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="das-ssh-protokoll">Das SSH-Protokoll<a class="anchor" aria-label="anchor" href="#das-ssh-protokoll"></a>
</h2>
<hr class="half-width">
<p>Server stehen häufig an unzugänglichen Orten (Keller, gekühlte
Serverräume, weit entfernte Rechenzentren o.Ä.). Dennoch müssen sie
verwaltet werden. Dies wird heutzutage mittels des SSH-Protokolls
gemacht (früher wurde das inzwischen veraltete Telnet-Protokoll
genutzt).</p>
<p>Das SSH-Protokoll baut eine sichere Verbindung zwischen einem
Clientgerät (z.B. Ihrem Notebook) und einem Server (z.B. Ihrem Raspberry
Pi) über ein (ggf. auch unsicheres) Netzwerk auf. Über diese Verbindung
besteht in der Regel Zugriff auf die Kommandozeile des entfernten
Geräts, womit dieses verwaltet werden kann.</p>
<p>Die Verbindung kann aber auch zum Übertragen anderer Daten genutzt
werden. So können Dateien übertragen werden (mit dem <a href="https://www.ionos.de/digitalguide/server/konfiguration/linux-scp-befehl/" class="external-link"><code>scp</code>-Befehl</a>),
entfernte Dateisysteme lokal genutzt werden (per SSHFS, siehe <a href="https://de.wikipedia.org/wiki/SSHFS" class="external-link">Wikipedia</a>) oder die
graphische Ausgabe eines entfernten Programms lokal dargestellt werden
(<a href="https://www.heise.de/tipps-tricks/SSH-Tunnel-nutzen-so-geht-s-4320041.html" class="external-link">siehe
diesen Heise-Artikel</a>).</p>
<div id="protokoll" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Wichtig</span>
<div id="protokoll" class="callout-inner">
<h3 class="callout-title">Protokoll</h3>
<div class="callout-content">
<p>Bei einem Protokoll handelt es sich um eine Sammlung genau
festgelegter technischer Parameter für den Kommunikationsaustausch
zwischen Computern. Ähnlich der Sprache und ihrer Grammatik, auf die
sich zwei Menschen zum Kommunizieren einigen. Ein Protokoll hat einen
genauen Einsatzzweck und eine klar definierte Funktionsweise. z.B. ist
das HTTPS-Protokoll dafür gemacht, Daten zwischen einem Browser und
einem Webserver verschlüsselt mittels der TLS-Verschlüsselung zu
übertragen. Mehr zum Thema findet sich bei <a href="https://www.studysmarter.de/schule/informatik/theoretische-informatik/netzwerkprotokolle/" class="external-link">StudySmarter</a></p>
</div>
</div>
</div>
<p>Das SSH-Protkoll nutzt mehrere etablierte Verfahren der Kryptographie
und Netzwerkkommunikation zur Gewährleistung der sicheren Übertragung.
Ähnlich einer <a href="https://tiptopsecurity.com/how-does-https-work-rsa-encryption-explained/" class="external-link">HTTPS-Verbindung</a>
werden beim Verbindungsaufbau zunächst die Kommunikationsstandards
zwischen Client und Server ausgehandelt, dann werden
<em>Session-Keys</em> zur Verschlüsselung ausgetauscht, welche jedoch
nur für die aktuelle Verbindung Gültigkeit haben. Mit diesen
Session-Keys wird die eigentliche Verbindung in Form einer symmetrischen
Verschlüsselung aufgebaut (welche deutlich schneller ist, als die zuvor
stattfindende asymmetrische Verschlüsselung, siehe dazu auch die
Ressourcen von Studyflix zur <a href="https://studyflix.de/informatik/symmetrische-verschlusselung-1610" class="external-link">symmetrischen</a>
und <a href="https://studyflix.de/informatik/asymmetrische-verschlusselung-1609" class="external-link">asymmetrischen</a>
Verschlüsselung).</p>
<p>Mehr zur Funktionsweise des SSH-Protkolls können Sie im Netz finden,
z.B. bei <a href="https://www.ip-insider.de/was-ist-secure-shell-ssh-ssh-1-ssh-2-openssh-a-691217/" class="external-link">IP-Insider</a>.</p>
<div id="voraussetzung-für-die-ssh-verbindung" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="voraussetzung-für-die-ssh-verbindung" class="callout-inner">
<h3 class="callout-title">Voraussetzung für die SSH-Verbindung</h3>
<div class="callout-content">
<p>Sie haben wie in <a href="02_betriebssystem-und-linuxgrundlagen.html">Sitzung 2</a>
besprochen auf Ihrem Server Ubuntu installiert. Nun wollen Sie eine
SSH-Verbindung von Ihrem Notebook mit Ihrem Server herstellen. Was sind
die Bedingungen für eine erfolgreiche SSH-Verbindung?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p>Netzwerkverbindung: der Server muss im Netzwerk erreichbar sein.
Dazu müssen entweder Server und Client im selben Netzwerk (z.B.
demselben Heimnetzwerk) sein oder der Server muss im Internet erreichbar
sein.</p></li>
<li><p>Software: Auf dem Server muss die SSH-Server-Software installiert
sein (das <strong>Paket openssh-server</strong>) und auf dem Client ein
SSH-Client-Programm (das OpenSSH-Client-Programm für die Kommandozeile
ist i.d.R. auf allen PCs installiert. Für Windows kann auch das
graphische Programm <a href="https://putty.org/" class="external-link">Putty</a> installiert
werden).</p></li>
<li><p>Berechtigungen: die Anmeldung am entfernten Server ist nur
möglich, wenn Sie die Berechtigungen dazu haben. Sie benötigen also
einen Account unter Ubuntu und dessen Passwort.</p></li>
<li><p>Firewall: eine Firewall am Server oder auf dem Weg dorthin muss
die SSH-Verbindung zulassen</p></li>
<li><p>Identifizierung: der Server muss für eine ordentliche Verbindung
eindeutig identifizierbar sein. Dies geschieht durch sogenannte
Host-Keys, die bei der erstmaligen Verbindung vom Server zum Client
übertragen werden und manuell akzeptiert werden müssen. Ändert sich der
Host-Key (z.B. nach einer Neuinstallation oder weil ein bösartiger
Akteur sich als Ihr Server ausgibt) und passt nicht mehr zum
ursprünglich übertragenen Key, schlägt die Verbindung fehl. Erst wenn
der neue Key akzeptiert wird ist eine Verbindung wieder möglich
(gespeicherte Keys finden Sie in der Datei <em>know_hosts.conf</em> im
Verzeichis <em>.ssh</em> in Ihrem persönlichen Ordner).</p></li>
</ol>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="grundlegender-verbindungsaufbau">Grundlegender Verbindungsaufbau<a class="anchor" aria-label="anchor" href="#grundlegender-verbindungsaufbau"></a>
</h3>
<p>Wenn die Voraussetzungen stimmen (siehe <a href="#voraussetzung-f%C3%BCr-die-ssh-verbindung">Vorraussetzungen für die
SSH-Verbindung</a>), kann eine einfache SSH-Verbindung mit folgendem
Befehl aufgebaut werden: <code>ssh &lt;user&gt;@&lt;server&gt;</code>
Dabei ist <code>&lt;user&gt;</code> der Username am entferten Gerät und
<code>&lt;server&gt;</code> ist die Adresse des Servers. Die Adresse
kann entweder in Form einer IP-Adresse (z.B. 192.168.178.10) oder als
Hostname (z.B. mein-cloudserver) angegeben werden. Die Variante mit dem
Hostnamen funktioniert jedoch nur, wenn dieser im lokalen Netzwerk
bekannt ist (z.B. in einem Heimnetzwerk im Router eingezeigt wird).</p>
<div id="ssh-verbindung" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Wichtig</span>
<div id="ssh-verbindung" class="callout-inner">
<h3 class="callout-title">SSH-Verbindung</h3>
<div class="callout-content">
<ul>
<li>So bauen Sie eine einfache SSH-Verbindung auf:
<strong><code>ssh &lt;user&gt;@&lt;server&gt;</code></strong>
</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="schlüsselauthentifikation">Schlüsselauthentifikation<a class="anchor" aria-label="anchor" href="#schl%C3%BCsselauthentifikation"></a>
</h2>
<hr class="half-width">
<p>Die einfache SSH-Verbindung genügt zwar schon, um das entfernte
System zu verwalten. Allerdings kann eine angreifende Person versuchen,
den Usernamen und das Passwort zu erraten und damit Zugriff auf den
Server erlangen (leider sind Passwörter häufig nicht allzu kreativ
erdacht). Um dies zu verhindern, kann die Verbindung zusätzlich
gesichert werden:</p>
<ul>
<li><p>am Client, indem statt Passwörtern kaum zu erratende
<strong>Schlüsselpaare</strong> zur Anmeldung genutzt werden</p></li>
<li><p>am Server, indem die Einstellungen des SSH-Servers optimiert
werden, z.B. um bei häufigen Fehlanmeldungen Verursacher derselben zu
blockieren</p></li>
</ul>
<p>Die Anmeldung per Schlüssel erfolgt mit einem
<strong>Schlüsselpaar</strong>. Ein solches Schlüsselpaar besteht aus
einem <strong>privaten</strong> und einem <strong>öffentlichen
Schlüssel</strong>. Während der öffentliche Schlüsse herausgegeben
werden kann, muss der private Schlüssel privat bleiben und darf das
<strong>eigene Gerät niemals verlassen</strong>. Vereinfacht kann man
sich das Konzept wie ein Vorhängeschloss und den dazugehörigen Schlüssel
vorstellen. Das Schloss ist in dieser Analogie der öffentliche Schlüssel
und wird in geöffnetem Zustand an den Server übergeben. Dieser
“verschließt” damit die Tür zum SSH-Server. Zwar können alle sehen, dass
Ihr (öffentliches) Schloss an der Tür hängt, aber nur Sie können mit
Ihrem privaten Schlüssel die Tür wieder öffnen.</p>
<p>Aufgrund der komplexen kryptographischen Struktur der Schlüssel sind
diese deutlich schwerer bis gar nicht zu erraten. Zusätzlich empfiehlt
es sich, den privaten Schlüssel mit einer Passphrase vor unbefugtem
Zugriff zu schützen. Dann muss jedes mal, wenn der private Schlüssel
genutzt wird, ein zusätzliches Passwort eingegeben werden.</p>
<div id="schlüsselauthentifikation-1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Wichtig</span>
<div id="schlüsselauthentifikation-1" class="callout-inner">
<h3 class="callout-title">Schlüsselauthentifikation</h3>
<div class="callout-content">
<p>Für eine sichere SSH-Verbindung empfiehlt es sich, auf Passwörter zu
verzichten und sich stattdessen mit einem Schlüsselpaar zu
authentifizieren.</p>
<p>Ist ein Schlüsselpaar erzeugt, erfolgt die Verbindung wie folgt:
<code>ssh &lt;user&gt;@&lt;server&gt; -i &lt;Pfad-zum-privaten-schlüssel&gt;</code>.
Mit dem Befehlsparameter <em>-i</em> wird der Pfad zum privaten
Schlüssel am Client angegeben.</p>
<p>Mehr zur Schlüsselauthenfikation finden Sie z.B. bei <a href="https://www.manageengine.com/key-manager/information-center/what-is-ssh-key-management.html" class="external-link">ManageEngine</a>
(hier v.a. die ersten drei Absätze).</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="schlüsselpaar-erstellen">Schlüsselpaar erstellen<a class="anchor" aria-label="anchor" href="#schl%C3%BCsselpaar-erstellen"></a>
</h3>
<p>Die Erstellung eines Schlüsselpaars erfolgt am Client. Dazu wird auf
der Kommandozeile (“Eingabeaufforderung” unter Windows) folgender Befehl
abgesetzt:
<code>ssh-keygen -t &lt;Schlüsseltyp&gt; -b &lt;Schlüssellänge&gt;</code>
Es müssen Angaben zum Speicherort und der Passphrase gemacht werden.
Wird kein Speicherort angegeben, wird das Schlüsselpaar im Ordner
<code>.ssh</code> des Benutzerverzeichnisses gespeichert.</p>
<p>Es stehen unterschiedliche Schlüsseltypen- und -längen zur
Verfügung:</p>
<ul>
<li><p>RSA: weit verbreitet, kann mit sehr viel Rechenaufwand evtl.
geknackt werden (siehe letzter Absatz <a href="https://www.onlinesicherheit.gv.at/Services/News/RSA-Verschluesselung-Sicherheit.html" class="external-link">dieses
Artikels</a>). Als Schlüssellänge sollte 4096 bit gewählt
werden.</p></li>
<li><p>ecdsa: ist ein neueres Verfahren, das aber kurze Schlüssel nutzt
und damit auf Sicherheit verzichtet</p></li>
<li><p>ed25519: ist ein neues Verfahren, das auf sog. elliptische Kurven
setzt und aktuell als am sichersten gilt. Dieses Verfahren wird
empfohlen.</p></li>
</ul>
<p>Zur Wahl des Schlüsseltyps gibt es bei <a href="https://goteleport.com/blog/comparing-ssh-keys/#rsa-vs-dsa-vs-ecdsa-vs-eddsa" class="external-link">goteleport.com</a>
eine informative Vergleichstabelle.</p>
<div id="wichitg" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Wichtig</span>
<div id="wichitg" class="callout-inner">
<h3 class="callout-title"><strong>WICHITG</strong></h3>
<div class="callout-content">
<p>Das Schlüsselpaar muss <strong>am Client</strong> erstellt werden.
Sonst ist der private Schlüssel bereits mit der Erstellung auf einem
fremden Gerät und damit kompromittiert.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="schlüssel-übertragen">Schlüssel übertragen<a class="anchor" aria-label="anchor" href="#schl%C3%BCssel-%C3%BCbertragen"></a>
</h3>
<p>Ist das Schlüsselpaar erzeugt, muss der <strong>öffentliche</strong>
(und nur der öffentliche!) Schlüssel zum Server übertragen werden (nur
zur Erinnerung: nur der <strong>öffentliche</strong> Schlüssel wird
übertragen). Dies kann je nach Betriebssystem des Clients
unterschiedlich bewerkstelligt werden.</p>
<div class="tabs">
<nav><div id="nav-tab-1" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-1-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-1" type="button" role="tab" aria-controls="nav-tabpanel-1-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-1-1">
  Windows
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-2" type="button" role="tab" aria-controls="nav-tabpanel-1-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-2">
  Mac
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-3" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-3" type="button" role="tab" aria-controls="nav-tabpanel-1-3" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-3">
  Linux
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-1" class="tab-content">
<div id="nav-tabpanel-1-1" class="tab-pane show active" aria-labelledby="nav-tab-1-1" role="tabpanel">
<p>Unter Windows muss das Programm scp genutzt werden, mit welchem über
eine SSH-Verbindung Dateien (in diesem Fall der öffentliche Schlüssel)
übertragen werden können:</p>
<p>Übertragung:
<code>scp &lt;öffentlicher-schlüssel.pub&gt; &lt;username&gt;@&lt;server&gt;:/home/&lt;username&gt;/</code></p>
<p>SSH-Verbindung zum Server aufbauen:
<code>ssh &lt;username&gt;@&lt;server&gt;</code></p>
<p>Verzeichnis erstellen: <code>mkdir .ssh</code></p>
<p>Datei für zugelassenen Schlüssel erstellen:
<code>touch .ssh/authorized_keys</code></p>
<p>Öffentlichen Schlüssel in Datei kopieren:
<code>cat Desktop/&lt;öffentlicher-schlüssel.pub&gt; &gt;&gt; .ssh/authorized_keys</code></p>
<p>Überprüfung: <code>cat .ssh/authorized_keys</code></p>
<p>SSH-Verbindung verlassen: <code>exit</code></p>
<p>SSH-Verbindung mit privatem Schlüssel testen:
<code>ssh &lt;username&gt;@&lt;server&gt; -i .ssh\&lt;privater-schlüssel&gt;</code></p>
</div>
<div id="nav-tabpanel-1-2" class="tab-pane" aria-labelledby="nav-tab-1-2" role="tabpanel">
<p>Mit macOS kann das Programm <em>ssh-copy-id</em> genutzt werden:
<code>ssh-copy-id -i &lt;öffentlicher-schlüssel.pub&gt; &lt;username&gt;@&lt;server&gt;</code></p>
<p>SSH-Verbindung mit privatem Schlüssel testen:
<code>ssh &lt;username&gt;@&lt;server&gt; -i .ssh/&lt;privater-schlüssel&gt;</code></p>
</div>
<div id="nav-tabpanel-1-3" class="tab-pane" aria-labelledby="nav-tab-1-3" role="tabpanel">
<p>Mit Linux kann das Programm <em>ssh-copy-id</em> genutzt werden:
<code>ssh-copy-id -i &lt;öffentlicher-schlüssel.pub&gt; &lt;username&gt;@&lt;server&gt;</code></p>
<p>SSH-Verbindung mit privatem Schlüssel testen:
<code>ssh &lt;username&gt;@&lt;server&gt; -i .ssh/&lt;privater-schlüssel&gt;</code></p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="konfiguration-des-ssh-servers">Konfiguration des SSH-Servers<a class="anchor" aria-label="anchor" href="#konfiguration-des-ssh-servers"></a>
</h2>
<hr class="half-width">
<p>Um die Sicherheit des SSH-Servers weiter zu erhöhen, sollten einige
Einstellungen am Server vorgenommen werden. Dies kann nach erfolgreicher
SSH-Verbindung getan werden. Die Konfigurationsdatei für den SSH-Server
findet sich unter <code>/etc/ssh/sshd_config</code> und kann mit dem
<em>nano</em>-Editor bearbeitet werden.</p>
<p>Folgende Änderungen sollen an der Konfigurationsdatei vorgenommen
werden:</p>
<ul>
<li><p>Nur spezifischen Usern eine SSH-Verbindung erlauben (neue Zeile
am Ende ergänzen): <code>AllowUsers &lt;username&gt;</code></p></li>
<li><p>Anmeldung mit Passwort verbieten und nur per Schlüssel erlauben
(vorhandene Zeilen ändern):</p></li>
</ul>
<pre><code>PasswordAuthentication no
PubkeyAuthentication yes
KbdInteractiveAuthentication no
UsePAM no</code></pre>
<ul>
<li><p>Standardport ändern: <code>#Port 22</code> ändern zu
<code>Port &lt;eine Nummer größer 1024&gt;</code>, siehe dazu auch die
<a href="https://de.wikipedia.org/wiki/Liste_der_Portnummern" class="external-link">Liste der
Well-Know-Ports</a></p></li>
<li><p>Root-User-Anmeldungen verbieten:
<code>PermitRootLogin no</code></p></li>
<li><p>Zeit für erfolgreiche Anmeldeversuche auf 30 Sekunden limitieren:
<code>LoginGraceTime 30</code></p></li>
<li><p>Leere Passwörter verbieten:
<code>PermitEmptyPasswords no</code></p></li>
<li><p>Abmeldung bei Inaktivität: <code>ClientAliveInterval 300</code>
und <code>ClientAliveCountMax 0</code></p></li>
</ul>
<p>Nach Änderungen an der Konfiguration eines Programms muss dieses in
der Regel <strong>neu gestartet</strong> werden, um die neue
Konfiguration zu übernehmen. Dies geschieht für den SSH-Server mit dem
Befehl <code>sudo systemctl restart sshd.service</code> (siehe dazu auch
das <a href="#programme-mit-systemd-steuern">Callout zu systemd</a>)</p>
<p>Weitere Anpassungen des SSH-Servers sind je nach eigenem
Sicherheitsbedürfnis möglich. Z.B. finden sich bei <a href="https://www.cyberciti.biz/tips/linux-unix-bsd-openssh-server-best-practices.html" class="external-link">cyberciti.biz</a>
einige weitere Möglichkeiten.</p>
<p>Möchte man sich nun per SSH anmelden, müssen die vorgenommenen
Änderungen berücksichtigt werden. V.a. muss die geänderte Portnummer
angegeben werden:
<code>ssh -p &lt;Portnummer&gt; -i &lt;Pfad-zum-privaten-Schlüssel&gt; &lt;user&gt;@&lt;server&gt;</code></p>
<div id="programme-mit-systemd-steuern" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Wichtig</span>
<div id="programme-mit-systemd-steuern" class="callout-inner">
<h3 class="callout-title">Programme mit systemd Steuern</h3>
<div class="callout-content">
<p>Programme können unter Debian-basierten Systemen mit dem
Systemd-Dienst gesteuert werden. Voraussetzung dafür ist, dass eine sog.
Unit-Datei vorhanden ist (i.d.R. unter <code>/etc/systemd/system</code>
zu finden). Damit können die Programmge gestartet, gestoppt,
neugestartet und deren Status geprüft werden. Der Systemd-Dienst wird
mit dem Befehl <code>systemctl</code> (kurz für systemcontrol)
bedient:</p>
<ul>
<li><p>Programm starten:
<code>sudo systemctl start &lt;Servicename&gt;</code></p></li>
<li><p>Programm stoppen:
<code>sudo systemctl stop &lt;Servicename&gt;</code></p></li>
<li><p>Programm neustarten
<code>sudo systemctl restart &lt;Servicename&gt;</code></p></li>
<li><p>Status überprüfen:
<code>sudo systemctl status &lt;Servicename&gt;</code></p></li>
<li><p>Ein Programm zum Autostart hinzufügen:
<code>sudo systemctl daemon-reload &amp;&amp; sudo systemctl enable &lt;Servicename&gt;</code></p></li>
</ul>
</div>
</div>
</div>
<div id="fehlerhafte-ssh-anmeldung" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="fehlerhafte-ssh-anmeldung" class="callout-inner">
<h3 class="callout-title">Fehlerhafte SSH-Anmeldung</h3>
<div class="callout-content">
<p>Sie wollen sich per SSH mit Ihrem Server verbinden. Sie nutzen dafür
den folgenden Befehl:
<code>ssh linus@eberhard-karl.uni-tuebingen.de -p 2746 -i .ssh\eberhard.key</code></p>
<p>Die Verbindung schlägt aber mit der Meldung <em>Permission denied
(publickey)</em> fehl. Worauf weißt diese Fehlermeldung hin?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Der SSH-Server erfordert ein Schlüsselpaar für die Anmeldung. Zwar
wurde der private Schlüssel <em>eberhard.key</em> angegeben. Allerdings
wurde er nicht akzeptiert. Dies kann daran liegen, dass auf dem Server
der dazugehörige öffentliche Schlüssel nicht hinterlegt ist oder nicht
im Account des angegebenen Users (<em>linus</em>) in der Datei
authorized_keys gespeichert ist.</p>
<p>Weitere Gründe können sein:</p>
<p>Falsche URL/IP-Adresse: die Anmeldung wird deshalb an einem
fremden/falschen Server versucht.</p>
<p>Der User <em>linus</em> existiert nicht auf dem Server</p>
<p>Tip: mit Angabe des Parameters -v erhält man beim Verbingungsversuch
mehr Informationen im Falle eine fehlschlags.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Hauptpunkte</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li><p>das SSH-Protokoll erlaubt den Zugriff auf die Kommandozeile
entfernter Computer</p></li>
<li><p>zur Erhöhung der Sicherheit empfiehlt sich die Nutzung eines
Schlüsselpaares anstatt eines Passworts</p></li>
<li><p>zur Reduzierung der Angriffsfläche sollte die Konfiguration des
SSH-Servers angepasst werden</p></li>
<li><p>ein privater (SSH-)Schlüssel darf niemals das eigene Gerät
verlassen</p></li>
<li><p>der Aufbau der SSH-Verbindung geschieht wie folgt:
<code>ssh -p &lt;Portnummer&gt; -i &lt;Pfad-zum-privaten-Schlüssel&gt; &lt;user&gt;@&lt;server&gt;</code></p></li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-04-sicherheit-1-benutzer-dateien"><p>Content from <a href="04-sicherheit-1-benutzer-dateien.html">Sicherheit 1: Benutzer und Dateirechte</a></p>
<hr>
<p>Zuletzt aktualisiert am 2025-10-21 |

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/episodes/04-sicherheit-1-benutzer-dateien.Rmd" class="external-link">Diese Seite bearbeiten <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Geschätzte Zeit: <i aria-hidden="true" data-feather="clock"></i> 135 Minuten</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Alle Lösungen anzeigen " data-collapse="Alle Lösungen ausblenden "> Alle Lösungen anzeigen <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Übersicht</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Fragen</h3>
<ul>
<li><p>Wer darf was auf meinem System?</p></li>
<li><p>Welche Benutzer gibt es unter Linux?</p></li>
<li><p>Was sind Dateirechte?</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Ziele</h3>
<ul>
<li><p>Grundlagen der Benutzerverwaltung unter Linux</p></li>
<li><p>Dateirechte verstehen und anpassen</p></li>
<li><p>Befehle <code>chmod</code>, <code>chown</code>,
<code>adduser</code>, <code>deluser</code> und <code>usermod</code>
kennen lernen</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="benutzerverwaltung">Benutzerverwaltung<a class="anchor" aria-label="anchor" href="#benutzerverwaltung"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="benutzerkategorien">Benutzerkategorien<a class="anchor" aria-label="anchor" href="#benutzerkategorien"></a>
</h3>
<p>Jeder User-Account in Linux besteht aus einem Loginnamen, einer
User-ID, ggf. einem beschreibendem Namen und weiteren Metainformationen
(z.B. Adresse, Telefonnummer etc). Auf einem üblichen Linux-System gibt
es drei Typen von Benutzerkonten:</p>
<ol style="list-style-type: decimal">
<li><p><strong>root</strong>: der Root-Account ist der
Systemadministrator und hat damit die meisten Rechte im System. Er ist
vergleichbar mit dem “Administrator”-Konto in Windows. Die User-ID des
root-Accounts ist immer die 0.</p></li>
<li><p><strong>Standardaccount</strong>: bei der Installation des
Betriebssystems (Ubuntu) wurde bereits ein erster Standardaccount
erstellt. Standardaccounts sind i.d.R. mit echten Personen in Verbindung
zu bringen, haben ein Benutzerverzeichnis unter <code>/home/</code> und
können sich mit einem Passwort am System anmelden. Der erste
Standardbenutzer erhält die User-ID 1000. Für alle weiteren wird die ID
jeweils um 1 erhöht. Ein Standardaccount kann administrative Rechte
erhalten. Wurden ihm diese erteilt, können mit dem <a href="#sudo"><code>sudo</code>-Befehl</a> die eigenen Rechte eskaliert
werden, d.h. Befehle mit administrativen Rechten ausgeführt
werden.</p></li>
<li><p><strong>Systemaccount</strong>: Auf einem frisch installierten
Linuxsystem gibt es bereits zahlreiche Systemaccounts. Sie haben i.d.R.
User-IDs <code>&lt;</code> 1000. Systemuser sind nicht mit echten
Personen zu verbinden und können sich nicht interaktiv am System
anmelden. Ein Systemaccount ist im Normalfall für eine explizite Aufgabe
vorhanden. Z.B. ist der Account <em>www-data</em> für die Steuerung
eines Webservers gedacht.</p></li>
</ol>
<p>Sämtliche Benutzeraccounts des Systems können der Datei
<code>/etc/passwd</code> entnommen werden (z.B. öffnen mit
<code>less /etc/passwd</code>).</p>
<p>Möchte man einen neuen Account erstellen, nutzt man den Befehl
<code>adduser</code>. Um z.B. den Account “Linus” hinzuzufügen lautet
der Befehl wie folgt: <code>sudo adduser linus</code> Anschließend kann
das Passwort sowie weitere Metainformationen des Accounts gesetzt
werden. Es wird automatisch ein Homeverzeichnis für den User erstellt.
Möchte man dies nicht, kann der Parameter <code>--no-create-home</code>
dem Befehl angehängt werden.</p>
</div>
<div class="section level3">
<h3 id="gruppen">Gruppen<a class="anchor" aria-label="anchor" href="#gruppen"></a>
</h3>
<p>Neben einzelnen Accounts gibt es auch Gruppen, um mehrere Accounts
zusammen zu fassen. Standardmäßig ist jeder Account (System- und
Standardaccounts) auch Mitglied in seiner eigenen Gruppe. So ist z.B.
der Systemaccount <em>www-data</em> auch Mitglied in der Gruppe
<em>www-data</em>. Ein Account hat dabei immer die Rechte, die ihm
selbst erteilt wurden plus die Rechte, die den Gruppen erteilt wurden,
in welchen er Mitglied ist. Wird ein Recht an einer Stelle verweigert,
so hat dies Vorrang vor einer Erlaubnis an anderer Stelle.</p>
<p>Um zu sehen in welchen Gruppen man Mitglied ist, kann der Befehl
<code>id</code> genutzt werden. Der bei der Installation des
Betriebssystems erstellte Standardbenutzer ist bereits in mehreren
Gruppen Mitglied (z.B. der sudo-Gruppe um sudo-Befehle ausführen zu
können). Um alle Gruppen und deren Mitglieder zu sehen kann die Datei
<code>/etc/groups</code> geöffnet werden.</p>
<p>Möchte man einen Account einer Account-Gruppe hinzufügen, nutzt man
den <code>usermod</code>-Befehl (kurz für user modification):
<code>sudo usermod -aG &lt;Gruppenname&gt; &lt;Username&gt;</code>
Möchte man einem Account administrative Rechte erteilen, muss dieser der
<em>sudo</em>-Gruppe hinzugefügt werden:
<code>sudo usermod -aG sudo &lt;Username&gt;</code></p>
</div>
<div class="section level3">
<h3 id="sudo">sudo<a class="anchor" aria-label="anchor" href="#sudo"></a>
</h3>
<p>Mit dem <code>sudo</code>-Befehl können die eigenen Benutzerrechte
eskaliert werden. Das heißt, Befehle mit erhöhten, also administrativen,
Rechten ausgeführt werden. Dazu muss lediglich das
<code>sudo</code>-Kommando vor den Befehl gestellt werden. Um z.B. einen
neuen Account zu erstellen, muss vor den entsprechenden Befehl das
<em>sudo</em> gestellt werden:
<code>sudo adduser &lt;username&gt;</code></p>
<div id="der-sudo-befehl" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Wichtig</span>
<div id="der-sudo-befehl" class="callout-inner">
<h3 class="callout-title">Der <code>sudo</code>-Befehl</h3>
<div class="callout-content">
<p>Um Befehle mit erhöhten Rechten auszuführen muss das
<code>sudo</code>-Kommando vor den Befehl gestellt werden, z.B.
<code>sudo adduser &lt;username&gt;</code></p>
</div>
</div>
</div>
<p>Der <code>sudo</code>-Befehl wird auch genutzt, um zwischen Accounts
zu wechseln oder Befehle mit den Rechten eines anderen Accounts
auszuführen. Um z.B. in den <em>Root</em>-Account zu wechseln genügt das
Kommando <code>sudo -i</code>. Anschließend befindet man sich auf der
Kommandozeile des Root-Accounts und alle Befehle werden mit Root-Rechten
ausgeführt. Dementsprechend sollte man hier Vorsicht walten lassen. Um
wieder zur vorhergehenden Kommandozeile des Standardaccounts zu kommen
wird die Root-Befehlszeile mit dem Befehl <code>exit</code>
verlassen.</p>
<p>Möchte man einen Befehl mit den Rechten eines anderen Accounts
ausführen geschieht dies wie folgt:
<code>sudo -u &lt;username&gt; &lt;Befehl&gt;</code> Um z.B. mit den
Rechten des Accounts <em>www-data</em> die Datei <em>startpage.html</em>
zu öffnen lautet der Befehl
<code>sudo -u www-data nano startpage.html</code></p>
<div class="section level4">
<h4 id="passwortabfrage-bei-sudo-befehl">Passwortabfrage bei sudo-Befehl<a class="anchor" aria-label="anchor" href="#passwortabfrage-bei-sudo-befehl"></a>
</h4>
<p>Um zu verhindern, dass der sudo-Befehl ohne die Kenntnis des
Passworts ausgeführt wird (z.B. wenn ein Angreifer einen Weg ins System
gefunden hat und nun Zugriff auf den Account hat), sollte das System so
konfiguriert werden, dass für den <code>sudo</code>-Befehl immer ein
Passwort verlangt wird.</p>
<p>Standardmäßig ist Ubuntu so konfiguriert, dass Mitglieder der
<em>sudo-Gruppe</em> zwar administrative Rechte haben, aber diese immer
mit ihrem Passwort bestätigen müssen.</p>
<p>Dieses Verhalten kann aber den eigenen Wünschen angepasst werden,
indem im Verzeichnis <code>/etc/sudoers.d/</code> mit dem
<em>visudo</em>-Programm eine neue Datei erstellt wird, z.B.:
<code>sudo visudo /etc/sudoers.d/010_&lt;username&gt;-passwd</code>. Um
die Passwortabfrage für einen bestimmten Account zu forcieren, kann
folgende Syntax genutzt werden:</p>
<pre><code>&lt;username&gt; ALL=(ALL) PASSWD: ALL</code></pre>
<p>Dabei muss <code>&lt;username&gt;</code> durch den eigenen Usernamen
ersetzt werden. Siehe zur sudoers-Datei auch die <a href="https://askubuntu.com/questions/1522123/nopasswd-sudo-on-ubuntu-24-04-not-working" class="external-link">Diskussion
auf askubuntu</a> und den Artikel bei <a href="https://wiki.ubuntuusers.de/sudo/Konfiguration/" class="external-link">ubuntuusers</a>.</p>
<div id="benutzerverwaltung-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="benutzerverwaltung-1" class="callout-inner">
<h3 class="callout-title">Benutzerverwaltung</h3>
<div class="callout-content">
<p>Sie sind mit Ihrem Standardaccount am System angemeldet, dieser hat
bereits administrative Rechte. Nun wollen Sie Ihrem System den neuen
Account <em>Linus</em> hinzufügen. Dieser Account soll ebenfalls
administrative Rechte erhalten. Wie lauten die korrekten Befehle?</p>
<ol style="list-style-type: decimal">
<li><p><code>adduser linus</code> und
<code>usermod -aG linus sudo</code></p></li>
<li><p><code>sudo adduser linus</code> und
<code>sudo usermod -aG sudo linus</code></p></li>
<li><p><code>sudo visudo linus</code> und
<code>sudo usermod -aG www-data linus</code></p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<ul>
<li>Antwort 2 ist die richtige Lösung.</li>
</ul>
<p>Bei Antwort 1 fehlt das <code>sudo</code>-Kommando vor den
eigentlichen Befehlen und beim usermod-Befehl sind user und Gruppe
vertauscht.</p>
<p>Bei Antwort 3 macht der erste Teil gar keinen Sinn und der zweite ist
zwar technisch korrekt, führt aber nicht zum gewollten Ziel.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="dateirechte">Dateirechte<a class="anchor" aria-label="anchor" href="#dateirechte"></a>
</h2>
<hr class="half-width">
<p>Jede Datei des Systems ist einem Besitzer und einer Gruppe
zugeordnet. Darüber kann gesteuert werden, wer auf welche Dateien mit
welchen Rechten zugreifen darf. Die genauen Rechte werden über den
sogenannten <strong><em>mode</em></strong> gesteuert. Der
<strong>mode</strong> gibt für jede Datei an, welche Rechte der
Besitzer, die besitzende Gruppe und “andere Accounts” haben. Andere
Accounts sind dabei alle anderen Accounts des Systems, auch Gastaccounts
oder Systemaccounts.</p>
<p>Mit dem Befehl <code>ls -l &lt;Dateipfad&gt;</code> können die
Inhalte eines Verzeichnisses und deren Berechtigungen angezeigt werden.
Ohne Pfadangabe wird das aktuelle Verzeichnis gewählt. Die Ausgabe des
Befehls <code>ls -l /home/linus</code> könnte z.B. wie folgt
aussehen:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">total</span> 4</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="ex">drwxrwxr-x</span> 2 linus linus 4096 Aug 21 15:35 Ordner1</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="ex">-rw-rw-r--</span> 1 linus linus   15 Aug 21 15:34 testdatei.txt</span></code></pre>
</div>
<p>Dies ist wie folgt zu verstehen:</p>
<ul>
<li><p><span style="color:rgb(165,30,55)"><strong>d</strong></span>rwxrwxr-x = es
handelt sich um ein Verzeichnis (d für directory, l für Link, - für
Datei)</p></li>
<li><p>d<span style="color:rgb(165,30,55)"><strong>rwx</strong></span>rwxr-x = der
Besitzer hat Lese- Schreib -und Ausführberechtigungen</p></li>
<li><p>drwx<span style="color:rgb(165,30,55)"><strong>rwx</strong></span>r-x = die
besitzende Gruppe hat Lese- Schreib -und Ausführberechtigungen</p></li>
<li><p>drwxrwx<span style="color:rgb(165,30,55)"><strong>r-x</strong></span> = alle anderen
haben nur Lese- und Ausführberechtigungen</p></li>
<li><p><span style="color:rgb(165,30,55)"><strong>linus</strong></span>
linus = die Datei/das Verzeichnis gehört dem User
<em>linus</em></p></li>
<li><p>linus <span style="color:rgb(165,30,55)"><strong>linus</strong></span> = die
Datei/das Verzeichnis gehört der Gruppe <em>linus</em></p></li>
<li><p><span style="color:rgb(165,30,55)"><strong>4096</strong></span> =
Dateigröße in Bytes</p></li>
<li><p><span style="color:rgb(165,30,55)"><strong>Aug 21
15:35</strong></span> = Änderungszeit</p></li>
<li><p><span style="color:rgb(165,30,55)"><strong>Ordner1</strong></span> =
Verzeichnis-/Dateiname</p></li>
</ul>
<p>Der ls-Befehl ist bei <a href="https://wiki.ubuntuusers.de/ls/" class="external-link">Ubuntuusers</a> auch ausführlich
erklärt.</p>
<p>Möchte man den Eigentümer einer Datei oder eines Verzeichnisses
ändern, wird der Befehl <code>chown</code> genutzt (kurz für change
ownership):
<code>chown &lt;neuer besitzer&gt;:&lt;neue Grupppe&gt; &lt;Datei/Verzeichnisname&gt;</code>.
Um z.B. die Datei <em>test.txt</em> dem User und der Gruppe
<em>linus</em> zu übertragen lautet der Befehl wie folgt:
<code>sudo chown linus:linus test.txt</code>. Soll ein gesamtes
Verzeichnis übertragen werden, wird der Parameter <code>-R</code>
(rekursiv) genutzt: <code>sudo chown -R linus:linus Ordner1</code></p>
<p>Möchte man den <em>mode</em> ändern (also die Rechte für Besitzer und
Gruppe), nutzt man den Befehl <code>chmod</code> (kurz für change mode):
<code>sudo chmod &lt;Modus&gt; &lt;Datei/Verzeichnis&gt;</code> Der
Modus setzt sich dabei stets aus drei Angaben zusammen:</p>
<ol style="list-style-type: decimal">
<li>
<p>Angabe für wen etwas geändert wird (Gruppe oder Account)</p>
<ul>
<li><p><code>u</code> = user</p></li>
<li><p><code>g</code> = group</p></li>
<li><p><code>o</code> other (=alle anderen)</p></li>
</ul>
</li>
<li>
<p>Angabe, ob ein Recht erteilt oder entzogen werden soll</p>
<ul>
<li><p><code>+</code> = Recht erteilen</p></li>
<li><p><code>-</code> = Recht entziehen</p></li>
</ul>
</li>
<li>
<p>Angabe zum betroffenen Recht.</p>
<ul>
<li><p><code>r</code> = read (Leseberechtigung)</p></li>
<li><p><code>w</code> = write (Schreibbrechtigung)</p></li>
<li><p><code>e</code> = execute (Ausführen von Dateien oder
Verzeichnisinhalt von Ordnern anzeigen lassen)</p></li>
</ul>
</li>
</ol>
<p>Eine ausführliche Erklärung zu Dateirechten findet sich wieder bei <a href="https://wiki.ubuntuusers.de/Rechte/" class="external-link">Ubuntuusers</a></p>
<div class="section level4">
<h4 id="beispiel">Beispiel<a class="anchor" aria-label="anchor" href="#beispiel"></a>
</h4>
<p>Die Datei <em>test.txt</em> gehört dem User <em>linus</em> und der
Gruppe <em>www-data</em>. Um nun dem User Lese- Schreib- und
Ausführberechtigung zu erteilen, der Gruppe aber nur Leserechte, lauten
die Befehle wie folgt: <code>sudo chmod u+rwx testdatei.txt</code> für
die Userberechtigung und <code>sudo chmod g+r testdatei.txt</code> für
die Gruppenberechtigung. Möchte man der Gruppe www-data wieder das
Leserecht entziehen, lautet der Befehl wie folgt:
<code>sudo chmod g-r testdatei.txt</code></p>
<div id="dateiberechtigungen" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="dateiberechtigungen" class="callout-inner">
<h3 class="callout-title">Dateiberechtigungen</h3>
<div class="callout-content">
<p>Sie wollen mit Ihrem Standardaccount (dieser ist Mitglied der
sudo-Gruppe) im Verzeichnis <code>/opt/</code> den neuen Ordner
<code>webservice</code> erstellen. Der Ordner soll dem User
<em>linus</em> und der Gruppe <em>www-data</em> gehören. Der User soll
volle Rechte haben, die Gruppe soll lesen und ausführen dürfen, alle
anderen sollen keine Rechte erhalten. Wie lauten die korrekten
Befehle?</p>
<ol style="list-style-type: decimal">
<li><ul>
<li><p><code>mkdir /opt/webservice</code></p></li>
<li><p><code>chown linus:www-data /opt/webservice</code></p></li>
<li><p><code>chmod 750</code></p></li>
</ul></li>
<li><ul>
<li><p><code>sudo mkdir /opt/webservice</code></p></li>
<li><p><code>sudo chown linus:www-data /opt/webservice</code></p></li>
<li><p><code>sudo chmod u+rwx</code></p></li>
<li><p><code>sudo chmod g+r</code></p></li>
<li><p><code>sudo chmod o-rwx</code></p></li>
</ul></li>
<li><ul>
<li><p><code>sudo touch /opt/webservice</code></p></li>
<li><p><code>sudo chmod linus:www-data /opt/webservice</code></p></li>
<li><p><code>sudo chown u+rwx</code></p></li>
<li><p><code>sudo chown g+r</code></p></li>
<li><p><code>sudo chown o-rwx</code></p></li>
</ul></li>
<li><ul>
<li><p><code>sudo mkdir /opt/webservice</code></p></li>
<li><p><code>sudo chown linus:www-data /opt/webservice</code></p></li>
<li><p><code>chmod linus:+rwx</code></p></li>
<li><p><code>chmod www-data:+r</code></p></li>
<li><p><code>chmod others:-rwx</code></p></li>
</ul></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<ul>
<li>Antwort 2 ist korrekt. Die drei <code>chmod</code>-Befehle könnten
noch durch <code>sudo chmod 750</code> zusammengefasst werden, siehe
dazu den <a href="https://wiki.ubuntuusers.de/Rechte/#Darstellungsarten" class="external-link">Ubuntuusers-Artikel
zu Dateirechten</a>
</li>
</ul>
<p>Antwort 1 schlägt fehl, da keine administrativen Rechte genutzt
werden</p>
<p>Antwort 3 erstellt eine Datei anstatt eines Verzeichnisses. Außerdem
sind die Befehle <code>chmod</code> und <code>chown</code>
vertauscht.</p>
<p>In Antwort 4 ist der <code>chmod</code>-Befehl fehlerhaft</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Hauptpunkte</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li><p>der <em>root</em>-Account ist der Administrator des
Systems</p></li>
<li><p>Mitglieder der <em>sudo</em>-Gruppe haben administrative Rechte,
welche sie mit dem <code>sudo</code>-Kommando nutzen können</p></li>
<li><p>Dateien und Ordner sind immer einem Benutzer und einer Gruppe
zugeordnet. Die Besitzverhältnisse können mit <code>chown</code>
geändert werden.</p></li>
<li><p>Dateien und Ordner haben einen <em>mode</em>, welcher die Rechte
von Besitzer und besitzender Gruppe steuert, er kann mit
<code>chmod</code> geändert werden</p></li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-05-sicherheit-2-firewall-file2ban"><p>Content from <a href="05-sicherheit-2-firewall-file2ban.html">Sicherheit 2: Firewall und Fail2Ban</a></p>
<hr>
<p>Zuletzt aktualisiert am 2025-10-21 |

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/episodes/05-sicherheit-2-firewall-file2ban.Rmd" class="external-link">Diese Seite bearbeiten <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Geschätzte Zeit: <i aria-hidden="true" data-feather="clock"></i> 135 Minuten</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Alle Lösungen anzeigen " data-collapse="Alle Lösungen ausblenden "> Alle Lösungen anzeigen <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Übersicht</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Fragen</h3>
<ul>
<li><p>Wie kommunizieren Computer im Netzwerk?</p></li>
<li><p>Wie schütze ich meinen Server im Netzwerk?</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Ziele</h3>
<ul>
<li><p>Grundlagen der Netzwerkkommunikation verstehen</p></li>
<li><p>Eine einfache Firewall einrichten</p></li>
<li><p>Fehlerhafte Logins mit Fail2Ban überwachen</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="netzwerkkommunikation">Netzwerkkommunikation<a class="anchor" aria-label="anchor" href="#netzwerkkommunikation"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="osi-referenz-modell">OSI-Referenz-Modell<a class="anchor" aria-label="anchor" href="#osi-referenz-modell"></a>
</h3>
<p>Um allgemeine Leitlinien für Hersteller von Hard- und Software zu
etablieren, wurde das OSI-Referenz-Modell entwickelt, welches die
Kommunikationsabläufe in Computernetzwerken definiert. Gemäß dem Modell
läuft ein Datenpaket beim Sender durch sieben Kommunikationsschichten
und beim Empfänger wieder durch die selben Schichten, allerdings in
umgekehrter Reihenfolge. Jede dieser Schichten hat klar definierte
Aufgaben und spezifische Protokolle. Ein Datenpaket wird dabei in einer
Schicht verarbeitet, z.B. in der obersten Schicht
(<em>Anwendungsschicht</em>) per HTTP abgerufen und dann an die nächste
Schicht übergeben. Dort werden weitere Schritte unternommen. Z.B. könnte
das jetzt fertig geschnürte HTTP-Paket zu einem HTTPS-Paket
verschlüsselt werden. Am untersten Ende (auf der
<em>Bitübertragungsschicht</em>) wird schließlich nur noch festgelegt,
wie der Strom über die Leitung fließt.</p>
<p>Da auf jeder Schicht beim Sender weitere Informationen zum Datenpaket
hinzugefügt werden (z.B. eine Veschlüsselung oder die IP-Adresse des
Empfängers) wird das Datenpaket immer größer (sog. Overhead). Beim
Empfänger wird das Paket wieder Schritt für Schritt “ausgepackt”.</p>
<p>Eine ausführliche Erklärung zum OSI-Modell inkl. Video findet sich
bei <a href="https://studyflix.de/informatik/osi-modell-5524" class="external-link">Studyflix</a>.</p>
</div>
<div class="section level3">
<h3 id="ip-basierte-netzwerke">IP-basierte Netzwerke<a class="anchor" aria-label="anchor" href="#ip-basierte-netzwerke"></a>
</h3>
<p>Um Kommunikationspartner im Netzwerk zu identifizieren, besitzt jedes
Netzwerkfähige Gerät (genauer gesagt: jedes Netzwerinterface) eine
Hardwareadresse: die <strong>MAC-Adresse</strong>. Die MAC-Adresse ist
auf Schicht 2 des OSI-Modells definiert. Um nun zu definieren, wo sich
diese MAC-Adresse im Netzwerk befindet, werden in Schicht 3 des
OSI-Modells <strong>IP-Adressen</strong> eingeführt. Mit IP-Adressen
werden zunächst logische Netzwerksegmente definiert. Dabei wird jedes
Netzwerk mit einer IP-Adresse beschrieben. Diese Netzwerkadresse ist der
Startpunkt des Netzwerkes (z.B. <code>192.168.178.0</code>). Mit der
<strong>Subnetzmaske</strong> wird die Anzahl an möglichen Adressen
innerhalb dieses Netzwerks festlegt (z.B. <code>255.255.255.0</code>
oder in Kurzform <code>/24</code> für ein Netzwerk mit max. 254
Geräten). Das Ende des Netzwerksegments wird durch die
<strong>Broadcast-Adresse</strong> definiert (z.B.
<code>192.168.178.255</code>). Datenpakete, die an die Broadcast-Adresse
gesendet werden, werden an alle Adressen des Segments weitergeleitet.
Innerhalb des Segments werden einzelne Geräte durch eine IP-Adresse
definiert (z.B. 192.168.178.25). Wandert das Gerät in ein anderes
Netzwerksegment erhält es eine andere IP-Adresse.</p>
<p>Um eine Kommunikation zwischen verschiedenen Netzwerken (z.B. einem
Heimnetzwerk mit der Adresse 192.168.178.0 und der Subnetzmaske
255.255.255.0 und dem Internet) zu ermöglichen, wird ein Standardgateway
benötigt. Dies ist i.d.R. die IP-Adresse des Routers. An diesen werden
alle Pakete geschickt, die keine Adresse im lokalen Netzwerk haben, und
werden dann z.B. ins Internet weiter geleitet.</p>
<p>Es werden unterschiedliche Typen von Netzwerken unterschieden:
Private Netzwerke und öffentliche Netzwerke. Private Netzwerke sind
nicht öffentlich erreichbar und sind durch Router und Firewalls von
öffentlichen Netzwerken getrennt. Dadurch können private Netzwerke mit
derselben IP-Adresskonfiguration mehrfach existieren, da sie sich
gegenseitig nicht “sehen”.</p>
<p>Folgende Adressbereiche für private Netzwerke gibt es:</p>
<table class="table">
<caption>Private Adressbereiche und spezielle Netzwerke</caption>
<colgroup>
<col width="28%">
<col width="16%">
<col width="11%">
<col width="43%">
</colgroup>
<thead><tr class="header">
<th>Netzadressbereich</th>
<th align="left">Subnetzmaske</th>
<th align="left">Max. Anzahl Geräte</th>
<th>Bedeutung</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>10.0.0.0 bis 10.255.255.0</td>
<td align="left">255.0.0.0</td>
<td align="left">16777216</td>
<td>Privates Netzwerk</td>
</tr>
<tr class="even">
<td>172.16.0.0 bis 172.31.255.255</td>
<td align="left">255.240.0.0</td>
<td align="left">1048576</td>
<td>Privates Netzwerk</td>
</tr>
<tr class="odd">
<td>192.168.0.0 bis 192.168.255.255</td>
<td align="left">255.255.0.0</td>
<td align="left">256</td>
<td>Privates Netzwerk</td>
</tr>
<tr class="even">
<td>169.254.0.0 bis 169.254.255.255</td>
<td align="left">255.255.0.0</td>
<td align="left">65536</td>
<td>Link Local/APIPA = Standardbereich, wenn automatische
Adresszuweisung fehlschlägt</td>
</tr>
<tr class="odd">
<td>127.0.0.1 bis 127.255.255.254</td>
<td align="left">255.0.0.0</td>
<td align="left">16777216</td>
<td>Loopback-Adresse für Kommunikation innerhalb eines Geräts</td>
</tr>
</tbody>
</table>
<div id="ip-adressen" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="ip-adressen" class="callout-inner">
<h3 class="callout-title">IP-Adressen</h3>
<div class="callout-content">
<p>Werden zentrale Dienste betrieben oder genutzt, muss man sich auch
mit dem zugrunde liegenden Netzwerk befassen. Informieren Sie sich
deshalb über Ihr Netzwerk:</p>
<ul>
<li><p>Welche IP-Adresse hat Ihr Computer?</p></li>
<li><p>Wie lautet die Subnetzmaske?</p></li>
<li><p>Welche IP-Adressen können Geräte in Ihrem Netzwerk
erhalten?</p></li>
<li><p>Welche IP-Adressen hat Ihr Router?</p></li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Typische Adressen könnten wie folgt lauten:</p>
<ol style="list-style-type: decimal">
<li><p>IP-Adresse: 192.168.178.25</p></li>
<li><p>Subnetzmaske: 255.255.255.0</p></li>
<li><p>Daraus folgt der Adressbereich 192.168.178.1 bis 192.168.178.254
(die erste Adresse ist als Netzwerkadresse und die letzte als sogenannte
Broadcastadresse reserviert und nicht für Geräte verfügbar).</p></li>
<li><p>Router geben sich meistens selbst die erste Adresse im Netzwerk,
in diesem Beispiel also 192.168.178.1. Zusätzlich erhält der Router auch
eine IP-Adresse im Netzwerk des Internetanbieters. Erst dadurch, dass
der Router in beiden Netzwerken eine Adresse hat, kann er auch
Datenpakete zwischen den Netzwerken verteilen.</p></li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="ports">Ports<a class="anchor" aria-label="anchor" href="#ports"></a>
</h3>
<p>Ist ein Datenpaket innerhalb eines IP-Netzwerks an einem Host (also
einem Gerät) angekommen, muss noch geklärt werden, wohin das Paket
innerhalb des Geräts gehört. Da auf einem Computer viele Programme
gleichzeitig aktiv sind, muss entschieden werden, für welches der
Programme ein Paket gedacht ist. Dazu werden <strong>Ports</strong>
genutzt. Ein Programm, welches Daten aus dem Netzwerk empfangen soll,
nutzt dabei einen festgelegten Port. Kommt am Gerät ein Datenpaket an,
das mit dem Port des Programms adressiert ist, wird das Paket an das
entsprechende Programm geleitet und von diesem verarbeitet. Zum Beispiel
“lauscht” der SSH-Server standardmäßig auf Port 22 für eingehenden
Datenverkehr. Wir haben diesen Port in <a href="03-remote-access.html">Lektion 3</a> manuell abgeändert.</p>
<p>Einige Ports sind fest für bestimmte Programme definiert und sollten
nicht von anderen Programmen oder manuell belegt werden. Andere Ports
können jedoch von Systemadministratoren frei genutzt werden. Die
Portnummern reichen von 0 bis 65.535. Eine Auflistung aller Ports und
deren Verwendung findet sich bei <a href="https://de.wikipedia.org/wiki/Liste_der_standardisierten_Ports" class="external-link">Wikipedia</a>.</p>
<p>Ein Port kann auf einem Gerät offen oder geschlossen sein, z.B. kann
eine Firewall die Kommunikation über einen Port blockieren. Außerdem
muss ein Prozess hinter einem Port “hören”, damit eine Kommunikation
aufgebaut werden kann.</p>
<p>Um zu sehen, welche Prozesse auf welchen Ports hören, kann der Befehl
<code>netstat -tulp</code> ausgeführt werden. Vorher muss dafür das
Paket <em>net-tools</em> installiert werden.</p>
</div>
</section><section><h2 class="section-heading" id="firewall">Firewall<a class="anchor" aria-label="anchor" href="#firewall"></a>
</h2>
<hr class="half-width">
<p>Um Kommunikation in einem Netzwerk zu kontrollieren, werden Firewalls
eingesetzt. Zu unterscheiden ist hierbei zwischen <em>Hardware- und
Desktopfirewalls.</em> Eine Hardware- oder auch externe Firewall ist in
der Regel ein dediziertes Gerät, welches primär unterschiedliche
Netzwerke trennt. In einfacher Form kommt ein Heimrouter wie eine
Fritz.Box dieser Aufgabe nach. Denn der Router trennt mit seiner
Firewall das Internet vom Heimnetz und verhindert dadurch, dass aus dem
Internet auf Geräte im Heimnetzwerk zugegriffen werden kann. In
komplexeren Netzwerken (z.B. in Unternehmen) werden professionellere
Geräte eingesetzt, welche mehr Funktionalität und Leistung bieten.</p>
<p>Eine Desktop- oder auch personal firewall dagegen ist meistens in
Form von Software auf einem Gerät installiert. Unter Microsoft Windows
wäre dies die Windows Defender Firewall, die den PC vor Zugriffen aus
einem angeschlossenen Netzwerk schützt. Unter Linux kann dafür die
<strong>uncomplicated firewall</strong> (kurz: UFW) genutzt werden.</p>
<div class="section level3">
<h3 id="funktionsweise">Funktionsweise<a class="anchor" aria-label="anchor" href="#funktionsweise"></a>
</h3>
<p>Vereinfacht kann die Funktionsweise einer Firewall in mehrere
Bereiche unterteilt werden. Dabei unterstützt nicht jede Firewall alle
dieser Funktionen.</p>
<ul>
<li><p>Paketfilter: filtert nach Adressen der Datenpakete (IP-Adressen,
MAC-Adressen, Ports, URLs) -&gt; <strong>Wer darf
wohin?</strong></p></li>
<li><p>Content/Proxy/Deep Packet-Filter: filtert nach dem Inhalt und
kann so spezifische Inhalte blockieren. Z.B. kann Malware erkannt werden
-&gt; <strong>Was darf unterwegs sein?</strong></p></li>
<li><p>Kombinierte Filter: durch die Kombination verschiedener Kriterien
wie Uhrzeit, Herkunft der Anfrage, Ziel der Anfrage oder die Häufigkeit
der Anfrage kann Datenverkehr blockiert oder erlaubt werden -&gt;
<strong>wie darf etwas unterwegs sein?</strong></p></li>
<li><p>Geoblocking: häufig bieten Firewalls auch die Möglichkeit,
Anfragen aus bestimmten Ländern zu blockieren. Allerdings können
Angreifer solche Blockaden umgehen, indem sie Ihre Anfragen über Server
in nicht blockierten Ländern leiten. Dennoch kann ein Geoblocking
bisweilen massenhafte und wenig zielgerichtete Angriffsversuche
unterbinden. -&gt; <strong>Woher darf etwas kommen?</strong></p></li>
</ul>
<p>Ist ein Filterkriterium erfüllt, wird eine Aktion ausgeführt. Wird
ein Paket <strong>verworfen</strong> (drop oder deny), wird es schlicht
nicht weitergeleitet. Der Absender erhält darüber keine Auskunft. Wird
ein Paket <strong>zurückgewiesen</strong> (deny oder reject) wird das
Paket ebenfalls nicht weitergeleitet, der Absender wird allerdings
direkt über den Kommunikationsabbruch informiert. Wird das Paket
<strong>akzeptiert</strong> wird es an die Zieladresse
weitergeleitet.</p>
</div>
<div class="section level3">
<h3 id="allgemeine-tips-zur-firewall">Allgemeine Tips zur Firewall<a class="anchor" aria-label="anchor" href="#allgemeine-tips-zur-firewall"></a>
</h3>
<ul>
<li><p>die Firewall muss immer aktiv sein</p></li>
<li><p>standardmäßig sollen eingehende Verbindungen blockiert
werden</p></li>
<li><p>eingehende Verbindungen sollen nur für einzelne Ports und
Anwendungen geöffnet werden</p></li>
<li><p>Sicherheit durch alternative Ports (wie beim SSH-Server) bringt
nur ein wenig (siehe dazu den Wikipedia-Artikel zu <a href="https://de.wikipedia.org/wiki/Security_through_obscurity" class="external-link">Security
through obscurity</a>)</p></li>
<li><p>ein im Netzwerk exponiertes Programm (inkl. dem Betriebssystem)
muss immer aktuell gehalten werden</p></li>
<li><p>die Kommunikation soll über verschlüsselte Protokolle stattfinden
(TLS, SSH, HTTPS…)</p></li>
<li><p>für noch mehr Sicherheit kann gesorgt werden, wenn auch der
ausgehende Datenverkehr gefiltert wird und nur explizit notwendige
Anfragen, z.B. für Softwareupdates, zugelassen werden aber Anfragen ins
lokale Netzwerk unterbunden werden. Siehe dazu ein <a href="https://www.linux-tips-and-tricks.de/en/raspberry/430-secure-raspberry-pi-against-internet-attacks-and-disable-attacks-into-the-local-network-with-a-firewall-using-iptables" class="external-link">Beispiel</a>
mit der IP-Tables-Firewall</p></li>
<li><p>Für Fortgeschrittene: mittels Port-knocking kann die Firewall nur
kurzzeitig und explizit geöffnet werden und nach dem Ende der
Kommunikation wieder geschlossen werden. Siehe dazu z.B. <a href="https://www.linuxbabe.com/security/secure-ssh-service-port-knocking-debian-ubuntu" class="external-link">dieses
Tutorial</a> im Netz.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="umsetzung-auf-dem-server">Umsetzung auf dem Server<a class="anchor" aria-label="anchor" href="#umsetzung-auf-dem-server"></a>
</h3>
<ul>
<li><p>(Installation: <code>sudo apt-get install ufw</code> (ist
standardmäßig bereits installiert))</p></li>
<li><p>Regel hinzufügen: <code>sudo ufw allow &lt;Portnummer&gt;</code>
oder <code>sudo ufw deny &lt;Portnummer&gt;</code></p></li>
<li><p>Standardregel für eingehenden Verkehr:
<code>sudo ufw default deny incoming</code></p></li>
<li><p>Standardregel für ausgehenden Verkehr:
<code>sudo ufw default allow outgoing</code></p></li>
<li><p>Zugriff auf SSH-Port nur aus einem lokalen Netzwerk zulassen
(Netzwerkadresse anpassen!):
<code>sudo ufw allow from 192.168.178.0/24 to any port 22</code></p></li>
<li><p>Firewall aktivieren: <code>sudo ufw enable</code></p></li>
<li><p>Status anzeigen lassen: <code>sudo ufw status</code></p></li>
<li><p>Status mit Nummer anzeigen lassen:
<code>sudo ufw status numbered</code></p></li>
<li><p>Regel löschen:
<code>sudo ufw delete &lt;Nummer-der-Regel&gt;</code></p></li>
</ul>
<p>Im Netz finden sich zahlreiche Anleitungen für die UFW.
Empfehlenswert sind die Anleitungen von <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-20-04-de" class="external-link">DigitalOcean</a>
und <a href="https://pimylifeup.com/raspberry-pi-ufw/" class="external-link">PiMyLifeUp</a></p>
</div>
</section><section><h2 class="section-heading" id="fail2ban">Fail2Ban<a class="anchor" aria-label="anchor" href="#fail2ban"></a>
</h2>
<hr class="half-width">
<p>Nachdem in der (uncomplicated) Firewall ein Port geöffnet wurde, kann
die Kommunikation mit dem hinter dem Port wartenden Dienst stattfinden.
Jedoch ist es empfehlenswert diese Kommunikation weiterhin im Blick zu
behalten.</p>
<p>Für einfache Szenarien kann das Programm <strong>Fail2Ban</strong>
genutzt werden, um unerwünschte Eindringversuche zu erkennen und zu
blockieren. Ein typischer Angriffsversuch, welcher mit Fail2Ban
abgefangen werden kann, ist eine Brute-Force-Attacke, bei welcher durch
massenhafte Anfragen versucht wird, Benutzername und Passwort zu
erraten. Die dabei unweigerlich zahlreich auftretenden Fehlversuche
werden in einer Protokolldatei im System notiert. Durch die Überwachung
dieser Protokolldatei (auch als Logdatei bezeichnet) kann Fail2Ban die
Absenderadresse der massenhaften Loginversuche erkennen und blockieren,
indem die Adresse der Firewall als zu blockierende Adresse mitgeteilt
wird.</p>
<p>Zu Fail2Ban gibt es im Netz verschiedne Anleitungen. Z.B. im
offiziellen <a href="https://www.raspberrypi.com/documentation/computers/configuration.html#block-suspicious-activity-with-fail2ban" class="external-link">Raspberry
Pi Handbuch</a> oder wieder bei <a href="https://pimylifeup.com/raspberry-pi-fail2ban/" class="external-link">PiMyLifeUp</a>.</p>
<div class="section level3">
<h3 id="umsetzung-auf-dem-ubuntu-server">Umsetzung auf dem Ubuntu-Server:<a class="anchor" aria-label="anchor" href="#umsetzung-auf-dem-ubuntu-server"></a>
</h3>
<ul>
<li><p>Installation: <code>sudo apt-get install fail2ban</code></p></li>
<li><p>Aktivierung:
<code>sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local</code></p></li>
<li>
<p>Beispielkonfiguration der Standardparameter mittels
<code>sudo nano /etc/fail2ban/jail.local</code></p>
<ul>
<li><p>Standard Sperrzeit: <code>bantime = 20m</code></p></li>
<li><p>Standardanzahl möglicher Fehlversuche:
<code>maxretry = 3</code></p></li>
<li><p>Standardzeit für “maxretry”: <code>findtime = 10m</code></p></li>
</ul>
</li>
<li>
<p>Zu überwachende Services/Ports werden am Ende der Datei
<code>/etc/fail2ban/jail.local</code> mit <code>[&lt;Name&gt;]</code>
definiert und mit Detaileinstellungen konfiguriert:</p>
<ul>
<li><p>Aktivierung: <code>enabled = true</code></p></li>
<li><p>Angabe des Ports:
<code>port = &lt;Portnummer des Services</code></p></li>
<li><p>Angabe der zu überwachenden Logdatei:
<code>logpath = &lt;Pfad zur Logdatei&gt;</code></p></li>
<li><p>Angabe des Filters, mit dem die Logdatei geprüft wird:
<code>filter = &lt;Name der Datei im Verzeichnis /etc/fail2ban/filter.d/&gt;</code></p></li>
</ul>
</li>
<li><p>Beispiel für den SSH-Server:</p></li>
</ul>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">#Standardeinstellungen vornehmen</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">bantime</span> = 60m </span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="ex">findtime</span> = 15m</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="ex">maxretry</span> = 3 </span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co"># Im Bereich [sshd]</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="ex">[sshd]</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="ex">enabeld</span> = true</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="ex">port</span> = <span class="op">&lt;</span>ssh-port<span class="op">&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="ex">logpath</span> = %<span class="er">(</span><span class="ex">sshd_log</span><span class="kw">)</span><span class="ex">s</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="ex">backend</span> = systemd</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="ex">filter</span> = sshd</span></code></pre>
</div>
<div id="netzwerksicherheit" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="netzwerksicherheit" class="callout-inner">
<h3 class="callout-title">Netzwerksicherheit</h3>
<div class="callout-content">
<p>Sie sollen für Ihre Arbeitsgruppe einen kleinen Server mit diversen
Diensten betreiben (z.B. einen Cloudserver). Wie gewährleisten Sie die
Netzwerksicherheit, um unbefugten Zugriff auf den Server zu
verhindern?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Einige wichtige und grundlegende Maßnahmen können sein:</p>
<ol style="list-style-type: decimal">
<li><p>Firewall auf dem Server aktivieren</p></li>
<li><p>Eingehende Verbindungen blockieren</p></li>
<li><p>nur einzelne Ports für die notwendigen Dienste und nur innerhalb
des lokalen Netzwerkes freigeben</p></li>
<li><p>Mit Fail2Ban oder vergleichbaren Tools fehlerhafte Loginversuche
überwachen</p></li>
<li><p>Regelmäßige Wartung: Sowohl der Server als auch alle anderen
Netzwerkkomponenten (Router, Switche etc) müssen stets mit aktueller
Soft- und oder Firmware ausgestattet werden.</p></li>
<li><p>der SSH-Serverdienst sollte entsprechend <a href="03-remote-access.html">Lektion 3</a> konfiguriert werden</p></li>
<li><p>Noch mehr Sicherheit erhalten Sie durch eine
Netzwerksegmentierung: sie trennen das Netzwerk in mehrere logische
Bereiche auf, zwischen denen ein Router mit Firewall
vermittelt.</p></li>
<li><p>Schützen Sie den Server(raum) auch physikalische vor unbefugtem
Zugriff: die Hardware sollte nur für berechtigte Personen zugänglich
sein.</p></li>
</ol>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Hauptpunkte</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li><p>Computer kommunizieren im Netzwerk nach Standards, das
OSI-Schichten-Modell stellt einen Leitrahmen für diese Standards
dar</p></li>
<li><p>Versendete Daten im Netzwerk haben immer einen Absender- und
einen Empfänger (in Form von MAC-Adresse, Netzwerk-ID, IP-Adresse und
Port)</p></li>
<li><p>Mit einer Firewall können Ports geöffnet und geschlossen
werden</p></li>
<li><p>Mit Fail2Ban können fehlerhafte Loginversuche festgestellt und
blockiert werden</p></li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-06-docker-basics"><p>Content from <a href="06-docker-basics.html">Grundlegendes zu Docker</a></p>
<hr>
<p>Zuletzt aktualisiert am 2025-10-21 |

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/episodes/06-docker-basics.Rmd" class="external-link">Diese Seite bearbeiten <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Geschätzte Zeit: <i aria-hidden="true" data-feather="clock"></i> 135 Minuten</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Alle Lösungen anzeigen " data-collapse="Alle Lösungen ausblenden "> Alle Lösungen anzeigen <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Übersicht</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Fragen</h3>
<ul>
<li><p>Was ist Virtualisierung</p></li>
<li><p>Was sind Container</p></li>
<li><p>Wie nutze ich Docker</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Ziele</h3>
<ul>
<li><p>Theoretische Grundlagen von Virtualisierungstechnologien</p></li>
<li><p>Vergleich von Containern und virtuellen Maschinen</p></li>
<li><p>Installation und Nutzung der Docker Engine</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="virtualisierungsstrategien">Virtualisierungsstrategien:<a class="anchor" aria-label="anchor" href="#virtualisierungsstrategien"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="bereitstellung-von-serverdiensten">Bereitstellung von Serverdiensten<a class="anchor" aria-label="anchor" href="#bereitstellung-von-serverdiensten"></a>
</h3>
<p>Die traditionelle Bereitstellung von Serverdiensten erfolgt durch die
Installation eines Betriebssystems direkt auf der Hardware, gefolgt von
der Installation der benötigten Anwendungen. Diese Methode hat jedoch
einige Nachteile: Es erfolgt keine Trennung der Anwendungen und
Prozesse, wodurch bei Kompromittierung einer Anwendung das gesamte
System betroffen ist. Zudem werden die Hardwareressourcen ineffizient
genutzt, was zu höheren Kosten bei Hardwarebeschaffung und
Stromverbrauch führt und damit auch den Prinzipien der Green-IT
widerspricht.</p>
<p>Heute wird daher häufiger auf Virtualisierung gesetzt.
Virtualisierung bedeutet, dass Hardwareressourcen wie Prozessor,
Arbeitsspeicher, Festplattenspeicher, Netzwerk oder Grafikkarte durch
spezielle Virtualisierungsprogramme unterteilt werden und virtuellen
Maschinen zugeteilt werden. Dies führt zu einer effizienteren Nutzung
der Hardware und erhöht die Sicherheit durch die Trennung der
Anwendungen.</p>
<p>Dabei wird das System mit der physischen Hardware, auf welchem die
Virtualisierungsprogramme laufen, als <em>Host</em> oder Wirt
bezeichnet. Als <em>Gast</em> wird die virtualisierte Umgebung
bezeichnet.</p>
</div>
<div class="section level3">
<h3 id="unterschiedliche-typen-der-virtualisierung">Unterschiedliche Typen der Virtualisierung:<a class="anchor" aria-label="anchor" href="#unterschiedliche-typen-der-virtualisierung"></a>
</h3>
<ul>
<li><p><strong>Typ-1</strong>: Hierbei handelt es sich um spezielle
Betriebssysteme, die primär der Virtualisierung dienen. Solche Systeme
werden auch als Hypervisor bezeichnet. Bei diesen Systemen werden der
virtuellen Maschine die Hardwareressourcen direkt zugeteilt. Diese
Methode ist performanter als Typ-2 und wird hauptsächlich für die
Servervirtualisierung in Rechenzentren oder Unternehmensnetzwerken
verwendet.</p></li>
<li><p><strong>Typ-2</strong>: Bei dieser Methode läuft ein normales
Desktop-Betriebssystem (Windows, Linux, MacOS) auf der physischen
Hardware. Innerhalb dieses Systems wird die Virtualisierungssoftware
installiert und diese Software verwaltet die Zuteilung der
Hardwareressourcen auf die virtuellen Maschinen. Diese Methode wird
häufig für lokale Tests, in der Entwicklung oder für die parallele
Nutzung von (unterschiedlichen) Betriebssystemen verwendet. Sie ist
einfacher in der Handhabung, bietet aber weniger Leistung und
Funktion.</p></li>
<li><p><strong>Containervirtualisierung</strong>: Hierbei haben die
virtualisierten Anwendungen direkten Zugriff auf die Hardware und den
Kernel des Betriebssystems. Anstatt die Hardware zu virtualisieren wird
nur die Software virtualisiert. Dabei wird nicht das gesamte
Betriebssystem virtualisiert, sondern nur die benötigte Anwendung und
deren Abhängigkeiten. Man spricht hier auch von Microservices. Dies
führt zu einer geringeren Trennung der Anwendungen und reduziert damit
die sicherheitstechnischen Vorteile einer virtuellen Maschine. Die
Containervirtualisierung bietet jedoch eine höhere Performance, da sie
“näher” an der Hardware des Hosts arbeitet. Containervirtualisierung
wird häufig für die Bereitstellung von Anwendungen in komplexen
Serverumgebungen oder als Entwicklungsumgebung verwendet. Ein Beispiel
für Containervirtualisierung ist Docker: Dockercontainer haben ihr
eigenes Dateisystem mit eigenen Benutzerrechten, nutzen jedoch direkt
den Kernel des Hosts.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="weiterführende-quellen">Weiterführende Quellen<a class="anchor" aria-label="anchor" href="#weiterf%C3%BChrende-quellen"></a>
</h3>
<ul>
<li><a href="https://www.ibm.com/de-de/think/topics/virtualization" class="external-link">Virtualisierung
allgemein (IBM 1)</a></li>
<li><a href="https://www.ibm.com/think/topics/containers-vs-vms" class="external-link">Container
vs. virtuelle Maschinen (IBM 2)</a></li>
<li><a href="https://www.ibm.com/de-de/think/topics/containerization" class="external-link">Containervirtualisierung
(IBM 3)</a></li>
</ul>
<div id="virtualisierungstypen" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="virtualisierungstypen" class="callout-inner">
<h3 class="callout-title">Virtualisierungstypen</h3>
<div class="callout-content">
<p>Recherchieren Sie zu den folgenden Produkten und ordnen Sie diese den
entsprechenden Virtualisierungstechnologien zu:</p>
<ul>
<li>Proxmox</li>
<li>VirtualBox</li>
<li>Docker</li>
<li>Kubernetes</li>
<li>Hyper-V</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p>Proxmox: Typ-1-Virtualisierung basierend auf dem Betriebssystem
Debian und aufbauend auf der KVM-Technologie.</p></li>
<li><p>VirtualBox: Typ-2-Virtualisierung. VirtualBox ist eine
Open-Source-Virtualisierungssoftware, die auf einem bestehenden
Betriebssystem läuft und es ermöglicht, mehrere Gastbetriebssysteme zu
betreiben.</p></li>
<li><p>Docker: Containervirtualisierung. Docker ist eine Plattform, die
es ermöglicht, Anwendungen in Container zu verpacken, die unabhängig von
der zugrunde liegenden Infrastruktur ausgeführt werden können.</p></li>
<li><p>Kubernetes: Containervirtualisierung. Kubernetes ist ein von
Google entwickeltes Open-Source-System zur Automatisierung der
Bereitstellung, Skalierung und Verwaltung von containerisierten
Anwendungen.</p></li>
<li><p>Hyper-V: Typ-1-Virtualisierung. Hyper-V ist eine
Virtualisierungsplattform von Microsoft, die es ermöglicht, mehrere
Betriebssysteme auf einem einzigen physischen Server zu
betreiben.</p></li>
</ol>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="docker-engine">Docker Engine<a class="anchor" aria-label="anchor" href="#docker-engine"></a>
</h2>
<hr class="half-width">
<p>Docker ist eine bekannte und weit verbreitete Open-Source-Software
für Containervirtualisierung. Die Docker Engine läuft als
Hintergrundprozess auf dem Betriebssystem (Daemon), um die Container zu
steuern. Dieser Prozess muss aktiv sein, um Docker nutzen zu können.</p>
<div class="section level3">
<h3 id="komponenten">Komponenten<a class="anchor" aria-label="anchor" href="#komponenten"></a>
</h3>
<p>Einige wichtige Komponenten der Docker Engine sind die folgenden:</p>
<div class="section level4">
<h4 id="images">Images<a class="anchor" aria-label="anchor" href="#images"></a>
</h4>
<p>Images bilden die Grundlage eines Containers. Ein Image enthält alle
notwendigen Dateien und Abhängigkeiten, die benötigt werden, um eine
Anwendung auszuführen. Dies umfasst das Betriebssystem, die
Anwendungssoftware, Bibliotheken und Konfigurationsdateien. Images
werden über Registries wie <a href="https://hub.docker.com/" class="external-link">Docker
Hub</a> oder <a href="https://github.com/" class="external-link">GitHub</a> zur Verfügung
gestellt, wo sie heruntergeladen und verwendet werden können.</p>
</div>
<div class="section level4">
<h4 id="container">Container<a class="anchor" aria-label="anchor" href="#container"></a>
</h4>
<p>Ein Container ist eine aktive Instanz, die aus einem Image erstellt
wird. Aus einem einzigen Image können mehrere Container erstellt werden.
Jeder Container ist eine isolierte Umgebung, die unabhängig von anderen
Containern läuft. Dies ermöglicht es, mehrere Anwendungen auf demselben
Host-System auszuführen, ohne dass sie sich gegenseitig
beeinflussen.</p>
</div>
<div class="section level4">
<h4 id="volumes">Volumes<a class="anchor" aria-label="anchor" href="#volumes"></a>
</h4>
<p>Volumes sind persistente Datenspeicher, die verwendet werden, um
Daten dauerhaft zu speichern. Im Gegensatz zu den Dateien innerhalb
eines Containers, die bei der Beendigung des Containers verloren gehen,
bleiben die Daten in einem Volume erhalten. Volumes sind besonders
nützlich für Anwendungen, die Daten über mehrere Container-Instanzen
hinweg speichern müssen, wie z.B. Datenbanken oder Log-Dateien.</p>
</div>
</div>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>Die Installation der Docker Engine auf Ubuntu kann mittels einer von
Docker zur Verfügung gestellten Fremdquelle erfolgen. Die Schritte sind
dem offiziellen <a href="https://docs.docker.com/engine/install/ubuntu/#install-using-the-repository" class="external-link">Handbuch</a>
zu entnehmen. Nutzen Sie die Installationsvariante mittels
apt-Repository und installieren Sie die aktuellste Version
(“Latest”).</p>
<p>Überprüfen Sie anschließend die Installation mit dem Befehl
<code>docker -v</code>. Dieser Befehl sollte Ihnen die aktuelle
Versionsnummer von Docker zurück liefern.</p>
</div>
<div class="section level3">
<h3 id="konfiguration">Konfiguration<a class="anchor" aria-label="anchor" href="#konfiguration"></a>
</h3>
<p>Nach der Installation der Docker Engine sind einige
Konfigurationsschritte notwendig, um die Docker-Umgebung optimal zu
nutzen.</p>
<p>Der Docker Daemon kann mit der Datei
<code>/etc/docker/daemon.json</code> angepasst werden. Diese muss
manuell erstellt werden
(<code>sudo nano /etc/docker/daemon.json</code>). Die
Konfigurationsoptionen für den Docker Daemon werden in dieser Datei im
JSON-Format eingetragen. Eine wichtige Konfiguration ist die
Logrotation, die sicherstellt, dass die Log-Dateien nicht unbegrenzt
wachsen.</p>
<div class="section level4">
<h4 id="logrotation">Logrotation<a class="anchor" aria-label="anchor" href="#logrotation"></a>
</h4>
<p>Um die Logrotation zu konfigurieren, fügen Sie die die folgenden
Zeilen der <code>daemon.json</code>-Datei hinzu.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">JSON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode json" tabindex="0"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  <span class="dt">"log-driver"</span><span class="fu">:</span> <span class="st">"json-file"</span><span class="fu">,</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  <span class="dt">"log-opts"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="dt">"max-size"</span><span class="fu">:</span> <span class="st">"10m"</span><span class="fu">,</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="dt">"max-file"</span><span class="fu">:</span> <span class="st">"3"</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="fu">}</span></span></code></pre>
</div>
<p>Weitere Informationen zur Logrotation finden Sie in der offiziellen
Dokumentation: <a href="https://docs.docker.com/engine/logging/drivers/json-file/" class="external-link">Docker
Logging Drivers</a>.</p>
</div>
<div class="section level4">
<h4 id="autostart-einrichten">Autostart einrichten<a class="anchor" aria-label="anchor" href="#autostart-einrichten"></a>
</h4>
<p>Um sicherzustellen, dass der Docker-Dienst beim Systemstart
automatisch gestartet wird, müssen Sie den Autostart einrichten. Dies
erfoglt unter Ubuntu mit Systemd:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable docker.service</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable containerd.service</span></code></pre>
</div>
<p>Weitere Informationen dazu finden Sie in der <a href="https://docs.docker.com/engine/install/linux-postinstall/#configure-docker-to-start-on-boot-with-systemd" class="external-link">Dokumentation</a>.</p>
<div id="die-qual-der-wahl" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="die-qual-der-wahl" class="callout-inner">
<h3 class="callout-title">Die Qual der Wahl</h3>
<div class="callout-content">
<p>Sie haben den Auftrag erhalten, an Ihrem Institut für eine kleine
Arbeitsgruppe eine Website und eine Webapplikation zum Dateiaustausch
(“Cloud”) zu betreiben. Dazu wird Ihnen ein kleiner Server mit
Ubuntu-Betriebssystem zur Verfügung gestellt. Ihr Institut hat mehrere
Arbeitsgruppen, die bislang Ihre Daten nur auf lokalen Festplatten
speichern.</p>
<p>Welche Installationsvariante wählen Sie?</p>
<ol style="list-style-type: decimal">
<li><p>Ich installiere einen Webserver in Ubuntu (“bare metal”). Dieser
stellt sowohl die Website als auch auf einer zweiten Internetseite die
Webapplikation zum Datenaustausch bereit.</p></li>
<li><p>Ich installiere einen Webserver in Ubuntu und einen
Docker-Container für die Webapplikation. Der Webserver stellt die
Website bereit und leitet Anfragen an die Webapplikation an den
Docker-Container weiter.</p></li>
<li><p>Ich installiere einen Webserver in Ubuntu und je einen
Docker-Container für die Webapplikation und die Website. Der Webserver
leitet alle Anfragen an den jeweiligen Docker-Container weiter.</p></li>
<li><p>Ich installiere drei Docker-Container: Webserver, Website und
Webapplikation. Der Webserver-Container leitet die Anfragen an den
Website- oder Webapplikations-Container weiter.</p></li>
<li><p>Ich installiere eine virtuelle Maschine für die Webapplikation
und betreibe die Website direkt im Ubuntu-System (“Bare metal”)</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>In Anbetracht der weiteren Arbeitsgruppen, die evtl. zukünftig
ebenfalls eine Plattform zum Datenaustausch benötigen, erscheint es
sinnvoll, diese Plattform als Docker-Container zu betreiben. Dadurch
besteht die später die Möglichkeit, diesen Container einfach zu
duplizieren und damit weiteren Arbeitsgruppen eine Instanz zur Verfügung
zu stellen.</p>
<p>Der Webserver kann ebenfalls als Docker-Container betrieben werden.
Dadurch ist das gesamte Setup unabhängig vom Host-Betriebssystem und
kann wenn nötig einfacher auf andere Hardware migriert werden.</p>
<p>Demnach erscheint Antwort 4 passend. Die genaue Wahl hängt aber auch
von individuellen Gegebenheiten ab (Know-How des IT-Teams, Performance
des Servers, Vorgaben der Organisation, vorhandene Strukturen, künftige
Projekte).</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="steuerung-der-docker-engine">Steuerung der Docker Engine<a class="anchor" aria-label="anchor" href="#steuerung-der-docker-engine"></a>
</h3>
<p>Die Steuerung von Docker erfolgt über den <code>docker</code> Befehl,
der in der Regel mit <code>sudo</code> ausgeführt werden muss, um die
notwendigen administrativen Rechte zu haben. Hier sind einige wichtige
Befehle und ihre Funktionen:</p>
<div class="section level4">
<h4 id="docker-ps">
<code>docker ps</code><a class="anchor" aria-label="anchor" href="#docker-ps"></a>
</h4>
<p>Der Befehl <code>docker ps</code> listet alle aktiven Container auf.
Dies ist nützlich, um einen Überblick über die laufenden Container zu
erhalten und deren Status zu überprüfen.</p>
</div>
<div class="section level4">
<h4 id="docker-run">
<code>docker run</code><a class="anchor" aria-label="anchor" href="#docker-run"></a>
</h4>
<p>Der Befehl <code>docker run</code> wird verwendet, um einen neuen
Container aus einem Image zu starten. Dieser Befehl erfordert mindestens
das Image, aus dem der Container erstellt werden soll, und kann
zusätzliche Optionen enthalten, wie z.B. die Zuweisung von Ressourcen
oder die Angabe von Umgebungsvariablen.</p>
</div>
<div class="section level4">
<h4 id="docker-cp">
<code>docker cp</code><a class="anchor" aria-label="anchor" href="#docker-cp"></a>
</h4>
<p>Der Befehl <code>docker cp</code> wird verwendet, um Dateien oder
Verzeichnisse zwischen dem Host-System und einem Container zu kopieren.
Dies ist nützlich, um Daten in einen Container zu importieren oder aus
einem Container zu exportieren.</p>
</div>
<div class="section level4">
<h4 id="docker-network">
<code>docker network</code><a class="anchor" aria-label="anchor" href="#docker-network"></a>
</h4>
<p>Der Befehl <code>docker network</code> bietet verschiedene
Unterbefehle zur Verwaltung von Docker-Netzwerken: -
<code>docker network ls</code> listet alle vorhandenen Netzwerke auf. -
<code>docker network inspect &lt;Netzwerkname&gt;</code> zeigt
detaillierte Informationen über ein bestimmtes Netzwerk an, z.B.
IP-Adressen und verbundene Container -
<code>docker network create &lt;Netzwerkname&gt;</code> erstellt ein
neues Netzwerk (standardmäßig als sog. Bridge-Netzwerk).</p>
<p>Siehe dazu auch <a href="#kommunikation-im-dockerversum-dockernetzwerke">Dockernetzwerke</a></p>
</div>
<div class="section level4">
<h4 id="docker-prune">
<code>docker prune</code><a class="anchor" aria-label="anchor" href="#docker-prune"></a>
</h4>
<p>Der Befehl <code>docker prune</code> bietet verschiedene Unterbefehle
zur Bereinigung von Docker-Ressourcen: -
<code>docker system prune</code> entfernt alle ungenutzten Daten
(Images, Container, Netzwerke und Volumes). -
<code>docker image prune</code> entfernt alle ungenutzten Images. -
<code>docker network prune</code> entfernt alle ungenutzten Netzwerke. -
<code>docker volume prune</code> entfernt alle ungenutzten Volumes.</p>
</div>
<div class="section level4">
<h4 id="docker-exec">
<code>docker exec</code><a class="anchor" aria-label="anchor" href="#docker-exec"></a>
</h4>
<p>Der Befehl <code>docker exec</code> wird verwendet, um einen Befehl
in einem laufenden Container auszuführen. Dies ist nützlich, um
administrative Aufgaben innerhalb eines Containers durchzuführen, ohne
den Container neu starten zu müssen.</p>
</div>
</div>
<div class="section level3">
<h3 id="kommunikation-im-dockerversum-dockernetzwerke">Kommunikation im “Dockerversum”: Dockernetzwerke<a class="anchor" aria-label="anchor" href="#kommunikation-im-dockerversum-dockernetzwerke"></a>
</h3>
<p>Um Containern die Kommunikation im Netzwerk zu ermöglichen, erstellt
die Docker beim Start der Container standardmäßig auch <strong>virtuelle
Netzwerke</strong>. In der Standardkonfiguration haben Container
Internetzugriff über die Internetschnittstelle des Hosts. Allerdings
kommunizieren Sie in einem eigenen Subnetz und sind daher nicht von
außen erreichbar.</p>
<div class="section level4">
<h4 id="docker-netzwerke">Docker-Netzwerke<a class="anchor" aria-label="anchor" href="#docker-netzwerke"></a>
</h4>
<p>Es gibt verschiedene Netzwerktypen, die von der Docker Engine oder
manuell erstellt werden können. Die wichtigsten sind Bridge, Host und
Overlay.</p>
<p><strong>Bridge-Netzwerke</strong> sind virtuelle Netzwerke, an welche
Container gebunden werden können. Alle Container innerhalb desselben
Bridge-Netzwerks können miteinander kommunizieren, entweder über ihre
IP-Adressen oder über ihre Container-Namen. Auf dem Host ist das
Bridg-Netzwerk ebenfalls sichtbar, allerdings ist das Bridge-Netzwerk
nicht direkt mit der Netzwerkschnittstelle des Hosts verbunden, sondern
befindet sich hinter der Netzwerkschnittstelle des Hosts. Damit hat das
Bridge-Netzwerk keinen Zugriff auf das LAN des Hosts. Über <a href="#portmapping">Portmapping</a> kann aber die Kommunikation mit dem
LAN-Netzwerk des Hosts ermöglicht werden.</p>
<p><strong>Host-Netzwerke</strong> verbinden Container auf derselben
physischen Netzwerkschnittstelle wie den Host. Dadurch befindet sich das
Host-Netzwerk “neben” dem Host selbst und hat direkten Zugriff auf das
LAN des Hosts und erhält auch dort eine IP-Adresse. Dies hat zwar den
Vorteil des direkten Zugriffs, ist aber aufgrund der geringeren
Isolierung des der verbundenen Container auch weniger sicher.</p>
<p><strong>Overlay-Netzwerke</strong> dienen der Verbindung von
Containern über unterschiedliche Hosts hinweg. So ist es z.B. möglich
Docker-Container, die auf zwei unterschiedlichen Servern laufen und dort
jeweils in einem Bridge-Netzwerk isoliert sind, zusätzlich mit einem
Overlay-Netzwerk kommunizieren zu lassen.</p>
</div>
<div class="section level4">
<h4 id="portmapping">Portmapping<a class="anchor" aria-label="anchor" href="#portmapping"></a>
</h4>
<p>Um die Kommunikation von Host zu Gast zu ermöglichen können Anfragen
an bestimmte Ports des Hosts an bestimmte Ports des Gasts weitergeleitet
werden. Dadurch können Container von außerhalb eines Bridge-Netzwerks
erreicht werden. Es ist jedoch wichtig zu beachten, dass dadurch die
Regeln der UFW umgangen werden. Deshalb sind für im Internet exponierte
Container ggf. eigene Firewallregeln zu erstellen (siehe dazu das <a href="https://docs.docker.com/engine/network/packet-filtering-firewalls/" class="external-link">Handbuch</a>).
Um Ports des Containers auf dem Host verfügbar zu machen (zu
veröffentlichen (“publish”)) dient der Parameter <code>-p</code> des
<code>docker run</code>-Befehls.</p>
<p>Mehr Informationen zu Docker-Netzwerken findet sich im <a href="https://docs.docker.com/engine/network/" class="external-link">Handbuch</a>.</p>
</div>
</div>
<div class="section level3">
<h3 id="container-mit-der-docker-engine-erstellen">Container mit der Docker Engine erstellen<a class="anchor" aria-label="anchor" href="#container-mit-der-docker-engine-erstellen"></a>
</h3>
<p>Der Befehl
<code>docker run &lt;Imagename&gt;:&lt;Image-Tag&gt;</code> wird
verwendet, um einen neuen Container aus einem Image zu starten. Wenn das
angegebene Image nicht lokal vorhanden ist, wird es automatisch aus
einer Registry wie <em>Docker Hub</em> heruntergeladen und der Container
wird gestartet. Dabei gibt es verschiedene Parameter, die die
Konfiguration des Containers beeinflussen können. Einige wichtig
Parameter sind dabei die Folgenden:</p>
<ul>
<li><p><strong><code>-p</code> für Portfreigaben</strong>: Dieser
Parameter wird verwendet, um Ports auf dem Host-System an Ports im
Container zu binden. Dies ermöglicht es, auf Dienste im Container von
außerhalb zuzugreifen. Beispiel: <code>docker run -p 80:80 nginx</code>.
Dieser Befehl startet einen Docker-Container basierend auf dem
nginx-Image. Dabei wird der Port <code>80</code> auf dem Host-System auf
den Port <code>80</code> innerhalb des Containers weitergeleitet.
Dadurch kann von außerhalb des Containers auf Port <code>80</code>
innerhalb des Containers zugegriffen werden. Es ist aber auch möglich
unterschiedliche Ports zu nutzen:
<code>docker run -p 12000:80 nginx</code></p></li>
<li><p><strong><code>-v</code> für Volumes</strong>: Dieser Parameter
wird verwendet, um Verzeichnisse oder Dateien zwischen dem Host-System
und dem Container zu teilen. Dies ist nützlich, um Daten persistent zu
speichern oder Konfigurationsdateien zu teilen.</p></li>
<li><p><strong>Weitere Parameter</strong>: Eine vollständige Liste der
verfügbaren Parameter kann mit dem Befehl <code>docker run --help</code>
angezeigt werden.</p></li>
<li><p><strong>tag</strong>: Der tag gibt die Version des Images an.
Wenn kein tag angegeben wird, wird standardmäßig das Image mit dem tag
<code>latest</code> verwendet.</p></li>
</ul>
<div class="section level4">
<h4 id="beispiel-apache-webserver">Beispiel: Apache Webserver<a class="anchor" aria-label="anchor" href="#beispiel-apache-webserver"></a>
</h4>
<p>Um einen Apache Webserver in einem Docker-Container zu starten,
können Sie den folgenden Befehl verwenden:</p>
<ul>
<li>
<p><strong>Starten des Containers</strong>:
<code>sudo docker run -dit --name apache -p 8080:80 -v "$PWD":/usr/local/apache2/htdocs/ httpd:2.4</code></p>
<ul>
<li>
<code>-dit</code>: Startet den Container im Hintergrund und behält
die Terminalsitzung offen.</li>
<li>
<code>--name apache</code>: Gibt dem Container den Namen
<code>apache</code>.</li>
<li>
<code>-p 8080:80</code>: Bindet den Port 8080 auf dem Host-System an
den Port 80 im Container.</li>
<li>
<code>-v "$PWD":/usr/local/apache2/htdocs/</code>: Bindet das
aktuelle Arbeitsverzeichnis (“Working directory: <code>pwd</code>) auf
dem Host-System an das Verzeichnis
<code>/usr/local/apache2/htdocs/</code> im Container.</li>
<li>
<code>httpd:2.4</code>: Verwendet das Image <code>httpd</code> mit
dem tag <code>2.4</code>.</li>
</ul>
</li>
<li><p><strong>Ansprechen des Containers</strong>: Um zu überprüfen, ob
der Apache Webserver läuft, können Sie den folgenden Befehl verwenden:
<code>curl localhost:8080</code> Dieser Befehl sendet eine HTTP-Anfrage
an den Apache-Container und gibt die Antwort auf der Kommandozeile
zurück.</p></li>
<li><p><strong>Stoppen des Containers</strong>: Um den Apache
Webserver-Container zu stoppen, können Sie den folgenden Befehl
verwenden: <code>docker stop apache</code></p></li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Hauptpunkte</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>durch Virtualisierung können Ressourcen effektiver genutzt
werden</li>
<li>Container bieten eine performante Virtualisierungslösung an</li>
<li>mit Docker können verschiedene Anwendungen in isolierten Umgebungen
(Containern) auf demselben System betrieben werden</li>
<li>Mit Docker Netzwerken kann die Kommunikation zwischen Containern und
dem Host gesteuert werden</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div>
</section></section><section id="aio-07-docker-compose"><p>Content from <a href="07-docker-compose.html">Docker compose</a></p>
<hr>
<p>Zuletzt aktualisiert am 2025-10-21 |

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/episodes/07-docker-compose.Rmd" class="external-link">Diese Seite bearbeiten <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Geschätzte Zeit: <i aria-hidden="true" data-feather="clock"></i> 135 Minuten</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Alle Lösungen anzeigen " data-collapse="Alle Lösungen ausblenden "> Alle Lösungen anzeigen <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Übersicht</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Fragen</h3>
<ul>
<li><p>Muss ich Container immer mit dem komplexen
<code>docker run</code>-Befehl starten?</p></li>
<li><p>Wie kann ich mehrere Container auf einmal starten?</p></li>
<li><p>Wie funktioniert Docker Compose?</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Ziele</h3>
<ul>
<li>Grundlegende Befehle für docker compose</li>
<li>Syntax von docker-compose.yml-Dateien</li>
<li>Docker-Projekte mit mehreren Containern als
Docker-Compose-Projekt</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="docker-run-versus-docker-compose">
<code>docker run</code> versus <code>docker compose</code>
<a class="anchor" aria-label="anchor" href="#docker-run-versus-docker-compose"></a>
</h2>
<hr class="half-width">
<p>In <a href="06-docker-basics.html">Lektion 6: Docker Grundlagen</a>
wurde gezeigt, wie mit dem <code>docker run</code>-Befehl einzelne
Container erstellt werden können. Allerdings kann der Befehl recht
komplex werden, wenn Portmappings, Volumes, Umgebungsvariablen und
Netzwerk hinzukommen. Um die langen Befehle nicht immer von neuem zu
tippen, können sie in eine Konfigurationsdatei
(<code>compose.yaml</code> oder <code>docker-compose.yaml</code>)
geschrieben werden. Diese wiederum kann mit dem
<code>docker compose</code>-Befehl gelesen und ausgeführt werden. Um
Docker Compose nutzen zu können, muss dies installiert werden. Folgt man
der offiziellen Installationsanleitung für die Docker Engine (siehe <a href="06-docker-basics.html#installation">Lektion 6</a>), ist docker
compose bereits installiert. Dies kann z.B. mit
<code>docker compose -v</code> überprüft werden.</p>
<p>Allerdings müssen die Befehle in einer bestimmten Syntax, der
YAML-Syntax geschrieben werden.</p>
<div class="section level3">
<h3 id="vorteile">Vorteile:<a class="anchor" aria-label="anchor" href="#vorteile"></a>
</h3>
<ul>
<li><p><strong>Gemeinsame Verwaltung mehrerer Container:</strong> Mit
Docker Compose können mehrere Container in einer einzigen YAML-Datei
definiert werden.</p></li>
<li><p><strong>Verwaltung:</strong> Mit Docker Compose können alle
Container der YAML-Datei mit einem einzigen Befehl verwaltet werden.
Dies macht es einfacher, Container zu starten, zu stoppen oder zu
aktualisieren.</p></li>
<li><p><strong>Kommunikation:</strong> Alle Container der YAML-Datei
sind standardmäßig in einem dedizierten Bridge-Netzwerk isoliert. Dies
erleichtert die Kommunikation zwischen den Containern und erhöht
gleichzeitig die Sicherheit durch die Trennung von anderen
Compose-Projekten.</p></li>
<li><p><strong>Nachhaltiger:</strong> Da die YAML-Datei leicht einsehbar
ist und weitergegeben werden kann, ist Docker Compose eine nachhaltigere
Lösung als der <code>docker run</code>-Befehl.</p></li>
<li><p><strong>Anpassbar:</strong> Docker Compose ist einfach anpassbar,
da nur die YAML-Datei geändert werden muss, um die Konfiguration der
Container anzupassen.</p></li>
<li><p><strong>Gut steuerbar:</strong> Mit der Docker CLI besteht durch
den <code>docker compose</code>-Befehl eine einfache Möglichkeit, die
Docker-Container des Compose-Projekts zu starten, zu stoppen oder zu
aktualisieren: <code>docker compose up</code>,
<code>docker compose down</code>, <code>docker compose restart</code>,
<code>docker compose start</code> und
<code>docker compose stop</code>.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="nachteile">Nachteile:<a class="anchor" aria-label="anchor" href="#nachteile"></a>
</h3>
<p>Der größte Nachteil von docker compose ist, dass zum Starten eines
Containers erst eine Konfigurationsdatei im YAML-Syntax erstellt werden
muss. Sobald diese einmal erstellt ist, ist dieser Nachteil aber
überwunden.</p>
</div>
<div class="section level3">
<h3 id="yaml-syntax">YAML-Syntax<a class="anchor" aria-label="anchor" href="#yaml-syntax"></a>
</h3>
<p>YAML ist eine einfache und leicht lesbares Dateiformat zur
strukturierten Abbildung von Daten. Die YAML-Syntax wird in vielen
Bereichen, einschließlich Docker, verwendet um Konfigurationsdateien zu
verfassen.</p>
<p>Die grundlegende Syntax von YAML besteht aus Key-Value-Paaren:
<code>key: value</code>, z.B. <code>image: nginx</code>. Dabei wird auch
von Maps gesprochen. Im vorhergehenden Beispiel wird die Map “Image”
erstellt. Eine Map kann aber außer einem Value auch eine Liste
enthalten:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="at">  </span><span class="fu">image</span><span class="kw">:</span><span class="at"> &lt;image&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> 80:80</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> 443:443</span></span></code></pre>
</div>
<p>Dieser Auszug einer compose-Datei zeigt die “ports”-Map mit zwei
Listeneinträgen. Der entsprechende <code>docker run</code>-Befehl würde
wie folgt lauten:
<code>docker run &lt;image&gt; -p 80:80 -p 443:443</code></p>
<p>Um der Konfigurationsdatei Informationen und Erklärungen
hinzuzufügen, erlaubt die YAML-Syntax Kommentare: alle Zeilen, die mit
<code>#</code> beginnen werden als Kommentar betrachet.</p>
<p>Wichtige Keys in Docker Compose sind:</p>
<ul>
<li>
<code>services</code>: Top-Level-Map, die eine pro zu startendem
Service eine weitere Map enthält. Ein Service entspricht dabei einem
Container.</li>
<li>Die Maps pro Service haben dann weitere Parameter, teils als weitere
Maps, teils als Liste. Wichtig sind dabei:</li>
<li>
<code>image</code> für die Angabe des Dockerimages</li>
<li>
<code>dockerfile</code> für die Angabe eines manuell erstellten
Dockerfiles (mehr dazu später)</li>
<li>
<code>ports</code> für die Angabe des Portmappings</li>
<li>
<code>networks</code> für die Angabe des Netzwerks, in welchem der
Container sich befinden soll</li>
<li>
<code>environment</code> um Umgebungsvariablen zu definieren</li>
<li>
<code>volumes</code> um Dateien/Ordner des Hosts in den Container zu
binden</li>
<li>
<code>networks</code>: Findet sich der Key <code>networks</code> auf
obererster Ebene, dient er der Erstellung eines Docker-Netzwerks oder
der Verbindung zu einem zuvor außerhalb von Compose erstellten
Docker-Netzwerks.</li>
</ul>
<p>Ein Beispiel für eine <code>compose.yaml</code>-Datei könnte wie
folgt aussehen:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="at">  </span><span class="fu">frontend</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx:latest</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"80:80"</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> web</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> NGINX_PORT=80</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./html:/usr/share/nginx/html</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> web</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="at">    </span><span class="fu">external</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre>
</div>
<p>In diesem Beispiel definiert die <code>compose.yaml</code>-Datei
einen Service namens <code>frontend</code>, der auf einem Nginx-Image
basiert und auf Port 80 hört. Der Service ist Teil des Netzwerks
<code>web</code> und hat eine Umgebungsvariable namens
<code>NGINX_PORT</code>. Der Service hat auch einen Volume-Mount, der
auf eine lokale Datei <code>./html</code> verweist. Am Ende wird in der
Network-Map das Netzwerk web als extern definiert (es muss also zuvor
mit <code>docker network create web</code> erstellt worden sein).</p>
<p>Viele Softwareprojekte stellen compose.yaml-Dateien für ihre Dienste
bereits in Handbüchern oder als Teil des Source-Codes zur Verfügung
(z.B. <a href="https://jellyfin.org/docs/general/installation/container/?method=docker-compose" class="external-link">Jellyfin</a>,
<a href="https://github.com/nextcloud/docker/blob/master/.examples/docker-compose/with-nginx-proxy/mariadb/fpm/compose.yaml" class="external-link">Nextcloud</a>
oder <a href="https://nginxproxymanager.com/setup/" class="external-link">Nginx Proxy
Manager</a>). Diese Vorlagen müssen meistens noch den eigenen
Gegebenheiten angepasst werden oder können mit weiteren Services ergänzt
werden.</p>
<p>Weitere Informationen zur YAML-Syntax finden sich z.B: bei <a href="https://www.redhat.com/de/topics/automation/what-is-yaml" class="external-link">Red
Hat</a> und dockerspezifische Infos im <a href="https://docs.docker.com/compose/intro/compose-application-model/" class="external-link">Handbuch</a></p>
</div>
<div class="section level3">
<h3 id="umgebungsvariablen">Umgebungsvariablen<a class="anchor" aria-label="anchor" href="#umgebungsvariablen"></a>
</h3>
<p>Docker ermöglicht es, einem Container beim Start vordefinierte Werte
für bestimmte Einstellungsparameter mitzugeben, z.B.
Verbindungsinformationen für eine Datenbank. Diese Umgebungsvariablen
können entweder in der compose.yaml-Datei als Liste innerhalb der Map
<code>environment</code> genannt werden oder in einer eigenen
Konfigurationsdatei auflistet werden. Standardmäßig sucht Docker Compose
nach der Datei mit dem Nachem <code>.env</code>. Man kann diese aber
auch anders bennenen und in der Compose-Datei darauf verweisen. Die
Variablen können dann an mehreren Stellen der Compose-Datei als
Platzhalter verwendet werden.</p>
<div class="section level4">
<h4 id="compose-yaml-mit-environment-map">Compose.yaml mit environment-Map<a class="anchor" aria-label="anchor" href="#compose-yaml-mit-environment-map"></a>
</h4>
<p>Hier ein Beispiel für eine <code>compose.yaml</code>-Datei für einen
Webservice, welcher sich mit einer Datenbank verbindet. Dei
Verbindungsinformationen kommen aus einem environment Eintrag, müssen
jedoch für beide Services erklärt werden.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">'3'</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> web-app</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"5000:5000"</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> DATABASE_USER=db_user</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> DATABASE_PASSWORD=db_password</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> DATABASE_HOST=db</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> DATABASE_NAME=my_db</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="at">    </span><span class="fu">depends_on</span><span class="kw">:</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> db</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="at">  </span><span class="fu">db</span><span class="kw">:</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> mariadb</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> MYSQL_USER=db_user</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> MYSQL_PASSWORD=db_password</span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> MYSQL_DATABASE=my_db</span></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> MYSQL_ROOT_PASSWORD=root_password</span></span></code></pre>
</div>
<p>In diesem Beispiel gibt es zwei Dienste: <code>web</code> und
<code>db</code>. Der <code>web</code>-Dienst verwendet das (erfundene)
<code>web-app</code>-Image und macht den Port 5000 verfügbar. Der
<code>db</code>-Dienst verwendet das <code>mariadb</code>-Image und
erstellt eine Datenbank mit dem Namen <code>my_db</code>.</p>
<p>Der <code>web</code>-Dienst hat einen
<code>environment</code>-Eintrag, der die <code>DATABASE_USER</code>,
<code>DATABASE_PASSWORD</code>, <code>DATABASE_HOST</code> und
<code>DATABASE_NAME</code>-Variablen setzt. Diese Variablen werden
verwendet, um die Verbindung zur Datenbank herzustellen.</p>
<p>Der <code>db</code>-Dienst hat auch einen
<code>environment</code>-Eintrag, der die <code>MYSQL_USER</code>,
<code>MYSQL_PASSWORD</code>, <code>MYSQL_DATABASE</code> und
<code>MYSQL_ROOT_PASSWORD</code>-Variablen setzt. Diese Variablen werden
verwendet, um den Benutzernamen, das Passwort, den Datenbanknamen und
das Root-Passwort für die MariaDB-Datenbank zu konfigurieren.</p>
<p>Der <code>web</code>-Dienst hat auch einen
<code>depends_on</code>-Eintrag, der angibt, dass er vom
<code>db</code>-Dienst abhängig ist. Das bedeutet, dass der
<code>db</code>-Dienst gestartet wird, bevor der <code>web</code>-Dienst
gestartet wird.</p>
</div>
<div class="section level4">
<h4 id="compose-yaml-mit-externer--env-datei-für-variablen">Compose.yaml mit externer .env-Datei für Variablen<a class="anchor" aria-label="anchor" href="#compose-yaml-mit-externer--env-datei-f%C3%BCr-variablen"></a>
</h4>
<p>Eleganter ist in diesem Beispiel die Nutzung einer dedizierten
<code>.env</code>-Datei (hier mit dem Namen <code>variables.env</code>
):</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="at">DATABASE_USER=db_user</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="at">DATABASE_PASSWORD=db_password</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="at">DATABASE_HOST=db</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="at">DATABASE_NAME=my_db</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="at">MYSQL_USER=db_user</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="at">MYSQL_PASSWORD=db_password</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="at">MYSQL_DATABASE=my_db</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="at">MYSQL_ROOT_PASSWORD=root_password</span></span></code></pre>
</div>
<p>Durch den Verweis auf diese Datei in der compose.yaml-Datei, müssen
die Variablen nur einmal geschrieben werden:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">'3'</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> my-web-app</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"5000:5000"</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="at">    </span><span class="fu">env_file</span><span class="kw">:</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> variables.env</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="at">    </span><span class="fu">depends_on</span><span class="kw">:</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> db</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="at">  </span><span class="fu">db</span><span class="kw">:</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> mariadb</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="at">    </span><span class="fu">env_file</span><span class="kw">:</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> variables.env</span></span></code></pre>
</div>
<p>Ändert sich der Wert einer der genannten Variablen, genügt es bei
diesem Setup, nur in der variables.env-Datei die Änderung
einzutragen.</p>
</div>
</div>
<div class="section level3">
<h3 id="compose-projekte-steuern">Compose Projekte steuern<a class="anchor" aria-label="anchor" href="#compose-projekte-steuern"></a>
</h3>
<p>Mit dem <code>docker compose</code>-Befehl können die in der
compose.yaml-Datei definierten Services gesteuert werden.</p>
<p>Die grundlegenden docker-compose-Befehle sind:</p>
<ul>
<li>
<code>docker compose up</code>: Startet alle in der
<code>docker-compose.yml</code>-Datei definierten Dienste im
Vordergrund</li>
<li>
<code>docker compose down</code>: Beendet alle Dienste und entfernt
alle Container.</li>
<li>
<code>docker compose restart</code>: Beendet alle Dienste und
startet sie neu.</li>
<li>
<code>docker compose start</code>: Startet alle Dienste.</li>
<li>
<code>docker compose stop</code>: Beendet alle Dienste.</li>
<li>
<code>docker compose up -d</code>: startet alle Container im
Hintergrund</li>
<li>
<code>docker compose ps</code>: zeigt den Status der Dienste an</li>
<li>
<code>docker compose exec</code>: ermöglicht es, einen Befehl in
einem Docker-Container auszuführen. Zum Beispiel:
<code>docker-compose exec &lt;container-name&gt; bash</code>.</li>
</ul>
<p>Allen Befehlen kann auch ein expliziter Container-Name mitgegeben, um
die Aktion nur auf diesen Container anzuwenden, z.B.
<code>docker compose restart nginx</code></p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Hauptpunkte</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li><p>Mit Docker Compose können Dockercontainer effektiver verwaltet
werden</p></li>
<li><p>Docker Compose benötigt die
compose.yaml-Konfigurationsdatei</p></li>
<li><p>Diese compose.yaml-Datei verwendet den YAML-Syntax</p></li>
<li><p>die Steuerung erfolgt mit dem Befehl
<code>docker compose</code></p></li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-08-webserver-docker-compose"><p>Content from <a href="08-webserver-docker-compose.html">Webserver mit Docker Compose</a></p>
<hr>
<p>Zuletzt aktualisiert am 2025-10-21 |

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/episodes/08-webserver-docker-compose.Rmd" class="external-link">Diese Seite bearbeiten <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Geschätzte Zeit: <i aria-hidden="true" data-feather="clock"></i> 12 Minuten</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Alle Lösungen anzeigen " data-collapse="Alle Lösungen ausblenden "> Alle Lösungen anzeigen <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Übersicht</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Fragen</h3>
<ul>
<li><p>Wie können Webapplikation im Internet erreichbar gemacht
werden?</p></li>
<li><p>Wie funktionieren Webserver?</p></li>
<li><p>Wie sichere ich die Kommunikation ab?</p></li>
<li><p>Wie kann ein Webserver in Docker Compose erstellt werden</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Ziele</h3>
<ul>
<li>Grundlagen von Webservern</li>
<li>Domainnamen mit DDNS erhalten</li>
<li>TLS-Zertifikate mit Letsencrypt erhalten</li>
<li>Webserver mit Docker compose erstellen</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="allgemeines-zu-webservern">Allgemeines zu Webservern<a class="anchor" aria-label="anchor" href="#allgemeines-zu-webservern"></a>
</h2>
<hr class="half-width">
<p>Webserver sind Softwarekomponenten, die auf Anfragen von Clients
(z.B. Browsern) reagieren und diese Anfragen an eine Webapplikation
(oder weitere Webserver) weiterleiten. Damit spielen sie eine wichtige
Rolle in der Bereitstellung von Webapplikationen.</p>
<p>Abhängig von der angefragten Domain (<code>uni-tuebingen.de</code>)
oder der konkreten Datei (<code>uni-tuebingen.de/index.html</code>) wird
der Webserver Dateien zurück liefern, an eine Webapplikation
weiterleiten oder Funktionen ausführen. Dies ermöglicht es auch, mehrere
Webapplikationen auf einem einzigen Server zu hosten und den
Datenverkehr effizient zu verwalten.</p>
<p>Durch die Überwachung der Verbindung zwischen Client und
Webapplikation kann sichergestellt werden, dass die Verbindung stabil
und zuverlässig ist. Für Verbindungen über das Internet oder andere
unsichere Netzwerke sollte immer eine verschlüsselte Kommunikation
aufgebaut werden. Diese wird ebenfalls im Webserver konfiguriert (z.B.
mit TLS-Zertifikaten für die HTTPS-Verbindung).</p>
<p>Webserver können auch die Authentifizierung von Benutzern ermöglichen
oder Anfragen auf Basis bestimmter Kriterien (z.B. Herkunft der
IP-Adresse oder Anfragehäufigkeit) blockieren. Dadurch kann
unerwünschter Traffic blockiert werden, die Leistung der Webapplikation
verbessert werden und die Sicherheit erhöht.</p>
<p>Eine weitere Funktionalität ist das Load-Balancing. Hierbei kann ein
Webserver große Mengen an angefragten Daten auf mehrere sogenannten
Upstream-Server verteilen, um die Last je Server in Grenzen zu
halten.</p>
<p>Da der Webserver der zentrale Kommunikationsknoten zwischen
Webapplikation und Client ist, ist dessen Konfiguration für die
Sicherheit und Stabilität der Webapplikation (bzw. der Kommunikation mit
dieser) äußerst wichtig. Die genaue Konfiguration eines Webservers ist
jeweils abhängig vom genauen Einsatzzweck. Für viele Webapplikationen
stellen die Hersteller Vorlagen für Konfigurationen der Webserver
bereit.</p>
<p>Einige wichtige Webserver sind:</p>
<ul>
<li>Nginx (offene Lizenz, modern, eher leichtgewichtig, weit
verbreitet)</li>
<li>Apache2 (offene Lizenz, der “Dinosaurier” unter den Webserver,
performant, weit verbreitet)</li>
<li>Microsoft IIS (proprietär)</li>
<li>Google Web Server (proprietär, nur von Google-Diensten
verwendet)</li>
</ul></section><section><h2 class="section-heading" id="externer-zugriff">Externer Zugriff<a class="anchor" aria-label="anchor" href="#externer-zugriff"></a>
</h2>
<hr class="half-width">
<p>Um einen Webserver aus dem Internet erreichen zu können, muss der
Server, auf welchem die Webserver-Software installiert ist, und das
Netzwerk in welchem sich der Server befindet eine öffentliche IP-Adresse
und idealerweise auch einen öffentlich bekannten Domainnamen haben.</p>
<p>Für diesen Kurs ist der Hypervisor, auf welchem die virtuellen Server
laufen, über eine IP-Adresse im Internet erreichbar. Ein zentraler
Webserver ist als Proxy-Server konfiguriert und leitet Anfragen abhängig
von der angefragten Domain intern an die jeweilige virtuelle Maschine
weiter. Dort muss dann ein eigener Webserver die Anfrage annehmen und
verarbeiten.</p>
<p>Allerdings müssen Sie eine Domain für Ihren Server konfigurieren.
Hierzu kann kostenpflichtig eine vollwertige Domain erworben werden
(<code>domain.de</code>) oder man nutzt kostenlose DDNS-Dienste
(DDNS=Dynamic Domain Name System).</p>
<p>DDNS funktioniert unter Zuhilfenahme eines externen Dienstleisters.
Bei diesem wird eine Subdomain beantragt, z.B.
<em>server.ddns-anbieter.de</em>. Auf dem eigenen Server kann das
Programm <strong>DDClient</strong> installiert werden. Dieses
kontaktiert regelmäßig eine Internetseite und erhält von dieser die
eigene öffentliche IP-Adresse als Echo zurück. Dadurch erfährt DDClient,
unter welcher IP-Adresse der Server erreichbar ist und schickt diese an
den DDNS-Anbieter, bei welchem die eigene Domain beantragt wurde. Dieser
Anbieter wiederum trägt die IP-Adresse in seinem DNS ein und macht
dadurch die IP-Adresse zur Domain öffentlich bekannt.</p>
<div id="dns" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Wichtig</span>
<div id="dns" class="callout-inner">
<h3 class="callout-title">DNS</h3>
<div class="callout-content">
<p><strong>DNS</strong> kann als Telefonbuch des Internets verstanden
werden, in welchem IP-Adressen in Domainnamen übersetzt werden, z.B.
wird die IP-Adresse 49.13.55.174. in <a href="https://wikipedia.de" class="external-link">wikipedia.de</a> übersetzt. Mehr zum Thema
DNS findet sich z.B. beim <a href="https://www.elektronik-kompendium.de/sites/net/0901141.htm" class="external-link">Elektronikkompendium</a>.</p>
</div>
</div>
</div>
<p>Ruft ein Computer die Adresse <em>server.ddns-anbieter.de</em> auf,
wird im DNS des DDNS-Anbieters die öffentliche IP-Adresse des Servers
(in unserem Fall die Adresse des zentralen Proxy-Servers) ausgelesen und
übermittelt. Dadurch wird die Anfrage an die richtige IP-Adresse
geschickt.</p>
<p>Es gibt verschiedene Anbieter für DDNS-Dienste. Gut geeignet sind
z.B. <a href="https://noip.com" class="external-link">No-IP</a> oder <a href="https://www.ddnss.de/" class="external-link">DDNSS</a>.</p>
<p>DDNS wird eigentlich primär verwendet, um an privaten
Internetanschlüssen, die häufig eine sich änderende IP-Adresse haben,
immer über die gleiche Domain erreichbar zu sein. Im Fall des Kurses ist
eine statische öffentliche IP-Adresse vorhanden und es wäre sauberer
eine ordentliche Domain zu kaufen (oder im Rechenzentrum der Universität
zu beantragen). Für die Testzwecke dieses Kurses genügt aber eine
DDNS-Domain. Zeitgleich kann die damit erlernte Technik auch gut für
Zwecke des Selfhostings im heimischen Wohnzimmer oder kleinen Büros ohne
statische IP-Adresse angewendet werden.</p>
<div class="section level3">
<h3 id="umsetzung-ddns-unter-ubuntu">Umsetzung DDNS unter Ubuntu<a class="anchor" aria-label="anchor" href="#umsetzung-ddns-unter-ubuntu"></a>
</h3>
<p>Für die Implementierung des DDNS-Verfahrens wird wie folgt
vorgegangen:</p>
<ul>
<li><p>Account bei einem DDNS-Anbieter registrieren</p></li>
<li><p>Im Falle von <em>No-IP</em> muss im <a href="https://noip.com" class="external-link">Webportal</a> des Anbieters nach der
Registrierung noch ein Benutzername festgelegt werden</p></li>
<li><p>Beim gewählten Anbieter muss ein Domainname reserviert werden
(A-Record für IPv4 oder AAAA-Record für IPv6)</p></li>
<li>
<p>ddclient auf dem Server installieren und konfigurieren:
<code>sudo apt-get install ddclient</code></p>
<ul>
<li><p>Im Anschließenden Dialog wird im Falle von No-IP <em>no-ip</em>
gewählt, ansonsten <em>anderer</em></p></li>
<li><p>als Benutzername und Passwort werden die Zugangsdaten des
DDNS-Anbieters eingetragen</p></li>
<li><p>als <em>IP-Adressen-Ermittlungsmethode</em> wird
<em>Web-basierter IP-Ermittlungsdienst</em> gewählt</p></li>
<li><p>der zu aktualisierende Rechner ist der beim DDNS-Anbieter
reservierte Domainnamen</p></li>
</ul>
</li>
</ul>
<figure><img src="../fig/08_ddclient01.png" alt="Konfigurationsdialog von DDClient. Es stehen mehrere DDNS-Anbieter zur Auswahl. Hervorgehoben ist no-ip.com" class="figure mx-auto d-block"><div class="figcaption">DDClient konfigurieren 1: Anbieter
auswählen</div>
</figure><figure><img src="../fig/08_ddclient02.png" alt="Konfigurationsdialog von DDClient: festlegen der IP-Ermittlungsmethode, hervorgehoben ist die Option web-basierter IP-Ermittlungsdienst" class="figure mx-auto d-block"><div class="figcaption">DDClient konfigurieren 2:
Ermittlungsmehode</div>
</figure><figure><img src="../fig/08_ddclient03.png" alt="Konfigurationsdialog von DDClient: eingabe des Domainnamens, als Platzhalter ist server.ddns-anbieter.de zu sehen" class="figure mx-auto d-block"><div class="figcaption">DDClient konfigurieren 3: Domainname</div>
</figure><p>Nach der Installation sollte die <strong>Konfigurationsdatei</strong>
überprüft und ggf. angepasst werden:
<code>sudo nano /etc/ddclient.conf</code>. Je nach DDNS-Anbieter sieht
die Konfigurationsdatei unterschiedlich aus.</p>
<div class="tabs">
<nav><div id="nav-tab-1" class="nav nav-tabs" role="tablist">
<button class="nav-link active" id="nav-tab-1-1" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-1" type="button" role="tab" aria-controls="nav-tabpanel-1-1" aria-selected="true">
  <h3 class="tab-header" id="nav-tab-heading-1-1">
  DDNSS.de
  </h3>
</button>
<button class="nav-link" id="nav-tab-1-2" data-bs-toggle="tab" data-bs-target="#nav-tabpanel-1-2" type="button" role="tab" aria-controls="nav-tabpanel-1-2" aria-selected="false">
  <h3 class="tab-header" id="nav-tab-heading-1-2">
  NO-IP:
  </h3>
</button>
</div>
</nav><div id="nav-tabContent-1" class="tab-content">
<div id="nav-tabpanel-1-1" class="tab-pane show active" aria-labelledby="nav-tab-1-1" role="tabpanel">
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co">#für ddnss.de</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="va">protocol</span><span class="op">=</span>dyndns2</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="va">use</span><span class="op">=</span>web, <span class="va">web</span><span class="op">=</span>https://api.ipify.org/ </span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="va">server</span><span class="op">=</span>ddnss.de</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="va">login</span><span class="op">=&lt;</span>DDNSSLoginName<span class="op">&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="va">password</span><span class="op">=</span><span class="st">'&lt;Passwort&gt;'</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="op">&lt;</span>domainname<span class="op">&gt;</span>.ddnss.de</span></code></pre>
</div>
</div>
<div id="nav-tabpanel-1-2" class="tab-pane" aria-labelledby="nav-tab-1-2" role="tabpanel">
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co">#NO-IP.com</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="va">protocol</span><span class="op">=</span>noip</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="va">use</span><span class="op">=</span>web, <span class="va">web</span><span class="op">=</span>http://ip1.dynupdate.no-ip.com/</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="va">login</span><span class="op">=&lt;</span>noip-username<span class="op">&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="va">password</span><span class="op">=</span>’<span class="op">&lt;</span>noip-passwort<span class="op">&gt;</span>’</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="op">&lt;</span>noip-Domainname<span class="op">&gt;</span></span></code></pre>
</div>
</div>
</div>
</div>
<p>Wird die Konfigurationsdatei manuell geändert, muss ddclient neu
gestartet werden:
<code>sudo systemctl restart ddclient.service</code></p>
</div>
</section><section><h2 class="section-heading" id="webserver-mit-docker">Webserver mit Docker<a class="anchor" aria-label="anchor" href="#webserver-mit-docker"></a>
</h2>
<hr class="half-width">
<p>Damit auf dem eigenen Server auf Anfragen aus dem Internet auch
reagiert wird, muss ein Webserver installiert werden. Dazu kann in einem
Docker Compose Projekt der Apache-Webserver installiert werden. Um die
Grundfunktionalität zu testen, wird vorerst keine besondere
Konfiguration vorgenommen.</p>
<div class="section level3">
<h3 id="docker-compose-projekt-erstellen">Docker Compose Projekt erstellen<a class="anchor" aria-label="anchor" href="#docker-compose-projekt-erstellen"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>Arbeitsverzeichnis anlegen: z.B.
<code>sudo mkdir /opt/apache-docker/</code> und
<code>sudo chown &lt;username&gt;:&lt;username&gt; /opt/apache-docker</code></p></li>
<li><p>Ins Arbeitsverzeichnis wechseln (<code>cd</code>-
Befehl)</p></li>
<li><p>Dort die Compose-Datei erstellen
(<code>nano compose.yaml</code>)</p></li>
</ol>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">apache</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="at">  </span><span class="fu">image</span><span class="kw">:</span><span class="at"> httpd:latest</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="at">  </span><span class="fu">container_name</span><span class="kw">:</span><span class="at"> apache</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">'80:80'</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="at">  </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> ./website:/usr/local/apache2/htdocs</span></span></code></pre>
</div>
<ol start="4" style="list-style-type: decimal">
<li><p>Volume-Verzeichnis für den Datenaustausch mit dem Container
erstellen: <code>mkdir website</code></p></li>
<li><p>Website-Beispiel erstellen: <code>nano website/index.html</code>,
z.B. wie folgt</p></li>
</ol>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">HTML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode html" tabindex="0"><code class="sourceCode html"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Apache-Test<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>        body {</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>            <span class="kw">font-family</span><span class="ch">:</span> <span class="dv">Arial</span><span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>        }</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>        h1 {</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>            <span class="kw">color</span><span class="ch">:</span> <span class="cn">blue</span><span class="op">;</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>        }</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>        p {</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>            <span class="kw">font-size</span><span class="ch">:</span> <span class="dv">18</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>        }</span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>Welcome to Apache-Test<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>This is a simple paragraph to test the Apache server.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre>
</div>
<ol start="6" style="list-style-type: decimal">
<li><p>Docker Container starten: <code>sudo docker compose up</code>
oder im Hintergrund <code>sudo docker compose up -d</code></p></li>
<li><p>Erreichbarkeit testen: öffnen Sie auf einem Endgerät im
Webbrowser ihre registrierte DDNS-Domain. Wird Ihnen die
Beispiel-HTML-Datei angezeigt?</p></li>
<li><p>Container stoppen: <code>STRG</code>+ <code>c</code> oder im
Hintergrund <code>sudo docker compose down</code></p></li>
</ol>
</div>
<div class="section level3">
<h3 id="tls-verschlüsselung">TLS-Verschlüsselung<a class="anchor" aria-label="anchor" href="#tls-verschl%C3%BCsselung"></a>
</h3>
<div class="section level4">
<h4 id="kommunikationsweg">Kommunikationsweg:<a class="anchor" aria-label="anchor" href="#kommunikationsweg"></a>
</h4>
<p>Aktuell erfolgt die Kommunikation mit dem Server über das
HTTP-Protokoll mit Port 80. Diese Verbindung ist unverschlüsselt. Das
bedeutet, dass sämtliche Daten (z.B. Passwörter und Dateien) die zum
Server geschickt oder vom Server verschickt werden, von einem “Zuhörer”
auf der Leitung mitgelesen werden können (das geht z.B. mit dem Tool <a href="https://www.wireshark.org/about.html" class="external-link">Wireshark</a> v.a. im LAN
recht einfach, siehe z.B. diese Anleitung von <a href="https://www.varonis.com/de/blog/verwendung-von-wireshark" class="external-link">Varonis</a>).</p>
</div>
<div class="section level4">
<h4 id="grundlagen-der-https-verbindung">Grundlagen der HTTPS-Verbindung<a class="anchor" aria-label="anchor" href="#grundlagen-der-https-verbindung"></a>
</h4>
<p>Um das Auslesen der Verbindung und damit das Abfangen sämtlicher
Kommunikation zu unterbinden, muss die Verbindung verschlüsselt werden.
Um eine HTTP-Verbindung zu verschlüsseln wird diese durch das
TLS-Protokoll zu einer HTTP<strong>S</strong>-Verbindung erweitert.
HTTPS ist heute glücklicherweise der Standard bei den meisten
Internetseiten. Dass Sie eine HTTPS-Verbindung zu einer Seite aufgebaut
haben, erkennen Sie in der Adresszeile Ihres Browsers anhand eines
Schlosssymbols, bei besonders starken Zertifikaten ggf. zusätzlich auch
anhand einer grünen Markierung (siehe die folgende Abbildung).</p>
<figure><img src="../fig/08_https-browser.png" alt="Browseradresszeile mit der Adresse https://uni-tuebingen.de. Durch ein Schlosssymbol wird die https-Verbindung dargestellt." class="figure mx-auto d-block"><div class="figcaption">HTTPS-Verbindung im Browser. das Schloss zeigt
eine verschlüsselte HTTPS-Verbindung an</div>
</figure><p>Die Grundlage des TLS-Protokolls stellen Zertifikate dar, die die
Authentizität der Website bestätigen.</p>
<p>Dazu ein nicht technisches Vergleichsbeispiel: Sie wollen bei einem
Geschäftsvorgang die Identität des Gegenübers überprüfen. Zeigt Ihnen
die Person einen selbst ausgestellten Ausweis, werden Sie diesem
Personalausweis nicht vertrauen. Zeigt die Person jedoch einen Ausweis,
der von einer staatlichen Behörde ausgestellt wurde, welcher Sie
vertrauen, können Sie auch dem vorgelegten Ausweis vertrauen.</p>
<p>Übertragen auf die HTTPS-Verbindung sieht es wie folgt aus: Ein
Website-Betreiber kann sich selbst ein TLS-Zertifikat ausstellen (unter
Linux z.B. mit dem Programm <em>OpenSSL</em>) und dieses einem
anfragendem Webbrowser oder sonstigem Client präsentieren. Allerdings
kann einem solchen selbst ausgestellten Zertifikat nicht von Dritten
vertraut werden. Der Browser wird die Verbindung als unsicher ablehnen
und eine Warnmeldung zeigen. Damit ein Client dem Zertifikat vertrauen
kann, muss dieses genau wie beim Personalausweis von einer zentralen
Stelle ausgestellt werden. Diese zentralen Stellen (als
<em>Zertifizierungsstellen</em> oder im Englischen als <em>Certificate
Authority</em> bezeichnet) können auf Anfrage ein Zertifikat ausstellen,
sofern die Identität der anfragenden Stelle gewährleistet ist.</p>
<p>Gleichzeitig besitzt die Zertifizierungsstelle selbst ein Zertifikat,
dass deren Identität bestätigt. Dieses Zertifizierungsstellenzertifikat
wiederum ist vom Hersteller Ihres Betriebssystems auf Ihrem PC
hinterlegt und als vertrauenswürdig eingestuft worden. Überprüft Ihr
Browser nun das Zertifikat der Website, stellt er zunächst fest, dass
das präsentierte Zertifikat von einer Zertifizierungsstelle ausgestellt
wurde, welcher er vertraut. Außerdem wird überprüft, ob die aufgerufene
Adresse auch der im Zertifikat hinterlegten Adresse entspricht.</p>
<p>Rufen Sie eine Website auf, die ein falsches Zertifikat präsentiert
(z.B. für die falsche Adresse, ein abgelaufenes oder selbst
ausgestelltes Zertifikat), erhalten Sie eine Warnmeldung. Diese sollten
Sie ernst nehmen, da es auf einen Betrugsversuch hindeuten kann, in
welchem eine angreifende Person sich für die Website ausgibt, die Sie
eigentlich aufrufen wollten (z.B. die Seite Ihres Online-Bankings).</p>
<figure><img src="../fig/08_https-browser-unsecure.png" alt='Browserfenster, dass eine unsichere https-Verbindung zeigt, welche mit einer Warnung angezeigt wird: "Warnung: Mögliches Sicherheitsrisiko erkannt"' class="figure mx-auto d-block"><div class="figcaption">Fehlgeschlagene HTTPS-Verbindung im Browser mit
Sicherheitswarnung: die Verbindung schläg fehl, da die aufgerufne
Adresse (134.2.5.1) nicht der Adresse im Zertifikat entspricht
(ersichtlich nach Klick auf den Erweitert-Button)</div>
</figure>
</div>
<div class="section level4">
<h4 id="tls-verschlüsselung-einrichten">TLS-Verschlüsselung einrichten<a class="anchor" aria-label="anchor" href="#tls-verschl%C3%BCsselung-einrichten"></a>
</h4>
<p>Um die eigene Website per HTTPS erreichen zu können, muss der Server
ein Zertifikat von einer Zertifizierungsstelle erhalten, die von allen
Computern anerkannt ist. Während dies früher nur gegen Bezahlung möglich
war, existiert seit einigen Jahren mit <a href="https://letsencrypt.org/" class="external-link">Letsencrypt</a> ein gemeinnütziger
Anbieter, der kostenlose Zertifikate zur Verfügung stellt. Diese sind
jedoch nur <strong>drei Monate gültig</strong> und müssen dann
<strong>verlängert</strong> werden.</p>
<p>Um ein solches Zertifikat zu erhalten, muss man gegenüber Letsencrypt
nachweisen, dass man die Eigentümer der Domain ist, für welche das
Zertifikat angefragt wird. Das heißt: wenn Sie für die Adresse
<em>server.ddns-provider.de</em> ein Zertifikat erhalten wollen, müssen
Sie nachweisen, dass sie den Webserver, der die Seite
<em>server.ddns-provider.de</em> ausliefert, verwalten. Diesen Nachweis
erbringen Sie nicht manuell, sondern mit Hilfe verschiedener Programme
(z.B. Certbot). Mit diesen Programmen werden automatisiert einige
Informationen zwischen Ihrem Webserver und den Servern von Letsencrypt
ausgetauscht, anhand deren die Eigentümerschaft nachgewiesen werden
kann. Anschließend wird das Zertifikat von der Zertifizierungsstelle
(Letsencrypt) ausgestellt und kann dann in den eigenen Webserver
integriert werden.</p>
</div>
<div class="section level4">
<h4 id="zertifikat-erhalten">Zertifikat erhalten:<a class="anchor" aria-label="anchor" href="#zertifikat-erhalten"></a>
</h4>
<p>In Docker kann das Hilfsprogramm für den Erhalt des Zertifikats in
das Docker Compose Projekt integriert werden. Hierzu bestehen, wie eine
Internetrecherche schnell aufzeigen wird, verschiedene
Möglichkeiten.</p>
<p>Im Folgenden eine Möglichkeit, in welcher das Program certbot als
zweiter Container dem Docker Compose Projekt hinzugefügt wird:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="at">  </span><span class="fu">apache</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> httpd:latest</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="at">    </span><span class="fu">container_name</span><span class="kw">:</span><span class="at"> apache</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="st">'80:80'</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="st">'443:443'</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co">    #Beispiel-Internetseite</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> ./website:/usr/local/apache2/htdocs</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">    #Webinhalte für certbot challenge</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./certbot/www:/usr/local/apache2/htdocs:ro</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">    #Zertifikate</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./certbot/conf:/usr/local/apache2/ssl:ro</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> apache-net</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="at">  </span><span class="fu">certbot</span><span class="kw">:</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="at">    </span><span class="fu">container_name</span><span class="kw">:</span><span class="at"> apache-certbot</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> certbot/certbot:latest</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./certbot/www:/var/www/certbot:rw</span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./certbot/conf:/etc/letsencrypt:rw</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./certbot/log:/var/log/letsencrypt:rw</span></span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> apache-net</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a></span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a><span class="at">  </span><span class="fu">apache-net</span><span class="kw">:</span></span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> apache-net</span></span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a><span class="at">    </span><span class="fu">external</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre>
</div>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Schauen Sie sich die compose.yaml-Datei genau an. Was bewirken die
einzelnen Parameter?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Im Unterschied zum ersten einfachen Beispiel, ist in diesem Projekt
der certbot-Container als zweiter Dienst hinzugekommen. Außerdem hat der
Apache-Container zusätzliche Volumes erhalten. Certbot und Apache teilen
sich dabei einige der Volumes, da beide Container auf die Dateien
zugreifen müssen.</p>
</div>
</div>
</div>
</div>
<p>Um nun das Zertifikat zu erhalten, muss im Certbot-Container ein
Befehl abgesetzt werden. Dazu wird der
<code>docker compose run</code>-Befehl genutzt:
<code>sudo docker compose run --rm certbot certonly --webroot --webroot-path /var/www/certbot -d &lt;server.ddns-provider.de&gt;</code>
(eigenen Domainnamen nutzen).</p>
<p>Wurde das Zertifikat erhalten, kann es später mit folgendem Befehle
erneuert werden: <code>docker compose run --rm certbot renew</code></p>
</div>
<div class="section level4">
<h4 id="webserver-von-http-auf-https-umstellen">Webserver von HTTP auf HTTPS umstellen<a class="anchor" aria-label="anchor" href="#webserver-von-http-auf-https-umstellen"></a>
</h4>
<p>Um das Zertifikat für die Sicherung des eigenen Webservers zu nutzen,
müssen einige Konfigurationsschritte vorgenommen werden.</p>
<ol style="list-style-type: decimal">
<li><p>Apache-Konfigurationsdateien aus dem Container zum Host kopieren
(bei laufendem Container): `sudo docker cp
apache-docker:/usr/local/apache2/conf apache2/</p></li>
<li><p>Wurde das Zertifikat erhalten muss in der
<strong>Firewall</strong> Port 80 geschlossen und Port 443 geöffnet
werden.</p></li>
<li><p>Konfigurationsdatei für die Test-Webseite erstellen:
<code>nano apache2/conf/webseite.conf</code></p></li>
</ol>
<pre class="apacheconf"><code>&lt;VirtualHost *:80&gt;
  DocumentRoot /usr/local/apache2/htdocs
  ServerName  server.ddns-provider.de

  RewriteEngine on
  RewriteCond %{SERVER_NAME} =server.ddns-provider.de
  RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
&lt;/VirtualHost&gt;

&lt;VirtualHost *:443&gt;
  DocumentRoot /usr/local/apache2/htdocs
  ServerName  server.ddns-provider.de
  SSLCertificateFile /usr/local/apache2/ssl/live/server.ddns-provider.de/fullchain.pem
  SSLCertificateKeyFile /usr/local/apache2/ssl/live/server.ddns-provider.de/privkey.pem
&lt;/VirtualHost&gt;</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Angepasste Apache-Konfiguration über die compose.yaml Datei
einbinden:</li>
</ol>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="at">  </span><span class="fu">apache</span><span class="kw">:</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">    #... wie gehabt</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co">    #Beispiel-Internetseite</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> ./website:/usr/local/apache2/htdocs</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co">    #Webinhalte für certbot challenge</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./certbot/www:/usr/local/apache2/htdocs:ro</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="co">    #Zertifikate</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./certbot/conf:/usr/local/apache2/ssl:ro</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co">    #Konfiguration</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./apache2/conf/:/usr/local/apache2/conf/</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="co">    #...wie gehabt</span></span></code></pre>
</div>
<ol start="5" style="list-style-type: decimal">
<li><p>Das gesamte Compose-Projekt starten:
<code>sudo docker compose up -d</code></p></li>
<li><p>Überprüfen mit <code>sudo docker compose logs</code> und im
Webbrowser am Endgerät durch Eingabe der eigenen Domain.</p></li>
<li><p>Ggf. stoppen mit <code>sudo docker compose down</code></p></li>
</ol>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Hauptpunkte</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li><p>Webserver sind die Kommunikationszentrale zwischen Client und
Webapplikation</p></li>
<li><p>Um den Webserver per Domain zu erreichen, kann bei einem
DDNS-Dienst eine dynamische Domain beantragt werden</p></li>
<li><p>Zur Absicherung der Kommunikation zwischen Server und Client muss
ein TLS-Zertifikat beantragt und eingerichtet werden</p></li>
<li><p>Mit Docker Compose kann der Apache-Webserver zusammen mit Certbot
für das HTTPS-Protokoll eingerichtet werden</p></li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div>
</section></section><section id="aio-09-proxy-docker-compose"><p>Content from <a href="09-proxy-docker-compose.html">09_proxy-docker-compose</a></p>
<hr>
<p>Zuletzt aktualisiert am 2025-10-21 |

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/episodes/09-proxy-docker-compose.Rmd" class="external-link">Diese Seite bearbeiten <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Geschätzte Zeit: <i aria-hidden="true" data-feather="clock"></i> 135 Minuten</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Alle Lösungen anzeigen " data-collapse="Alle Lösungen ausblenden "> Alle Lösungen anzeigen <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Übersicht</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Fragen</h3>
<ul>
<li><p>Gibt es auch eine vereinfachte Möglichkeit für
TLS-Zertifikate</p></li>
<li><p>Wie installiere ich NGINX-Proxy-Manager</p></li>
<li><p>Wie erstelle ich einen Proxy Host zur Weiterleitung an einen
Upstream-Server</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Ziele</h3>
<ul>
<li><p>NGINX Proxy Manager installieren und konfigurieren</p></li>
<li><p>TLS-Zertifikate mit dem NGINX-Proxy Manager erhalten</p></li>
<li><p>Upstream-Server im Docker Netzwerk erreichen</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="reverse-proxy-logistikhub-für-webapplikationen">Reverse Proxy: Logistikhub für Webapplikationen<a class="anchor" aria-label="anchor" href="#reverse-proxy-logistikhub-f%C3%BCr-webapplikationen"></a>
</h2>
<hr class="half-width">
<p>Ein <strong>Reverse Proxy</strong> ist ein (Web)Server, der Anfragen
von Clients entgegennimmt und sie an einen oder mehrere
<strong>Backend-Server</strong> weiterleitet. Der Client weiß dabei
nicht, dass die eigentliche Antwort von einem anderen Server kommt – er
kommuniziert nur mit dem Reverse Proxy.</p>
<p><strong>Wozu wird ein Reverse Proxy eingesetzt?</strong><br>
- <strong>Lastverteilung:</strong> Verteilt Anfragen auf mehrere Server,
um Überlastung zu vermeiden.<br>
- <strong>Sicherheit:</strong> Versteckt die eigentlichen Server hinter
dem Proxy und kann Angriffe abwehren (z. B. DDoS-Schutz).<br>
- <strong>Verschlüsselung (SSL/TLS):</strong> Kann die
HTTPS-Verschlüsselung zentral übernehmen (z. B. mit Let’s
Encrypt).<br>
- <strong>Caching:</strong> Speichert häufig abgerufene Inhalte, um die
Ladezeiten zu verbessern.<br>
- <strong>URL-Routing:</strong> Leitet Anfragen basierend auf der URL an
unterschiedliche Anwendungen weiter (z. B. <code>/api</code> →
Backend-Service, <code>/</code> → Webseite).</p>
<p><strong>Beispiele für Einsatzszenarien:</strong><br>
- Ein Unternehmen verwendet einen Reverse Proxy (z. B.
<strong>Nginx</strong> oder <strong>Apache HTTP Server</strong>) zur
zentralen Verwaltung mehrerer Webanwendungen auf einem Server.<br>
- Eine große Website nutzt einen Reverse Proxy, um Traffic über mehrere
Server zu verteilen und die Verfügbarkeit zu erhöhen.<br>
- Eine Firma setzt einen Reverse Proxy ein, um HTTPS für alle Dienste zu
aktivieren, ohne dass die einzelnen Anwendungen selbst SSL konfigurieren
müssen.</p>
<p>In der vorherigen Sitzung wurde ein Apache-Webserver betrieben, der
alle Anfragen direkt verarbeitet hat und die HTML-Datei an die Client
geliefert hat. Möchte man jedoch mehrere Webapplikationen parallel
betreiben, empfiehlt sich die Nutzung eines Reverse Proxies. Der
Apache-Webserver kann dafür konfiguriert werden. Im Docker Compose
Projekt der vorherigen Sitzung müsste dafür die <a href="08-webserver-docker-compose#Webserver-von-http-auf-https-umstellen">Konfigurationsdatei</a>
angepasst werden.</p>
</section><section><h2 class="section-heading" id="nginx-proxy-manager">NGINX-Proxy-Manager<a class="anchor" aria-label="anchor" href="#nginx-proxy-manager"></a>
</h2>
<hr class="half-width">
<p>Für den NGINX-Webserver existiert mit dem <a href="https://nginxproxymanager.com/" class="external-link">NGINX-Proxy-Manager</a> jedoch ein
Softwareprojekt, dass eine graphische Oberfläche für den NGINX-Webserver
bereitstellt. Der NGINX-Proxy-Manager verfügt über die meisten
Funktionen, die für das Betreiben eines Reverse Proxy notwendig sind.
Allerdings bietet er nicht die volle Funktionalität, die NGINX hat, wenn
dieser händisch (ohne graphische Oberfläche) konfiguriert und betrieben
wird.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>Der NGINX-Proxy-Manager wird ebenfalls als Docker Compose Projekt
erstellt. Dazu gehen Sie zunächst wie in der vorhergehenden Sitzung
geschildert vor (Verzeichnis erstellen, Berechtigungen anpassen,
compose.yaml-Datei erstellen).</p></li>
<li><p>Nun lesen Sie das <a href="https://nginxproxymanager.com/setup/" class="external-link">Handbuch</a> durch.</p></li>
<li><p>Übernehmen Sie die Vorlagen-Dateien und passen Sie die folgenden
Punkte an:</p></li>
</ol>
<ul>
<li><p>Netzwerk: Datenbank und Webapp bekommen ihr eigenes Netzwerk:
proxy-db und proxy-web. Der Webapp-Container ist mit beiden Netzwerken
verbunden</p></li>
<li><p>Umgebunsvariablen: ersetzen Sie die Standardpasswörter und
Usernamen</p></li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li><p>Starten Sie das Projekt: `sudo docker compose up -d</p></li>
<li><p>Öffnen Sie im Webbrowser den NGINX-Proxy-Manager mit der URL: <a href="http://server.ddns-provider.de:81" class="external-link uri">http://server.ddns-provider.de:81</a></p></li>
</ol>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Was bedeutet die angehängte Nummer in der URL <a href="http://server.ddns-provider.de:81" class="external-link uri">http://server.ddns-provider.de:81</a> und warum ist sie
wichtig?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Die Nummer in einer URL gibt den spezifischen Port an, über den der
Client (z.B. ein Webbrowser) mit dem Webserver kommunizieren soll.
Standardmäßig verwenden Webserver Port 80 für HTTP und Port 443 für
HTTPS. Wenn eine andere Portnummer angegeben wird – wie in diesem Fall
Port 81 – bedeutet das, dass der Server auf diesem Port angefragt
wird.</p>
<p>Die Portnummer ist wichtig, weil ein Server auf einem Gerät (z.B.
einem Rechner) gleichzeitig mehrere Dienste betreiben kann, die jeweils
auf einer anderen Portnummer laufen. In unserem Fall wollen wir die
Weboberfläche des NGINX-Proxy-Managers erreichen, welche auf Port 81
läuft (vergleiche dazu auch die compose.yaml-Datei). Port 80 wird
benötigt werden, um Zertifikate von Letsencrypt zu beantragen.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="nutzung">Nutzung<a class="anchor" aria-label="anchor" href="#nutzung"></a>
</h3>
<p>Die Nutzung des NGINX-Proxy-Managers ist (zumindest in den
Grundlagen) recht einfach. Um Anfragen an eine Webapplikation
weiterzuleiten, wird ein Proxy-Host erstellt. Um diesen mit einem
TLS-Zertifikat abzusichern wird ein solches bei der Erstellung gleich
mit beantragt. Damit der NGINX-Proxy-Manager weiß, wohin die Daten
weiter geleitet werden sollen, muss das Ziel angegeben werden.</p>
<p>Als ersten Proxy-Host erstellen Sie einen Eintrag für
NGINX-Proxy-Manager selbst, um den Zugriff darauf ebenfalls per HTTPS zu
sichern. Folgende Screenshots zeigen die Konfiguration.</p>
<figure><img src="../fig/09_npm_proxy_01.png" alt="NGINX-Proxy-Manager: Eingabemaske für Proxy-Host, Detail-Tab" class="figure mx-auto d-block"><div class="figcaption">Grundkonfiguration mit Domain und
Weiterleitungsziel. Optional können Zugriffslisten erstellt werden, um
z.B. den Zugriff nur von einem bestimmten Netzwerk aus zu erlauben (z.B.
dem <a href="https://netzkarte.zdv.uni-tuebingen.de/SubnetInfo/Table134" class="external-link">Uninetzwerk</a>)</div>
</figure><figure><img src="../fig/09_npm_proxy_02.png" alt="NGINX-Proxy-Manager: Eingabemaske für Proxy-Host, SSL-Tab für TLS-Zertifikate" class="figure mx-auto d-block"><div class="figcaption">Konfiguration des TLS-Zertifikats und weiterer
Parameter für das HTTPS</div>
</figure>
</div>
<div class="section level3">
<h3 id="weitere-upstream-server-konfigurieren">Weitere Upstream Server konfigurieren<a class="anchor" aria-label="anchor" href="#weitere-upstream-server-konfigurieren"></a>
</h3>
<div id="proxy-hostkonfiguration" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="proxy-hostkonfiguration" class="callout-inner">
<h3 class="callout-title">Proxy-Hostkonfiguration</h3>
<div class="callout-content">
<p>Was bewirken die vorgenommenen Einstellungen für den ersten
Proxy-Host?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>Die IP-Adresse 127.0.0.1 bedeutet, dass sämtliche Anfragen an die
konfigurierte Domain an die lokale Netzwerkkarte (also ohne den Server
zu verlassen) mit Port 81 weitergeleitet werden. D.h. Sie können die
Weboberfläche jetzt über das HTTPS ansteuern: <a href="https://server.ddns-provider.de" class="external-link uri">https://server.ddns-provider.de</a></p>
<p>Die weiteren Parameter im SSL-Tab bewirken, dass eine
unverschlüsselte Kommunikation über das HTTP-Protokoll unterbunden
wird.</p>
</div>
</div>
</div>
</div>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Wichtig</span>
<div class="callout-inner">
<div class="callout-content">
<p>Sobald NGINX-Proxy Manager per HTTPS erreichbar ist, müssen Sie Ihr
Passwort ändern, da Sie dieses zuvor unverschlüsselt per HTTP übertragen
haben.</p>
</div>
</div>
</div>
<p>Für jeden weiteren Proxy-Host benötigen Sie eine eigene Domain. D.h.
Sie müssen entweder bei Ihrem DDNS-Anbieter eine weitere Domain
registrieren oder, sollten Sie eine eigene Domain besitzen, für diese
zusätzliche Subdomains erstellen.</p>
<p>Anschließend können Sie für diese Domains weitere Proxy-Hosts
erstellen und TLS-Zertifikate beantragen. Voraussetzung ist dabei
natürlich, dass 1. die Domain auf die richtige IP-Adresse verweist (die
öffentliche IP-Adresse, unter welcher Ihr Server erreichbar ist) und 2.
dass Ihre Firewall die Kommunikation über Port 80 für die
Zertifikatsausstellung und Port 443 für die HTTPS-Verbindung
erlaubt.</p>
<div id="apache-als-upstream-server" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="apache-als-upstream-server" class="callout-inner">
<h3 class="callout-title">Apache als Upstream-Server</h3>
<div class="callout-content">
<p>Erstellen Sie einen weiteren Proxy Host. Registrieren Sie dafür eine
weitere (Sub-)Domain und beantragen Sie ein TLS-Zertifikat.</p>
<p>Als Ziel dient der Apache-Webserver, welcher in der vorherigen
Sitzung konfiguriert wurde. Die Weiterleitung kann dabei über das
HTTP-Protokoll erfolgen, da die Kommunikation zwischen Proxy und
Apache-Webserver auf demselben Gerät erfolgt. Unter welcher Adresse (IP
oder URL) erreicht NGINX den Apache-Container?</p>
<p>Wie müssen Sie dafür die Apache-Konfigurationsdatei und die
compose.yaml-Datei des Apache-Projekts anpassen?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>Da die Kommunikation für die Beispiel-Internetseite jetzt wieder per
HTTP erfolgt, kann die Apache-Konfigurationsdatei wieder vereinfacht
werden:</p>
<pre class="apacheconf"><code>&lt;VirtualHost *:80&gt;
  DocumentRoot /usr/local/apache2/htdocs
  ServerName  server.ddns-provider.de
&lt;/VirtualHost&gt;</code></pre>
<p>Aus der compose.yaml-Datei kann der certbot-Container und dessen
Volumes entfernt werden. Um die Kommunikation mit dem Proxy zu
ermöglichen, muss das Netzwerk angepasst werden.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="at">  </span><span class="fu">apache</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> httpd:latest</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="at">    </span><span class="fu">container_name</span><span class="kw">:</span><span class="at"> apache</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="st">'80:80'</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">    #Beispiel-Internetseite</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> ./website:/usr/local/apache2/htdocs</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="at">    </span><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> proxy-web</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="fu">networks</span><span class="kw">:</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="at">  </span><span class="fu">proxy</span><span class="kw">:</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> proxy-web</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="at">    </span><span class="fu">external</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre>
</div>
<p>Wenn beide Container (Apache und NGINX) im Selben Netzwerk
eingebunden sind, kann die Weiterleitung über den Container-Namen
erfolgen.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Hauptpunkte</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li><p>Mit dem NGINX-Proxy Manager besteht eine vereinfachte Möglichkeit
für den Erhalt von TLS-Zertifikaten</p></li>
<li><p>Mit einem Reverse Proxy können mehrere Webapplikationen parallel
betrieben werden</p></li>
<li><p>Mit korrekter Docker Netzwerkkonfiguration ist die Kommunikation
zwischen Containern schnell hergestellt</p></li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-10-nextcloud-aio"><p>Content from <a href="10-nextcloud-aio.html">Nextcloud mit Docker installieren</a></p>
<hr>
<p>Zuletzt aktualisiert am 2025-10-21 |

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/episodes/10-nextcloud-aio.Rmd" class="external-link">Diese Seite bearbeiten <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Geschätzte Zeit: <i aria-hidden="true" data-feather="clock"></i> 135 Minuten</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Alle Lösungen anzeigen " data-collapse="Alle Lösungen ausblenden "> Alle Lösungen anzeigen <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Übersicht</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Fragen</h3>
<ul>
<li><p>Gibt es Alternativen zu den Cloud-Plattformen der Tech-Giganten
aus Übersee?</p></li>
<li><p>Welche Funktionen und Vorteile bietet Nextcloud?</p></li>
<li><p>Wie installiere ich den Nextcloud-Server auf meinem
Server?</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Ziele</h3>
<ul>
<li><p>NGINX Proxy Manager für Nextcloud konfigurieren</p></li>
<li><p>Nextcloud All-in-One Dockerimage installieren</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="nextcloud-freie-online-kollaboration-und-datensynchronisation">Nextcloud: Freie Online-Kollaboration und Datensynchronisation<a class="anchor" aria-label="anchor" href="#nextcloud-freie-online-kollaboration-und-datensynchronisation"></a>
</h2>
<hr class="half-width">
<p>Nextcloud ist eine Open-Source-Software-Suite, die es Nutzern
ermöglicht, Dateien, Kalender, Kontakte und weitere Daten auf einem
Server zu speichern und zu synchronisieren. Es handelt sich um eine
Alternative zu proprietären Cloud-Diensten wie Dropbox oder Google
Drive.</p>
<p><strong>Hauptmerkmale</strong> -
<strong>Dateisynchronisation:</strong> Sichere Speicherung und
Synchronisation von Dateien auf mehreren Geräten (Desktop, Mobil, Web).
- <strong>Dateibearbeitung:</strong> (Gemeinsame) Bearbeitung von
Dokumenten (Nextcloud Office) - <strong>Datensicherheit:</strong>
Ende-zu-Ende-Verschlüsselung und Self-Hosting/on Premise möglich sowie
viele weitere Sicherheitsfunktionen - <strong>Multimedia:</strong>
Anzeigen, Organisieren und Teilen von Bildern, Musik und Videos. -
<strong>Kommunikation:</strong> Chat und Videotelefonie mit Nextcloud
Talk - <strong>Groupware:</strong> Kalender, Kontakte, Notizen und
Aufgaben-Management.</p>
<p>Nextcloud ist unter freien Lizenzen (AGPL- und GPL) veröffentlicht.
Dies bedeutet, dass die Software frei genutzt und modifiziert werden
kann, solange die Quellcodes frei zugänglich bleiben. Für größere
Organisationen gibt eine Enterprise-Version, die erweiterte Funktionen
(v.a. Integration von Dritt-Diensten) und Support bietet.</p>
<p>Hinter dem Projekt Nextcloud steht die Nextcloud GmbH, die die
Entwicklung steuert und durchführt aber auch Enterprise-Support
anbietet. Die Community spielt aber ebenso eine wichtige Rolle bei der
Weiterentwicklung von Nextcloud. Aufgrund des freien Lizenzmodells steht
es jedem und jeder offen, sich an der Weiterentwicklung zu beteiligen
oder eigene Apps zur Funktionserweiterung zu entwickeln.</p>
<p>Benutzer können Nextcloud auf einem eigenen Server installieren und
selbst verwalten. Dies bietet maximale Kontrolle über die Daten und
erlaubt die Nutzung von Nextcloud ohne Abhängigkeit von einem externen
Dienstleister. Alternativ kann bei einem frei zu wählenden
Hosting-Provider ein Nextcloud-Server und dessen Verwaltung gemietet
werden. Dann liegen die eigenen Daten aber auch auf den Servern dieses
Dienstleisters. Im Unterschied zu proprätären Diensten, kann ich mir
aber einen Dienstleister meines Vertrauens heraussuchen, ähnlich wie bei
der Wahl eines Mail-Providers.</p>
<div class="section level3">
<h3 id="nextcloud-server-installationsvarianten">Nextcloud Server: Installationsvarianten<a class="anchor" aria-label="anchor" href="#nextcloud-server-installationsvarianten"></a>
</h3>
<p>Nextcloud kann auf verschiedenen Plattformen und in unterschiedlichen
Installationsvarianten betrieben werden. Die Wahl der Methode hängt von
den spezifischen Anforderungen, der verfügbaren Infrastruktur und den
Präferenzen der nutzenden Person ab. Hier ist ein Überblick über die
häufigsten Installationsvarianten:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Bare-Metal:</strong> Hierbei wird Nextcloud direkt auf
einem physischen Server installiert. Dies bietet maximale Kontrolle und
Performance, erfordert jedoch mehr technisches Know-how und ist weniger
flexibel als virtuelle Umgebungen. Unterstützt werden Linux und
Windows-Betriebssysteme, wobei i.d.R. Linux genutzt wird</p></li>
<li><p><strong>Docker:</strong> Docker bietet zwei Möglichkeiten für die
Nextcloud-Installation: Das “all-in-one”-Image und die manuelle
Installation. Das “all-in-one”-Image ist die als offizielel
Installationsvariante empfohlene Option der Nextcloud GmbH. Es ist ein
einfach zu installierendes Docker-Image, das gleich mehrere weitere
Container für zusätzliche Funktionalität und Optmierung mit bringt. Es
erfordert jedoch durch die zusätzlichen Container mehr Ressourcen als
die manuelle Installation mit Docker Compose. Bei der manuellen
Installation müssen jedoch die einzelnen Komponenten (Nextcloud-Server,
Datenbank, Webserver, Caching-Server u.a.) separat konfiguriert werden.
Dafür besteht beim manuell erstellten Docker Compose Projekt mehr
Flexibilität.</p></li>
<li><p><strong>Virtuelle Maschinen (VM):</strong> Nextcloud kann auf
einer virtuellen Maschine betrieben werden, was die Isolierung von
Ressourcen und die Verwaltung mehrerer Instanzen erleichtert.</p></li>
<li><p><strong>Nextcloud Pi:</strong> Nextcloud Pi ist eine spezielle
Version von Nextcloud, die für den Einsatz auf Raspberry Pi-Geräten
optimiert ist. Sie bietet eine einfache Installation und Verwaltung und
ist ideal für kleine Netzwerke oder Heimserver.</p></li>
</ol>
<p>In dieser Lektion wird gezeigt, wie das Nextloud
All-in-One-Dockerimage installiert werden kann.</p>
</div>
<div class="section level3">
<h3 id="nextcloud-all-in-one">Nextcloud All-in-One<a class="anchor" aria-label="anchor" href="#nextcloud-all-in-one"></a>
</h3>
<p>Vor der Installation sollten Sie sich die Informationen im <a href="https://github.com/nextcloud/all-in-one" class="external-link">Github-Repository</a>
durchlesen. Allgemein zur Installation, Konfiguration und Nutzung von
Nextcloud ist das [Handbuch][nextlcoud-doc] die erste Anlaufstelle.</p>
<p>Wie bei jedem Docker Compose Projekt wird wieder ein
Arbeitsverzeichnis vorbereitet.</p>
<p>Anschließend muss der NGINX-Proxy-Manager eingerichtet werden (Proxy
Host mit TLS-Zertifikat). Genaue Konfigurationshinweise finden sich auch
im <a href="https://github.com/nextcloud/all-in-one/blob/216d238625564ed0051b65cced08a90b66e3d1b5/reverse-proxy.md" class="external-link">Github-Repository</a>.</p>
<p>Für die compose.yaml-Datei existiert eine <a href="https://github.com/nextcloud/all-in-one/blob/216d238625564ed0051b65cced08a90b66e3d1b5/compose.yaml" class="external-link">Vorlage</a>.
Diese muss jedoch noch stark angepasst werden. In diesem <a href="https://github.com/nextcloud/all-in-one/discussions/588" class="external-link">Thread</a>
auf Github gibt es einige aus der Community berichtete Beispiele (Tip:
die Seite nach “NGINX Proxy Manager” durchsuchen).</p>
<p>Hat man eine compose.yaml-Datei erstellt müssen, müssen ggf. lokale
Ordner und Dateien für die Docker Volumes erstellt werden. Anschließen
kann das Projekt mit <code>sudo docker compose up</code> gestartet
werden. Hier empfiehlt sich tatsächlich das Starten im Vordergrund, da
bei diesem großen Projekt vermutlich zunächst noch Fehler aufkommen, die
so direkt gesehen werden.</p>
<div id="nextcloud-all-in-one-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="nextcloud-all-in-one-1" class="callout-inner">
<h3 class="callout-title">Nextcloud All-in-One</h3>
<div class="callout-content">
<p>Installieren Sie einen Nextlcoud-Server mit Hilfe des Nextcloud
All-in-One Images. Nutzen Sie dabei den NGINX Proxy Manager als Reverse
Proxy.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Nach erfolgreicher Installation erreichen Sie Nextcloud AIO im
Webbrowser unter der URL, die Sie im NGINX Proxy Manager hinterlegt
haben.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Hauptpunkte</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li><p>Die Nextcloud-Software-Suite ist eine Open Source Alternative für
Datensychronistaion und Kollaboration im Team</p></li>
<li><p>Nextcloud auf dem eigenen Server installiert werden</p></li>
<li><p>Eine Installationsvariante für einen schnellen Start ist das
All-in-One Dockerimage</p></li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-11-nextcloud-aio-konfiuguration"><p>Content from <a href="11-nextcloud-aio-konfiuguration.html">Nextcloud AIO: Konfiguration</a></p>
<hr>
<p>Zuletzt aktualisiert am 2025-10-21 |

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/episodes/11-nextcloud-aio-konfiuguration.Rmd" class="external-link">Diese Seite bearbeiten <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Geschätzte Zeit: <i aria-hidden="true" data-feather="clock"></i> 135 Minuten</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Alle Lösungen anzeigen " data-collapse="Alle Lösungen ausblenden "> Alle Lösungen anzeigen <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Übersicht</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Fragen</h3>
<ul>
<li><p>Wie kann die Funktion von Nextcloud AIO erweitert
werden?</p></li>
<li><p>Wie kann ich die Leistung und Sicherheit von Nextcloud AIO
verbessern?</p></li>
<li><p>Wie war das noch einmal mit dem Backup?</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Ziele</h3>
<ul>
<li><p>Funktionen im Docker Compose Projekt ergänzen</p></li>
<li><p>Verwaltungsoberfläche von AIO</p></li>
<li><p>Datensicherung von Nextcloud AIO</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="anpassung-von-nextcloud-all-in-one-aio">Anpassung von Nextcloud All-in-One (AIO)<a class="anchor" aria-label="anchor" href="#anpassung-von-nextcloud-all-in-one-aio"></a>
</h2>
<hr class="half-width">
<p>Nach der Installation sind weitere Anpassungen zu empfehlen. Dazu
zählen z.B. Optmierungen der Performance oder der Sicherheit. Aber auch
die Konfiguration eines Backupplans. Die Anpassungen sind an mehreren
Stellen möglich, die im Folgenden gezeigt werden.</p>
<div class="section level3">
<h3 id="in-der-compose-yaml-datei">In der compose.yaml-Datei<a class="anchor" aria-label="anchor" href="#in-der-compose-yaml-datei"></a>
</h3>
<p>Bereits für die Konfiguration des Reverse Proxy wurden an der
Compose-Datei des sogenannten “Mastercontainers” (der Container, der
alle anderen Container verwaltet) Änderungen vorgenommen. Die Hinweise
in der offiziellen Vorlage der compose.yaml-Datei geben schon einen
guten Hinweis, was hier noch optimiert werden kann und wie dies
geschehen kann.</p>
<div class="section level4">
<h4 id="perfomance">Perfomance<a class="anchor" aria-label="anchor" href="#perfomance"></a>
</h4>
<p>Die Anpassungen erfolgen i.d.R. durch Anpassung einer der
Umgebungsvariablen. Einen Blick Wert sind dabei z.B.
<em>NEXTCLOUD_MEMORY_LIMIT</em>, <em>NEXTCLOUD_MAX_TIME</em> und
<em>NEXTCLOUD_UPLOAD_LIMIT</em>. Verfügt der Docker Host über eine
Grafikkarte, besteht die Möglichkeit deren Rechenleistung für AIO zur
Verfügung zu stellen. Dies ist v.a. für Funktionen wie die <a href="https://github.com/matiasdelellis/facerecognition" class="external-link">Gesichtserkennung</a>
oder <a href="https://docs.nextcloud.com/server/stable/admin_manual/ai/index.html" class="external-link">KI-Anwendungen</a>
innerhalb von Nextcloud relevant. Für die Konfiguration der Grafikkarte
sind die Umgebungsvariablen <em>NEXTCLOUD_ENABLE_DRI_DEVICE</em> oder
<em>NEXTCLOUD_ENABLE_NVIDIA_GPU</em> relevant</p>
</div>
<div class="section level4">
<h4 id="fail2ban">Fail2Ban<a class="anchor" aria-label="anchor" href="#fail2ban"></a>
</h4>
<p>Um Brute-Force-Angriffe auf seinen Nextcloud-Server zu unterbinden,
sollte Fail2Ban auch für Nextcloud eingerichtet werden. Auf <a href="https://github.com/nextcloud/all-in-one?tab=readme-ov-file#fail2ban" class="external-link">Github</a>
und im <a href="https://docs.nextcloud.com/server/stable/admin_manual/installation/harden_server.html#setup-fail2ban" class="external-link">Handbuch</a>
finden sich dafür die nötigen Informationen. In Kurzform: fügen Sie der
Fail2Ban-Konfiguration des Hosts ein neues Jail hinzu. Passen Sie den
Pfad der Log-Datei an und nutzen Sie die Docker-User Chain (da der
Datenverkehr an der UFW-Firewall vorbei geht. Folgend ein mögliches
Beispiel der Fail2Ban-Konfiguration (vergessen Sie jedoch nicht, wie im
Handbuch geschildert, die Filter-Datei zu erstellen):</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">CONF<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode conf" tabindex="0"><code class="sourceCode toml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">[nextcloud]</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="dt">backend</span> <span class="op">=</span> <span class="dt">auto</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="dt">enabled</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="dt">port</span> <span class="op">=</span> <span class="dv">80</span><span class="er">,</span><span class="dt">443</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="dt">protocol</span> <span class="op">=</span> <span class="dt">tcp</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="dt">filter</span> <span class="op">=</span> <span class="dt">nextcloud</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="dt">maxretry</span> <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="dt">bantime</span> <span class="op">=</span> <span class="dv">86400</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="dt">findtime</span> <span class="op">=</span> <span class="dv">43200</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="dt">logpath</span> <span class="op">=</span> <span class="er">/</span><span class="dt">var</span><span class="er">/</span><span class="dt">lib</span><span class="er">/</span><span class="dt">docker</span><span class="er">/</span><span class="dt">volumes</span><span class="er">/</span><span class="dt">nextcloud_aio_nextcloud</span><span class="er">/</span><span class="dt">_data</span><span class="er">/</span><span class="dt">data</span><span class="er">/</span><span class="dt">nextcloud.log</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="dt">chain</span> <span class="op">=</span> <span class="dt">DOCKER-USER</span></span></code></pre>
</div>
</div>
</div>
<div class="section level3">
<h3 id="über-die-verwaltungsoberfläche-von-aio">Über die Verwaltungsoberfläche von AIO<a class="anchor" aria-label="anchor" href="#%C3%BCber-die-verwaltungsoberfl%C3%A4che-von-aio"></a>
</h3>
<p>Nach der Installation von Nextcloud AIO kann die
Verwaltungsoberfläche des Docker Mastercontainers im Webbrowser erreicht
werden. Entweder unter
<code>https://&lt;öffentliche-Ip-Adresse&gt;:8080</code> oder unter
<code>https://&lt;ihre-domain&gt;:8443</code>. Da sich in unserem Fall
hinter der gleichen IP-Adresse mehrere Server verstecken, wird der
Zugriff über die IP-Adresse nicht erfolgreich sein. Beim Zugriff über
den Domainname, kann der Hauptproxy-Server die Anfrage aber korrekt
weiterleiten (an den NGINX-Proxy-Manager, welcher dann wiederum an den
AIO-Container weiterleitet).</p>
</div>
<div class="section level3">
<h3 id="über-die-administrationsoberfläche-von-nextcloud">Über die Administrationsoberfläche von Nextcloud<a class="anchor" aria-label="anchor" href="#%C3%BCber-die-administrationsoberfl%C3%A4che-von-nextcloud"></a>
</h3>
<p>Wie bei einer “normalen” Nextcloud-Installation (z.B. Bare-Metal)
kann der Server auch über die Administrationsseite des Nextcloud-Servers
verwaltet werden. Wobei manche Einstelllungen hier nicht möglich sind.
Melden Sie sich dazu auf Ihrem Nextcloud-Server mit einem
Administrator-Account an. Öffnen Sie über den Button rechts oben das
Menü und wählen Sie “Verwaltungseinstellungen” aus. Wählen Sie nun links
den Punkt “Grundeinstellungen” aus. Dort werden Ihnen Fehler und
Warnungen angezeigt, die insbesondere direkt nach der Installation noch
auftreten können. Beheben Sie all diese Fehler und möglichst auch alle
Warnungen.</p>
</div>
<div class="section level3">
<h3 id="mit-dem-occ-tool">Mit dem occ-Tool<a class="anchor" aria-label="anchor" href="#mit-dem-occ-tool"></a>
</h3>
<p>Das <a href="https://docs.nextcloud.com/server/stable/admin_manual/occ_command.html" class="external-link">occ-Tool</a>
ist ein php-Programm, das mit Nextcloud installiert wird (egal ob als
Docker-Container oder Bare-Metal). Mit dem occ-Tool kann der Server in
vielerlei Hinsicht verwaltet und angepasst werden. Sämtliche
Befehlsoptionen können dem Handbuch entnommen werden. Im Falle von
Nextcloud AIO ist zu beachten, dass das Tool im Docker-Container läuft
und in diesem mit den Rechten des www-data-Users ausgeführt werden muss.
Entsprechend den Informationen im <a href="https://github.com/nextcloud/all-in-one?tab=readme-ov-file#how-to-run-occ-commands" class="external-link">AIO-GitHub-Repository</a>
lautet der Befehl wie folgt:
<code>sudo docker exec --user www-data -it nextcloud-aio-nextcloud php occ &lt;Befehlsoption&gt;</code>,
z.B.
<code>sudo docker exec --user www-data -it nextcloud-aio-nextcloud php occ maintenance:mode --on</code>
um den Wartungsmodus von Nextcloud zu aktivieren.</p>
</div>
</section><section><h2 class="section-heading" id="backup">Backup<a class="anchor" aria-label="anchor" href="#backup"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="grundlagen">Grundlagen<a class="anchor" aria-label="anchor" href="#grundlagen"></a>
</h3>
<p>Um Datenverlust zu vermeiden, sollte stets ein Backup erstellt
werden. Sowohl im Falle des Nextcloud-Servers, des physischen Server
aber auch jedes Endgeräts (PC, Notebook, Telefon).</p>
<div class="section level4">
<h4 id="was-muss-gesichert-werden">Was muss gesichert werden?<a class="anchor" aria-label="anchor" href="#was-muss-gesichert-werden"></a>
</h4>
<p>Welche Inhalte eines Systems gesichert werden sollen, ist von den
eigenen Bedürfnissen abhängig. Es kann jedoch zwischen drei
Hauptkategorien an Daten unterschieden werden:</p>
<ul>
<li><p>Dateien (Bilder,Dokumente, Videos, Emails…)</p></li>
<li><p>Programme und Lizenzen (Installationsdateien, Konfigurationen,
ganze Installationen)</p></li>
<li><p>System (Betriebssystem mit (allen?) Konfigurationen)</p></li>
</ul>
<p>In vielen Fällen wird die Sicherung der Dateien ausreichen, da
Programme und System mit etwas Zeitaufwand wieder neu aufgesetzt werden
können. In zeitkritischen Umgebungen, wenn ein defektes System schnell
wieder verfügbar sein muss, empfiehlt es sich aber, dass gesamte System
zu sichern.</p>
</div>
<div class="section level4">
<h4 id="wie-muss-gesichert-werden">Wie muss gesichert werden?<a class="anchor" aria-label="anchor" href="#wie-muss-gesichert-werden"></a>
</h4>
<p>Es kann zwischen drei Varianten einer Sicherung unterschieden
werden:</p>
<ul>
<li><p>Vollsicherung</p></li>
<li><p>Differentielle Sicherung</p></li>
<li><p>Inkrementelle Sicherung</p></li>
</ul>
<p>Bei der <strong>Vollsicherung</strong> werden zu jeder Sicherungszeit
(z.B. täglich oder wöchentlich) alle Daten gesichert. Der Vorteil dieser
Variante ist, dass für eine Wiederherstellung der Daten nur die letzte
Sicherungsversion benötigt wird. Der Nachteil liegt im großen Speicher-
und Zeitbedarf, da bei jeder Sicherung alle Daten kopiert werden müssen,
also sowohl die ursprünglichen Daten, als auch die Daten, die seit der
letzten Sicherung neu hinzugekommen sind.</p>
<figure><img src="../fig/11_vollsicherung.png" alt="Diagramm, welches für jeden Wochentag einen Wert für den Speicherbedarf der Vollsicherung in TB anzeigt. Montags werden 4 TB benötigt. Mit jeder weiteren Sicherung erhöht sich der Betrag um neu hinzugekommene Daten. Am Ende der Woche werden 8,5 TB benötigt" class="figure mx-auto d-block"><div class="figcaption">Speicherbedarf einer täglichen Vollsicherung im
Wochenverlauf mit täglich steigendem Speicherbedarf</div>
</figure><p>Bei der <strong>differentiellen Sicherung</strong> wird zur ersten
Sicherungszeit eine Vollsicherung durchgeführt. Anschließend wird jeden
Tag eine Sicherung erstellt, welche alle seit der letzten Vollsicherung
geänderten oder neu erstellten Daten enthält. Der Vorteil dieser
Variante besteht darin, dass bei einer Wiederherstellung nur die letzte
Vollsicherung und die letzte differentielle Sicherung benötigt werden.
Der Nachteil liegt wie bei der Vollsicherung darin, dass nach wie vor
ein großer Speicherplatzbedarf besteht und die Daten dupliziert
vorliegen.</p>
<figure><img src="../fig/11_differentiell.png" alt="Diagramm, welches für jeden Wochentag einen Wert für den Speicherbedarf der differentiellen Sicherung in TB anzeigt. Montags werden 4 TB benötigt. Dienstags wird nur 1 TB für neue Daten benötigt. Jede weitere Sicherung benötigt jeweils den Bedarf des Vortags plus neu hinzugekommen Daten. Am Wochenende beträgt der Bedarf 4,7 TB" class="figure mx-auto d-block"><div class="figcaption">Speicherbedarf einer täglichen differentiellen
Sicherung im Wochenverlauf</div>
</figure><p>Bei der <strong>inkrementellen Sicherung</strong> werden jeden Tag
nur diejenigen Daten gesichert, die an diesem Tag geändert bzw. neu
hinzugekommen sind. Der Vorteil der inkrementellen Variante besteht
darin, dass vergleichsweise wenig Zeit und Speicherplatz benötigt wird,
da nur zu Beginn eine Vollsicherung erstellt wird und zu jeder weiteren
Sicherungszeit nur die Änderungen gesichert werden. Der Nachteil besteht
darin, dass im Falle einer Wiederherstellung die letzte Vollsicherung
und alle inkrementellen Zwischensicherungen benötigt werden.</p>
<figure><img src="../fig/11_inkrementell.png" alt="Diagramm, welches für jeden Wochentag einen Wert für den Speicherbedarf der inkrementellen Sicherung in TB anzeigt. Montags werden 4 TB benötigt. Dienstags wird nur 1 TB für neue Daten benötigt. Jede weitere Sicherung benötigt nur den Bedarf der an diesem Tag neu hinzugekommen Daten." class="figure mx-auto d-block"><div class="figcaption">Speicherbedarf einer täglichen inkrementellen
Sicherung im Wochenverlauf</div>
</figure><p>Neben der Art der Sicherung, muss auch überlegt werden, wie die
einzelnen Sicherungsversionen aufgehoben werden. Im obigen Beispiel zu
einer täglichen inkrementellen Sicherung und einer wöchentlichen
Vollsicherung können z.B. die Vollsicherung und die inkrementellen
Zwischensicherungen nur solange aufgehoben werden, bis eine neue
Vollsicherung erstellt wurde. Möchte man jedoch gewährleisten, auch auf
einen Datenstand von vor 6 Monaten zurück gehen zu können, sollten die
Sicherungen länger aufgehoben werden. Z.B. könnte dann eine monatliche
Vollsicherung in jeweils sechs Versionen aufbewahrt werden. Wird eine
siebte Version erstellt, wird die älteste gelöscht.</p>
<p>Ein bekanntes Schema zur Versionierung von Sicherungen ist das
Generationenprinzip (auch als Großvater-Vater-Sohn-Prinzip bezeichnet).
Bei diesem Prinzip werden täglich Backups erstellt. Diese werden eine
Woche lang aufbewahrt. Anschließend werden die täglichen Versionen zu
einem Wochenbackup zusammengefasst. Die wöchentlichen Backups werden für
einen Monat aufbewahrt und nach einem Monat zu einer Monatssicherung
zusammen gefasst. Diese monatlichen Sicherungen werden für 12 Monate
aufbewahrt. Dadurch bestehen für die letzten sieben Tage jeweils
tägliche Versionen, für den letzten Monat wöchentliche Versionen und für
das letzte Jahr noch monatliche Versionen. Graphisch ist dieses
Verfahren <a href="https://images.vogel.de/infodienste/smimagedata/1/4/1/6/5/9/53.jpg" class="external-link">hier</a>
dargestellt.</p>
</div>
<div class="section level4">
<h4 id="wo-muss-gesichert-werden">Wo muss gesichert werden?<a class="anchor" aria-label="anchor" href="#wo-muss-gesichert-werden"></a>
</h4>
<p>Ist geklärt, was und wie gesichert werden soll, muss noch geklärt
werden, wo gespeichert werden soll. Grundlegend sollten Sicherungen
nicht auf demselben physischen Datenträger wie die Originaldaten
gespeichert werden. Die <strong>3-2-1-Regel</strong> gilt als ein guter
Richtwert: 3 Kopien auf 2 unterschiedlichen Medien, 1 Offsite-Kopie.
Speichert man auf unterschiedlichen Medien, hat man mehr Felxibilität
bei der Wiederherstellung. Die Offsite-Kopie an einem anderen Ort wird
wichtig, wenn am ursprünglichen Serverstandort ein größerer Schaden
Eintritt (z.B. Feuer, Wasser, Kurzschluss oder Einbruch).</p>
<p>Mehr zum Thema Datensicherung findet sich z.B. auch bei <a href="https://wiki.ubuntuusers.de/Datensicherung/" class="external-link">Ubuntuusers</a> oder
bei <a href="https://www.netzwelt.de/sicherheit/backup/backup-arten-erklaert.html" class="external-link">Netzwelt</a>.</p>
</div>
</div>
<div class="section level3">
<h3 id="der-eigene-backupplan">Der eigene Backupplan<a class="anchor" aria-label="anchor" href="#der-eigene-backupplan"></a>
</h3>
<p>Die zuvor dargestellten Methoden und Standards sind nicht immer
einfach umzusetzen. Das ist mit ein Grund dafür, dass in vielen Fällen
keine Sicherungen gemacht werden, da der Aufwand für die Implementierung
einer Sicherungsstrategie zu groß erscheint. Deshalb ist es insbesondere
für Heimanwender und kleinere Organisationen mit wenig zeitkritischen
Daten oftmals besser ein mittelmäßiges Backup zu haben als gar keines
und dafür nicht alle der zuvor genannten Regeln zu befolgen.</p>
<div id="backup-für-den-nextcloud-server" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Aufgabe</span>
<div id="backup-für-den-nextcloud-server" class="callout-inner">
<h3 class="callout-title">Backup für den Nextcloud-Server</h3>
<div class="callout-content">
<p>Überlegen Sie sich, wie Sie Ihren Nextcloud-Server sichern können.
Was (welche Daten) sollten Sie sichern? Wie sichern Sie (mit welcher
Variante)? Suchen Sie im Internet nach Programmen oder Workflows, um
eine Nextcloud-Instanz (Bare-Metal, Docker und VM) zu sichern. Wo
speichern Sie die Sicherungen?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Zeige mir die Lösung </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Das <a href="https://docs.nextcloud.com/server/stable/admin_manual/maintenance/backup.html" class="external-link">Handbuch</a>
listet die grundlegenden Schritte auf, um den Nextcloud-Server zu
sichern: 1. das Konfigurationsverzeichnis unter
<code>/var/www/nextcloud/config</code>, 2. das Datenverzeichnis, z.B.
unter <code>/mnt/data/ncdata</code>, 3. der Theme-Folder unter
<code>/var/www/nextcloud/themes</code> (nur wichtig wenn eigene Themes
genutzt werden) und 4. die Nextcloud-Datenbank des MariaDB-Servers.</p>
<p>Sinnvollerweise wird man eine inkrementelle Sicherung wählen, um Zeit
und Speicherplatz zu sparen. Während das Handbuch zwar die einzelnen
manuellen Schritte aufzeigt (Maintanance-Modus aktivieren, Ordner mit
rsync sichern, Datenbank mit mysqldump sichern) gibt es viele Tools mit
denen Nextcloud gesichert werden kann. Z.B. <a href="https://www.c-rieger.de/backup-mit-de-duplizierung/" class="external-link">Borg-Backup</a>,
<a href="https://www.youtube.com/watch?v=7ZayfpZsgk0" class="external-link">Duplicati</a> oder
die Nextcloud-integrierte <a href="https://apps.nextcloud.com/apps/backup" class="external-link">Backup-App</a>. Eine
weitere Möglichkeit besteht im schreiben eines eigenen Skripts (eines
Mini-Programms), welches leicht an die eigenen Bedürfnisse angepasst
werden kann.</p>
<p>Die Sicherungen können zunächst auf einer zweiten Festplatte, die im
Server eingebunden werden kann, gespeichert werden. Mehr Unabhängigkeit
vom Hauptsystem erhält man, wenn man die Sicherung über das Netzwerk auf
einem zweiten Gerät speichert. Das kann z.B. per <a href="https://wiki.ubuntuusers.de/Samba_Server/" class="external-link">Netzlaufwerk im
Heimnetz</a> geschehen oder per SSH auf entfernte Rechner (<a href="https://medium.com/@techfocuspro/raspberry-pi-remote-backup-ensuring-your-datas-safety-4b50848f4817" class="external-link">medium.com</a>
oder <a href="https://bioslevel.com/article/backing-up-to-a-remote-server-with-ssh-and-rsync/" class="external-link">bioslevel.com</a>).
In größeren Netzwerken bestehen weitere Möglichkeiten, um Daten auf
entfernten Rechnern zu speichern (NFS, iSCSI oder verteilte Dateisysteme
wie DFS oder Ceph), die aber für kleine Setups (Heimserver, kleines Büro
etc) häufig zu komplex sind. Es besteht aber häufig auch die Möglichkeit
Speicherplatz bei einem anderen Cloud-Dienstleister zu mieten und diesen
im eigenen Server einzubinden. Dabei muss dann der Datenschutz und die
Datensicherheit im Blick behalten werden, z.B. indem die Backup-Daten
vor dem Transfer verschlüsselt werden.</p>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="nextcloud-aio-backup-funktion">Nextcloud AIO Backup-Funktion<a class="anchor" aria-label="anchor" href="#nextcloud-aio-backup-funktion"></a>
</h4>
<p>In Nextcloud AIO ist bereits eine <a href="https://github.com/nextcloud/all-in-one?tab=readme-ov-file#backup" class="external-link">Backup-Programm</a>
enthalten. Dieses muss jedoch zu Beginn konfiguriert werden. Da es auf
dem weit verbreiteten Backup-Programm BorgBackup basiert, kann das
Backup entweder auf einen lokalen Datenträger (lokales
BorgBackup-Repository) erstellt werden. Oder auf einem entfernten
Computer wird eine BorgBackup-Repository manuell erstellt und dieses
Remote-Repository wird als Backup-Destination gewählt. Für die
Grundlagen können die oben verlinkten Hinweise bezüglich Backup in AIO
genutzt werden. Wer mehr Informationen zur Nutzung von BorgBackup
benötigt (z.B. um ein Remote-Repositiory zu erstellen), kann sich direkt
bei <a href="https://borgbackup.readthedocs.io/en/1.4-maint/" class="external-link">BorgBackup</a>
informieren. Mit <a href="https://vorta.borgbase.com/" class="external-link">Vorta</a>
existiert für Desktop-Betriebssysteme (Linux und MacOS) auch eine
graphische Oberfläche.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Hauptpunkte</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li><p>Nach der Installation von Nextcloud AIO erfolgt die
Konfiguration</p></li>
<li><p>Wichtig: kümmern Sie sich um ein ordentliches Backup</p></li>
<li><p>Nextcloud AIO bringt mit BorgBackup eine anpassbare Backup-Lösung
mit</p></li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div>
</section></section><section id="aio-12-joplin"><p>Content from <a href="12-joplin.html">Knowledge-und Notizmanagement mit Joplin</a></p>
<hr>
<p>Zuletzt aktualisiert am 2025-10-21 |

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/episodes/12-joplin.Rmd" class="external-link">Diese Seite bearbeiten <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Geschätzte Zeit: <i aria-hidden="true" data-feather="clock"></i> 135 Minuten</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Alle Lösungen anzeigen " data-collapse="Alle Lösungen ausblenden "> Alle Lösungen anzeigen <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Übersicht</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Fragen</h3>
<ul>
<li><p>Was kann ich noch mit Docker tun?</p></li>
<li><p>Wie kann ich meine Notizen besser verwalten?</p></li>
<li><p>Wie installiere ich den Joplin-Server?</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Ziele</h3>
<ul>
<li><p>Möglichkeiten und Grenzen des Self- und
OnPremise-Hostings</p></li>
<li><p>Einführung in Funktionen und Nutzung von Joplin</p></li>
<li><p>Installation von Joplin mit Docker Compose</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="möglichkeiten-des-self--und-onpremise-hostings">Möglichkeiten des Self- und OnPremise-Hostings<a class="anchor" aria-label="anchor" href="#m%C3%B6glichkeiten-des-self--und-onpremise-hostings"></a>
</h2>
<hr class="half-width">
<ul>
<li>
<p>sehr viel, v.a. Open Source Software</p>
<ul>
<li><p>Siehe Awsome Selfhosted Github-Repo (Link)</p></li>
<li><p>v.a. Client-Server-Anwendungen</p></li>
</ul>
</li>
<li>
<p>Beispiele, jeweils mit Links und kurzer Beschreibung</p>
<ul>
<li><p>Medienstreaming: Jellyfin</p></li>
<li><p>Filetransfer: gokapi</p></li>
<li><p>Git: gitea</p></li>
<li><p>Smart Home: homeassistant</p></li>
<li><p>Hypervizor/Cloud Computing: proxmox</p></li>
<li><p>Backup: Bacula/Baculum</p></li>
<li><p>Syncthing</p></li>
<li><p>Kalender und Kontakt: Radicale</p></li>
<li><p>Chat und (Video)Telefonie: Matrix, Jitsi, Bigbluebutton</p></li>
</ul>
</li>
</ul></section><section><h2 class="section-heading" id="grenzen-des-self--und-onpremise-hostings">Grenzen des Self- und OnPremise-Hostings<a class="anchor" aria-label="anchor" href="#grenzen-des-self--und-onpremise-hostings"></a>
</h2>
<hr class="half-width">
<ul>
<li><p>Lizenzrechtliche Einschränkungen: z.B. Nur beim Anbieter,
bestimmte Limits wie Useranzahl oder CPU-Ressourcen</p></li>
<li><p>Hardwareeinschränkungen: je höher die Anforderung, desto mehr
Hardware nötig, z.B. für KI-Anwendungen Grafikleistung</p></li>
<li><p>Bandbreite: Bandbreite im LAN und Bandbreite des
Netzanschlusses</p></li>
<li><p>Serverraum: Energiebedarf, Kühlung, Platzbedarf</p></li>
<li><p>Know-How: was kann man selbst oder ist bereit zu erlernen, was
lagert man besser aus</p></li>
<li><p>Verfügbarkeit/Verlässlichkeit: kritische Infrastruktur muss immer
laufen. Wie gut geschützt vor Ausfällen durch Softwareprobleme,
Hardwareausfalls, Stromausfall, Einbruch, Wasserschaden,
Blitzschlag</p></li>
</ul></section><section><h2 class="section-heading" id="möglichkeiten-des-self--und-onpremise-hostings-1">Möglichkeiten des Self- und OnPremise-Hostings<a class="anchor" aria-label="anchor" href="#m%C3%B6glichkeiten-des-self--und-onpremise-hostings-1"></a>
</h2>
<hr class="half-width">
<p>Self-Hosting im Privatbereich oder On-Premise-Hosting im
Enterprisebereich bieten eine breite Palette an Möglichkeiten,
insbesondere mit Open-Source-Software. Das <a href="https://github.com/awesome-selfhosted/awesome-selfhosted" class="external-link">Awesome
Selfhosted GitHub-Repository</a> bietet eine umfassende Liste von
Beispielen. Das Self- OnPremisehosting ist v.a. dann Interessant, wenn
es um Client-Server-Anwendungen geht. Peer-to-Peer-Anwendungen müssen
i.d.R. nicht gehostet werden, sondern laufen nur auf den Endgeräten.</p>
<p>Einige Beispiele für selbst betriebene Software:</p>
<ol style="list-style-type: decimal">
<li><p>Medienstreaming-Server mit <a href="https://jellyfin.org/" class="external-link">Jellyfin</a>: Eine freie
Softwaremedienbibliothek, die es Ihnen ermöglicht, Ihre Filme,
Fernsehsendungen und Musik auf verschiedenen Geräten zu organisieren und
in Ihrem Netzwerk zu streamen. Als Alternative zu Netflix, Amazon Prime
oder dem DVD-Player.</p></li>
<li><p>Dateiübertragung: <a href="https://github.com/Forceu/Gokapi" class="external-link">gokapi</a>: Eine einfache und
sichere Anwendung zur Dateiübertragung, die es Ihnen ermöglicht, Dateien
zu teilen, z.B. per E-Mail, ohne auf externe Cloud-Dienste wie z.B.
WeTransfer angewiesen zu sein.</p></li>
<li><p>Versionskontrolle nach Git-Standard mit <a href="https://gitea.io/en-us/" class="external-link">gitea</a>: Eine selbst gehostete
Git-Plattform, die es Ihnen ermöglicht, Ihre eigenen Git-Repositories zu
hosten und zu verwalten. Als Alternative zu github oder gitlab.</p></li>
<li><p>Smart Home: <a href="https://www.home-assistant.io/" class="external-link">homeassistant</a>: Eine
Open-Source-Plattform, die es Ihnen ermöglicht, Ihre Smart-Home-Geräte
zu integrieren und zu automatisieren, um Ihr Zuhause sicherer, bequemer
und energieeffizienter zu machen.</p></li>
<li><p>Mit <a href="https://www.proxmox.com/en/" class="external-link">proxmox</a> den eigenen
Hypervisor für das eigene Cloud Computing betreiben: Eine
Open-Source-Software, die es Ihnen ermöglicht, Ihren eigenen Hypervisor
zu betreiben und virtuelle Maschinen und Container zu hosten, um Ihre
Infrastruktur zu vereinfachen und zu skalieren.</p></li>
<li><p>Zentralisierte Backupverwaltung mit <a href="https://www.bacula.org/" class="external-link">Bacula</a> oder <a href="https://baculum.app/" class="external-link">Baculum</a>: Open-Source-Softwarelösungen
für die Datensicherung, die es Ihnen ermöglichen, Ihre Daten zu sichern
und wiederherzustellen, ohne auf Cloud-basierte Datensicherungsdienste
angewiesen zu sein.</p></li>
<li><p>Dateisynchronisation mit <a href="https://syncthing.net/" class="external-link">Syncthing</a>: Eine Open-Source-Software
für die kontinuierliche Dateisynchronisation, die es Ihnen ermöglicht,
Ihre Dateien zwischen Ihren (Mobil)Geräten zu synchronisieren.
Alternative zu den Cloud-Lösungen der Smartphone-Hersteller (Google,
Apple, Samsung etc)</p></li>
<li><p>Kalender und Kontakte: <a href="https://radicale.org/" class="external-link">Radicale</a>: Eine Open-Source-Software für
die Verwaltung von Kalendern und Kontakten, die es Ihnen ermöglicht,
Ihre Kalender und Kontakte selbst zu hosten und zu verwalten.
Alternative zu Google Contacts.</p></li>
<li><p>Chat und (Video)Telefonie mit <a href="https://matrix.org/" class="external-link">Matrix</a>, <a href="https://jitsi.org/" class="external-link">Jitsi</a> oder <a href="https://bigbluebutton.org/" class="external-link">Bigbluebutton</a>:
Open-Source-Softwarelösungen für Chat und (Video)Telefonie, die es Ihnen
ermöglichen, sicher und privat mit Ihren Freunden und Kollegen zu
kommunizieren. Matrix bietet dabei Ende-zu-Ende-Verschlüsselung und
zahlreiche Funktionen zur Integration in Unternehmen. Jitsi zielt eher
auf den Privatbereichh oder kleinere Firmen. Bigbluebutton ist eine
Videokonferenzlösung für den Bildungsbereich (Schule, Hochschulen,
Kurse).</p></li>
</ol></section><section><h2 class="section-heading" id="grenzen-des-self--und-onpremise-hostings-1">Grenzen des Self- und OnPremise-Hostings<a class="anchor" aria-label="anchor" href="#grenzen-des-self--und-onpremise-hostings-1"></a>
</h2>
<hr class="half-width">
<p>Allerdings hat Self-Hosting bzw. On-Premise-Hosting auch Grenzen:</p>
<ol style="list-style-type: decimal">
<li>Rechtliche Einschränkungen: Einige Software kann nur vom Anbieter
verwendet werden oder unterliegt bestimmten Einschränkungen wie der
Benutzeranzahl oder der maximal verwendbaren CPU-Kerne.</li>
<li>Hardware-Einschränkungen: Je anspruchsvoller die Anwendung, desto
mehr Hardware ist erforderlich. KI-Anwendungen erfordern beispielsweise
erhebliche Grafikleistung.</li>
<li>Bandbreite: Die Bandbreite im lokalen Netzwerk und die Bandbreite
der Internetverbindung können limitierende Faktoren sein.</li>
<li>Serverraum: Der Energieverbrauch, die Anforderungen an die Kühlung
und der Platzbedarf können signifikant sein.</li>
<li>Expertise: Bei der Entscheidung, was selbst gehostet werden soll
oder was ausgelagert werden soll, muss auch das eigene Wissen bzw. die
Bereitschaft zum Erwerb des Wissens in Betracht gezogen werden.</li>
<li>Verfügbarkeit/Zuverlässigkeit: Kritische Infrastruktur muss stets
verfügbar sein. Deshalb sollten auch Szenarien wie Ausfälle durch
Anwenderfehler, Softwareprobleme, Hardwareausfälle, Stromausfälle,
Einbruch, Wasserschaden oder Blitzschlag beachtet werden. Ist der Schutz
davor lokal nicht möglich aber die Verfügbarkeit der Dienste nötig,
sollte die Auslagerung an einen Dienstleister in Betracht gezogen
werden.</li>
</ol></section><section><h2 class="section-heading" id="joplin-knowledge-management-mit-dem-eigenen-server">Joplin: Knowledge-Management mit dem eigenen Server<a class="anchor" aria-label="anchor" href="#joplin-knowledge-management-mit-dem-eigenen-server"></a>
</h2>
<hr class="half-width">
<p>Joplin ist eine Open-Source-Software für Notizen und
Aufgabenverwaltung, die sowohl für Einzelpersonen als auch für Teams
geeignet ist. Mit Joplin können Sie Ihre Notizen und ToDo-Listen sicher
und privat auf Ihrem eigenen Server hosten, ohne auf Cloud-basierte
Dienste angewiesen zu sein. Die Software unterstützt Markdown, bietet
eine Vielzahl von Plugins und kann über verschiedene Plattformen
synchronisiert werden.</p>
<div class="section level3">
<h3 id="weitere-informationen">Weitere Informationen:<a class="anchor" aria-label="anchor" href="#weitere-informationen"></a>
</h3>
<ul>
<li><a href="https://joplinapp.org/help/" class="external-link">Joplin Dokumentation</a></li>
<li><a href="https://github.com/laurent22/joplin" class="external-link">Joplin GitHub</a></li>
<li><a href="https://joplinapp.org/" class="external-link">Joplin Homepage</a></li>
</ul>
</div>
<div class="section level3">
<h3 id="alternative-notesnook">Alternative: Notesnook<a class="anchor" aria-label="anchor" href="#alternative-notesnook"></a>
</h3>
<p>Eine alternative Lösung für Self-Hosting von Notizen ist <a href="https://notesnook.com/" class="external-link">Notesnook</a>. Notesnook bietet ebenfalls
eine sichere und private Möglichkeit, Ihre Notizen zu verwalten. Derzeit
befindet sich das <a href="https://github.com/streetwriters/notesnook-sync-server" class="external-link">Self-Hosting
via Docker</a> noch in der Beta-Phase, aber es ist eine
vielversprechende Option für diejenigen, die eine Alternative zu Joplin
suchen.</p>
</div>
<div class="section level3">
<h3 id="lizenz">Lizenz<a class="anchor" aria-label="anchor" href="#lizenz"></a>
</h3>
<p>Die Joplin-Clientanwendungen werden unter einer Open Source Lizenz
veröffentlicht (AGPL-3). Der Source-Code ist <a href="https://github.com/laurent22/joplin" class="external-link">frei einsehbar</a>. Die
Clientanwendungen können die erstellten Notizen entweder bei Kauf eines
<a href="https://joplinapp.org/plans/" class="external-link">Abonnements</a> beim Anbieter
über dessen Server, über einen selbst betriebenen Joplin-Server oder
über andere Dienste wie Nextcloud oder Dropbox synchronisiert werden.
Siehe dazu die Kapitel im <a href="https://joplinapp.org/help/apps/sync/" class="external-link">Handbuch</a>. Die
Synchronisation mit einem Joplin Server (Joplin Cloud oder Self Hosted)
bietet dabei mehr Perfomance und Funktionalität (z.B. Teilen von
Notizen).</p>
<div id="softwarekomponenten" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Wichtig</span>
<div id="softwarekomponenten" class="callout-inner">
<h3 class="callout-title">Softwarekomponenten</h3>
<div class="callout-content">
<ul>
<li>
<p>Joplin-Server: optional, Server für Synchronistation. Entweder
beim Anbieter mieten oder selbst hosten.</p>
<ul>
<li>Alternative Synchronsationsserver: Nextcloud, Dropbox, OneDrive
u.a.</li>
</ul>
</li>
<li><p>Joplin-Clients: Client-Awendung zum verfassen von Notizen.
Verfügbar für PC, Mac und Mobilgeräte</p></li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="funktionen">Funktionen<a class="anchor" aria-label="anchor" href="#funktionen"></a>
</h3>
<ul>
<li>
<p>Notizen und ToDo-Listen verfassen</p>
<ul>
<li><p>im Markdown-Format</p></li>
<li><p>in einer “normalen” Ansicht (<a href="https://de.wikipedia.org/wiki/WYSIWYG" class="external-link">WYSIWYG-Editor</a>)</p></li>
</ul>
</li>
<li>
<p>Unterstützt u.a.</p>
<ul>
<li>ToDo-Listen</li>
<li>Tabellen</li>
<li>Abbildungen</li>
<li>Handzeichnungen</li>
</ul>
</li>
<li><p>Automatisierte Backups</p></li>
<li><p>zahlreiche <a href="https://joplinapp.org/plugins/" class="external-link">Erweiterungen</a></p></li>
<li><p><a href="https://joplinapp.org/help/apps/teams" class="external-link">Kollaboratives
Arbeiten</a></p></li>
<li><p>Organisation durch Schlagworte und Sammlungen
(“Notizbücher”)</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>Im Github-Repository findet sich ein Beispiel für eine <a href="https://github.com/laurent22/joplin/blob/8d1d1be79eaea4dfdfadd0b23f28a48760840eae/docker-compose.server.yml" class="external-link">compose.yaml-Datei</a>.
Diese beinhaltet auch einen Service für den <a href="https://joplinapp.org/help/apps/transcribe/system_architecture" class="external-link">Transcribe-Dienst</a>
zur Übersetzung von handschriftlichen Notizen in digitale Texte. Dieser
Dienst benötigt sehr viel Ressourcen, weshalb dieser Container (und
damit das Transcribe-Feature) im Selfhostingbereich evtl. weg gelassen
werden sollte.</p>
<p>Eine auch für kleinere Umgebungen geeignete compose.yaml-Datei kann
wie folgt aussehen</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="at">services</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="at">  joplin</span></span></code></pre>
</div>
<p>Ergänzt wird die Compose Datei durch eine <code>.env</code>-Datei für
die Umgebungsvariablen. Auch dafür gibt es eine <a href="https://github.com/laurent22/joplin/blob/8d1d1be79eaea4dfdfadd0b23f28a48760840eae/.env-sample" class="external-link">Vorlage</a>
die wie folgt vereinfacht werden kann:</p>
<pre><code>APP_BASE_URL=https://example.com/joplin
APP_PORT=22300

DB_CLIENT=pg
POSTGRES_PASSWORD=joplin
POSTGRES_DATABASE=joplin
POSTGRES_USER=joplin
POSTGRES_PORT=5432
POSTGRES_HOST=joplin-db
</code></pre>
<p>Wichtig sind dabei die APP_BASE_URL und die POSTGRES_ Parameter.
Statt einer Datenbank kann auch das Dateisystem als Speicher genutzt
werden (siehe <a href="https://hub.docker.com/r/joplin/server" class="external-link">hier</a>). Grundlegend
wird aber eine Datenbank als Speicher empfohlen.</p>
<p>Damit der Joplinserver erreicht werden kann, muss eine Domain
vorhanden sein und im NGINX-Proxy-Manager hinterlegt sein.</p>
<p>Die Konfiguration des Proxy-Hosts sieht wie folgt aus:</p>
<!-- Abbildungen aus NPM ergänzen -->
<p>Die Clientanwendung für die Endgeräte kann auf der <a href="https://joplinapp.org/" class="external-link">Homepage von Joplin</a> heruntergeladen
und installiert werden.</p>
</div>
<div class="section level3">
<h3 id="konfiguration">Konfiguration<a class="anchor" aria-label="anchor" href="#konfiguration"></a>
</h3>
<ul>
<li>Nach der Installation der Clientanwendgung muss in den Einstellungen
die Verbindung zum eigenen Joplinserver eingetragen werden. Dazu im Menü
unter Werkzeuge den Punkt Optionen öffnen und als Synchronisationsziel
<code>Jopin Server (Beta)</code> auswählen. Anschließend kann die URL
zum eigenen Server, der Nutzername und das Passwort eingetragen werden.
Anschließend kann die Verbindung getestet werden.</li>
</ul>
<figure><img src="../fig/12_joplin_01.png" alt="Konfigurationsmenü von Joplin. Zu sehen sind die Einstellungen für die Synchronistaion" class="figure mx-auto d-block"><div class="figcaption">Joplin: Konfiguration der Serververbindung</div>
</figure><ul>
<li>Um Datenverlust zu vermeiden empfiehlt es sich, die Notizen am
Endgerät zu sichern. Dazu kann unter dem Punkt ein Zielverzeichnis
gewählt werden und die genaue Ausführung eingerichtet werden. Werden die
Notizen auf einem unverschlüsseltem Medium gepspeichert, empfiehtl sich
das Setzen eines Passwortes, um zu verhindern, dass die Notizen von
Dritten eingesehen werden können.</li>
</ul>
<figure><img src="../fig/12_joplin_02.png" alt="Backupkonfiguration unter Joplin. Zielverzeichnis ist ein lokaler Pfad." class="figure mx-auto d-block"><div class="figcaption">Joplin: Konfiguration der lokalen
Datensicherung</div>
</figure><ul>
<li>Wurden weitere Plugins installiert (z.B. der Web Clipper, oder das
KI-Tool <a href="https://joplinapp.org/plugins/plugin/joplin.plugin.alondmnt.jarvis/" class="external-link">Jarvis</a>)
können diese ebenfalls in den Optionen eingerichet werden</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Hauptpunkte</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li><p>Ist Docker einmal installiert und ein Reverse Proxy eingerichtet,
können schnell weitere Dienste gehostet werden</p></li>
<li><p>Mit Joplin können die eigenen Notizen (und ggf. die des Teams)
auf dem eigenen Server gespeichert werden</p></li>
<li><p>Joplin kann mit dem Joplin Server oder anderen Dateidiensten
betrieben werden</p></li>
<li><p>Der Joplin Server kann mit Docker Compose installiert
werden</p></li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-13-mehr-docker"><p>Content from <a href="13-mehr-docker.html">Mehr Docker</a></p>
<hr>
<p>Zuletzt aktualisiert am 2025-10-21 |

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/episodes/13-mehr-docker.Rmd" class="external-link">Diese Seite bearbeiten <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Geschätzte Zeit: <i aria-hidden="true" data-feather="clock"></i> 135 Minuten</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Alle Lösungen anzeigen " data-collapse="Alle Lösungen ausblenden "> Alle Lösungen anzeigen <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Übersicht</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Fragen</h3>
<ul>
<li><p>Wie kann ein fertiges Dockerimage angepasst werden?</p></li>
<li><p>Wie verknüpfte ich ein DOCKERFILE in einem Docker Compose
Projekt?</p></li>
<li><p>Muss ich Docker immer über die Kommandozeile bedienen?</p></li>
<li><p>Welche Alternativen zu Docker gibt es?</p></li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Ziele</h3>
<ul>
<li><p>Dockerimage mit DOCKERFILES anpassen</p></li>
<li><p>den <code>docker compose build</code> Befehl nutzen</p></li>
<li><p>Portainer als GUI für Docker</p></li>
<li><p>Docker Swarm, Podman und Kubernetes als Alternativen zu
Docker</p></li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="anpassung-von-dockerimages">Anpassung von Dockerimages<a class="anchor" aria-label="anchor" href="#anpassung-von-dockerimages"></a>
</h2>
<hr class="half-width">
<p>Im bisherigen Verlauf des Kurses wurden fertige Dockerimages genutzt.
Diese wurden in der Compose-Datei mit dem Key <code>image:</code>
angebene. Es kommt jedoch vor, dass diese fertigen Images nicht ganz den
eigenen Bedürfnissen entsprechen. Häufig fehlen bestimmte Programme oder
Dateien im Image. Um diese zu ergänzen kann ein Image angepasst
werden.</p>
<div class="section level3">
<h3 id="das-dockerfile-als-bauanleitung">Das DOCKERFILE als Bauanleitung<a class="anchor" aria-label="anchor" href="#das-dockerfile-als-bauanleitung"></a>
</h3>
<p>Ein Dockerimage kann mithilfe eines sog. <code>Dockerfile</code>
erstellt und angepasst werden. Das <code>Dockerfile</code> enthält eine
Reihe von Anweisungen, die Docker befolgt, um das Image zu bauen. Hier
sind einige grundlegende Anweisungen, die in einem
<code>Dockerfile</code> verwendet werden können:</p>
<ul>
<li>
<code>FROM</code>: Gibt das Basisimage an, von dem abgeleitet
wird.</li>
<li>
<code>RUN</code>: Führt Befehle im Container aus.</li>
<li>
<code>COPY</code>: Kopiert Dateien oder Verzeichnisse vom Host in
das Image.</li>
<li>
<code>CMD</code>: Gibt den Befehl an, der ausgeführt wird, wenn der
Container startet.</li>
</ul>
<p>Ein einfaches Beispiel für ein <code>Dockerfile</code> kann wie folgt
aussehen:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">DOCKERFILE<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode dockerfile" tabindex="0"><code class="sourceCode dockerfile"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">FROM</span> ubuntu:latest</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> install <span class="at">-y</span> python3</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">COPY</span> . /app</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="kw">WORKDIR</span> /app</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">"python3"</span>, <span class="st">"/app/app.py"</span>]</span></code></pre>
</div>
<p>Dieses <code>Dockerfile</code> erstellt ein Image basierend auf dem
neuesten Ubuntu-Image, installiert Python 3, kopiert die Dateien des
aktuellen Arbeitsverzeichnisses in das Verzeichnis <code>/app</code> im
Container und führt die Datei <code>app.py</code> aus, wenn der
Container startet.</p>
</div>
<div class="section level3">
<h3 id="der-docker-compose-build-befehl">Der <code>docker compose build</code> Befehl<a class="anchor" aria-label="anchor" href="#der-docker-compose-build-befehl"></a>
</h3>
<p>Um die erstellte Bauanleitung im <code>Dockerfile</code> zu nutzen,
wird die Compose-Datei abgeändert und statt des fertigen Images mit dem
build-Befehl das <code>Dockerfile</code> genutzt.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="at">  </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="at">    </span><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="at">      </span><span class="fu">dockerfile</span><span class="kw">:</span><span class="at"> DOCKERFILE</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">"5000:5000"</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="at">  </span><span class="fu">redis</span><span class="kw">:</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> </span><span class="st">"redis:alpine"</span></span></code></pre>
</div>
<p>In diesem Beispiel wird ein Webservice definiert, der das Dockerimage
basierend auf dem dockerfile mit Namen <code>DOCKERFILE</code> baut und
den Port 5000 des Hosts auf den Port 5000 des Containers weiterleitet.
Ein weiterer Service namens <code>redis</code> wird aus dem
vorgefertigten <code>redis:alpine</code>-Image erstellt (ohne angepasst
zu werden).</p>
<p>Um die Images zu bauen, wird der folgende Befehl verwendet:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">docker</span> compose build</span></code></pre>
</div>
<p>Ist der Build-Prozess erfolgreich abgeschlossen (dies kann je nach
<code>DOCKERFILE</code> sehr lange dauern), kann das Compose-Projekt wie
gewohnt gestarte werden: <code>sudo docker compose up -d</code></p>
</div>
</section><section><h2 class="section-heading" id="docker-images-aktualisieren">Docker Images aktualisieren<a class="anchor" aria-label="anchor" href="#docker-images-aktualisieren"></a>
</h2>
<hr class="half-width">
<p>Wenn neue Versionen eines Docker-Images veröffentlicht werden, muss
das bestehende Image aktualisiert werden. Um ein neues Image zu laden
und das alte zu ersetzen, wird wie folgt vorgegangen:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Definiton eines neuen Images</strong>: Stellen Sie sicher,
dass Ihre <code>compose.yml</code>-Datei auf das neue Image verweist.
Ändern Sie die ggf. die Versionsangabe in der <code>image</code>-Zeile
entsprechend.</li>
</ol>
<p>Zum Beispiel wird aus Version 10:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="at">    </span><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="at">      </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp:10</span></span></code></pre>
</div>
<p>Version 11:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="at">    </span><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="at">      </span><span class="fu">web</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="at">        </span><span class="fu">image</span><span class="kw">:</span><span class="at"> myapp:11</span></span></code></pre>
</div>
<p>Häufig wird auf die <code>latest</code> oder
<code>stable</code>-Version verwiesen. Diese Angabe bewirkt, dass bei
der Aktualisierung immer die dann aktuelle Version geladen wird. Ist
dies nicht gewünscht, muss die Version wie oben im Beispiel gezeigt
explizit angegeben werden.</p>
<ol start="2" style="list-style-type: decimal">
<li><p><strong>Herunterladen des neuen Images</strong>: Führen Sie den
Befehl <code>docker compose pull</code> aus, um das neue Image
herunterzuladen. Dieser Befehl aktualisiert die Images, die in der
<code>compose.yml</code>-Datei definiert sind. Der Download kann in
Abhängigkeit der Anzahl und Größe der enthaltenen Images einige Zeit
dauern.</p></li>
<li><p><strong>Starten des neuen Images</strong>: Nachdem das neue Image
heruntergeladen wurde, können Sie die Container mit dem neuen Image neu
starten:
<code>sudo docker compose up -d --remove-orphans</code></p></li>
<li>
<p><strong>Löschen des alten Images</strong>: Um das alte Image zu
löschen und Speicherplatz freizugeben, können Sie den Befehl
<code>docker image rm</code> verwenden. Zuerst müssen Sie jedoch
sicherstellen, dass keine Container mehr das alte Image verwenden.
Verwenden Sie den Befehl <code>docker image ls</code>, um die Liste der
Images anzuzeigen, und dann
<code>docker image rm &lt;image_id&gt;</code>, um das alte Image zu
löschen.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">docker</span> image ls</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="ex">docker</span> image rm <span class="op">&lt;</span>image_id<span class="op">&gt;</span></span></code></pre>
</div>
<p>Etwas schneller aber weniger Umsichtig können die alten Images mit
dem Befehl <code>sudo docker image prune</code> gelöscht
werden.</p>
</li>
</ol>
<!--überprüfen--><p>Wird in der Compose-Datei der Build-Befehl genutzt, muss vor dem
<code>docker pull</code>-Befehl noch der <code>build</code>-Befehl wie
<a href="#der-docker-compose-build-befehl">oben</a> neu ausgeführt
werden.</p>
<p>Weitere Informationen zu diesem Prozess finden sich auch bei <a href="https://stackoverflow.com/questions/49316462/how-to-update-existing-images-with-docker-compose" class="external-link">Stack
Overflow</a>.</p>
<p>Um auch andere Docker-Komponenten zu löschen, empfiehlt es ich, den
docker prune-Befehl regelmäßig auszuführen. Siehe dazu die offizielle <a href="https://docs.docker.com/engine/manage-resources/pruning/" class="external-link">Anleitung</a>.</p>
</section><section><h2 class="section-heading" id="portainer-als-gui-für-docker">Portainer als GUI für Docker<a class="anchor" aria-label="anchor" href="#portainer-als-gui-f%C3%BCr-docker"></a>
</h2>
<hr class="half-width">
<p><a href="https://docs.portainer.io/" class="external-link">Portainer</a> ist eine
benutzerfreundliche grafische Benutzeroberfläche (GUI) für die
Verwaltung von Docker-Containern. Mit Portainer können Sie Container
starten, stoppen, verwalten und überwachen, ohne die Docker-Befehlszeile
verwenden zu müssen.</p>
<p>Portainer wird selbst als Docker Container installiert und
gestartet:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">sudo</span> docker volume create portainer_data</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">sudo</span> docker run <span class="at">-d</span> <span class="at">-p</span> 8000:8000 <span class="at">-p</span> 9443:9443 <span class="at">--name</span> portainer <span class="at">--restart</span><span class="op">=</span>always <span class="at">-v</span> /var/run/docker.sock:/var/run/docker.sock <span class="at">-v</span> portainer_data:/data portainer/portainer-ce:lts</span></code></pre>
</div>
<p>Nach der Installation kann Portainer über einen Webbrowser unter
<code>http://&lt;Server-IP-oder-URL&gt;:9000</code> erreicht werden
(vorausgesetzt der Proxy Host ist eingerichtet).</p>
<p>Mehr Informationen finden sich in der <a href="https://docs.portainer.io/start/install-ce/server/docker/linux" class="external-link">Dokumentation
von Portainer</a>.</p>
</section><section><h2 class="section-heading" id="docker-swarm-podman-und-kubernetes-als-alternativen-zu-docker">Docker Swarm, Podman und Kubernetes als Alternativen zu Docker<a class="anchor" aria-label="anchor" href="#docker-swarm-podman-und-kubernetes-als-alternativen-zu-docker"></a>
</h2>
<hr class="half-width">
<p>Neben Docker gibt es mehrere alternative Technologien, die ähnliche
Funktionen bieten:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Docker Swarm</strong>: Docker Swarm ist eine native
Clustering- und Orchestrierungslösung für Docker. Sie ermöglicht es,
mehrere Docker-Hosts zu einem Cluster zusammenzufassen und Anwendungen
darauf zu verteilen. Docker Swarm ist einfach zu verwenden und in Docker
integriert.</p></li>
<li><p><strong>Podman</strong>: Podman ist eine daemonlose Alternative
zu Docker, die kompatibel mit Docker-Images und -Containern ist. Podman
bietet eine ähnliche Befehlszeilensyntax wie Docker, arbeitet jedoch
ohne einen zentralen Daemon, was die Sicherheit und Isolierung
verbessert. So benötigt Podman standardmäßig keine Root-Rechte zum
starten der der Container.</p></li>
<li><p><strong>Kubernetes</strong>: Kubernetes ist eine leistungsstarke
Orchestrierungsplattform für Container, die eine umfassende Verwaltung
und Skalierung von Containeranwendungen ermöglicht. Kubernetes ist
komplexer als Docker Swarm, bietet jedoch mehr Funktionen und
Flexibilität für große und komplexe Anwendungen.</p></li>
</ol>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Hauptpunkte</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li><p>Dockerimages könne mit Dockerfiles angepasst werden</p></li>
<li><p>ein Dockerfile ist die Bauanleitung für ein Dockerimage</p></li>
<li><p>Dockerimages müssen regelmäßig aktualisiert werden</p></li>
<li><p>Portainer bietet eine Weboberfläche zur Verwaltung von
Docker</p></li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>Diese Lektion unterliegt dem <a href="CODE_OF_CONDUCT.html">Verhaltenskodex</a></p>
        <p>

        <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/edit/main/README.md" class="external-link">Auf GitHub bearbeiten</a>

	
        | <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/blob/main/CONTRIBUTING.md" class="external-link">Beitragen</a>
        | <a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/" class="external-link">Quelle</a></p>
				<p><a href="https://github.com/Dr-Eberle-Zentrum/docker-linuxserver-cloud/blob/main/CITATION.cff" class="external-link">Zitieren</a> | <a href="mailto:david.kirschenheuter@uni-tuebingen.de">Kontakt</a> | <a href="https://carpentries.org/about/" class="external-link">Über</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Vorlage lizenziert unter <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> von <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Erstellt mit <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a> und <a href="https://github.com/Dr-Eberle-Zentrum/varnish/tree/801bcb40bf3fb18c37950e8d445d79e8aec39af7" class="external-link">varnish (1.0.4)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Zurück nach oben"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Zurück</span> nach oben
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://Dr-Eberle-Zentrum.github.io/docker-linuxserver-cloud/instructor/aio.html",
  "inLanguage": "de",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "Nextcloud, Self-hosted, Docker, Linux, Webserver, HTTPS",
  "name": "Alles auf einen Blick",
  "creativeWorkStatus": "active",
  "url": "https://Dr-Eberle-Zentrum.github.io/docker-linuxserver-cloud/instructor/aio.html",
  "identifier": "https://Dr-Eberle-Zentrum.github.io/docker-linuxserver-cloud/instructor/aio.html",
  "dateCreated": "2025-08-18",
  "dateModified": "2025-10-21",
  "datePublished": "2025-10-21"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

